# Samsung-PD-Training-
## Day-0-Installation
<details>
 <summary> Summary </summary>
	
I installed the needed tools and attached the required screenshots:

</details>	
	
 <details>
 <summary> Yosys </summary>
Yosys is an open-source framework for Verilog RTL synthesis. RTL stands for Register Transfer Level, which is a high-level abstraction used to describe digital circuits at the level of registers and their interactions. Yosys is primarily used in the digital design and electronic design automation (EDA) community to convert RTL descriptions of digital circuits, written in languages like Verilog or SystemVerilog, into a netlist representation that can be further optimized, analyzed, and eventually implemented in hardware.

I installed Yosys using the following commands and Below is the screenshot showing sucessful launch:

<img width="1085" alt="yosys" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/15cd9fc2d5f7e147dbf66f4e86b6aa86651db3cd/PD%23day0/Yosys.png">
</details>
--------------------------------

 <details>
 <summary> GTK Wave </summary>

GTKWave is an open-source waveform viewer and analyzer primarily used in digital design and electronic design automation (EDA) workflows. It allows users to visualize and analyze the waveforms generated by digital simulations, making it a valuable tool for debugging and verifying digital designs.

I installed GTKwave using the following commands and Below is the screenshot showing sucessful launch:

<img width="1085" alt="GTKwave" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/012a981015cee8c90ff3835ed3e9e20acd1debe9/PD%23day0/gtkwave.png">
</details>
--------------------------------

 <details>
 <summary> ICC2 </summary>

It appears that "icc2 compiler" might refer to an abbreviation of "Intel C++ Compiler 2," which would be the second version of Intel's C++ compiler. Intel's C++ Compiler is a tool used to compile C and C++ programs, optimizing them for Intel processors and architectures. It offers features like advanced vectorization, parallelization, and optimization techniques to enhance the performance of code on Intel-based systems.

I installed ICC2 using the following commands and Below is the screenshot showing sucessful launch:

<img width="1085" alt="ICC2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b7aea8ac24074b02355ba3408d84098f825ac56a/PD%23day0/icc2.png">
</details>
------------------------------

<details>
 <summary> lc_shell </summary>

LC_shell, also known as Design Compiler Graphical, is a part of the Synopsys suite of Electronic Design Automation (EDA) tools. It's used in the digital design flow for logic synthesis and optimization. Design Compiler Graphical is an advanced version of the original Design Compiler tool, providing additional features and a more user-friendly graphical interface.
I invoked lc_shell using the following commands and Below is the screenshot showing sucessful launch:

<img width="1085" alt="lc_shell" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f9c32b3af96086cb1823ea7b5a1d96ad524c6907/PD%23day0/lc_shell.png">
</details>
-------------------------------

<details>
 <summary> dc_shell </summary>

Design Compiler is a widely used electronic design automation (EDA) tool developed by Synopsys. It's primarily used for logic synthesis in digital integrated circuit design. Logic synthesis involves transforming a high-level description of a digital circuit (usually written in hardware description languages like Verilog or VHDL) into a lower-level representation made up of gates, flip-flops, and other basic digital components.
I invoked dc_shell using the following commands and Below is the screenshot showing sucessful launch:

<img width="1085" alt="dc_shell" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/c1c917d6ea2259e11eb35c8210a5ba5d033efc98/PD%23day0/lc_shell1.png">
</details>
------------------------------

<details>
 <summary> pt_shell </summary>

"PrimeTime" is a widely used Electronic Design Automation (EDA) tool developed by Synopsys. It is used for static timing analysis, which is a crucial step in the digital design flow to ensure that the design meets its timing requirements. The "PrimeTime Shell" is the user interface through which engineers interact with the PrimeTime tool to perform timing analysis and optimization.
I invoked pt_shell using the following commands and Below is the screenshot showing sucessful launch:

<img width="1085" alt="pt_shell" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a698767d9372140b08254434b15860f0db8169e2/PD%23day0/pt_shell.png">
</details>



## Day-1-Introduction to Verilog RTL Design and Synthesis
<details>
 <summary> Introduction to RTL-Design, Test-bench, Simulators </summary>
-RTL Design : The RTL Design stands for Register Transfer Language. It sits between the high-level system specification and the lower-level gate-level implementation. This is a design abstraction which models the flow of digital signals between hardware registers, and the logical operations performed on those signals. RTL is preferred because it is easy to understand and implement compared to structural and behavioral models.

-HDL : A hardware description language (HDL) enables a precise, formal description of an electronic circuit that allows for the automated analysis and simulation of an electronic circuit.

-Simulator : Simulator is the tool used for checking adherence to the specification by simulating the design. iverilog is the tool used for RTL simulation. A simulator looks for change in the input signals and when no change in input, the output also doesn't change. It produces an output in the form of a .vcd file.

-Design : Design is the actual verilog code or set of Verilog codeswhich has the intended functionality to meet the required specifications. Design may have one or more primary inputs or primary outputs.  RTL design is the behavioral representation of the required specification.


<details>
<summary> Labs on examples of iverilog and gtkwave </summary>
We made a directory namely VLSI and inside that directory we cloned vsdflow and sky130RTLDesignAndSynthesisWorkshop repository. This repository consists of the required .lib files and verilog codes and its testbenches for practice.
Below is the output wave form in gtkwave generated by performing a simulation of good_mux using iverilog.
The syntax of the code is: iverilog <RTL_code> <Its_Testbench>
<img width="1085" alt="lc_shell" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/35b6b9038bf5a6c855c534a868c02bdfc149bfa3/PD%23Day1/gtk_wave_mux.PNG">
RTL code and testbench for good_2:1_mux
<img width="1085" alt="lc_shell" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/35b6b9038bf5a6c855c534a868c02bdfc149bfa3/PD%23Day1/rtl_code.PNG">
</details>
</details>

<details>
 <summary> Introduction to Yosys </summary>
-Synthesis: Synthesis in VLSI is the process of converting your code (program) into a circuit. In terms of logic gates, synthesis is the process of translating an abstract design into a properly implemented chip. It is a process of converting a RTL code into a gate level netlist. The tool used for this purpose is called synthesizer.

-Yosys : Yosys is a framework for RTL synthesis and more. It currently has extensive Verilog-2005 support and provides a basic set of synthesis algorithms for various application domains. Yosys is the core component of most our implementation and verification flows.

-Verification of synthesized design : In order to make sure that there are no errors in netlist we need to verify the netlist generated by synthesizer. This can be done by giving netlist and testbench to a simulator which in turn produces a .vcd file , then verifying the vcd file gtkwave. The output produced by this vcd file should be same as the one generated by the RTL design code.

-Faster Cells Vs Slower Cells :Load in digital circuit is of Capacitence. Faster the charging or dicharging of capacitance, lesser is the celll delay. However, for a quick charge/ discharge of capacitor, we need transistors capable of sourcing more current i.e, we need WIDE TRANSISTORS.

Transistors with higher W/L have lesser delay but consume more area and power while Transistors with less W/L has more delay and less area. Faster cells come with a cost of area and power.

Selection of the Cells: Based on timing constraints we need select the cell. Setup supports faster cells in datapath while hold supports slower. We need to select suitable which can satisfy both constraints.
<details>
 <summary> Lab work on Yosys </summary>
We were given the overview of this tool and the basic files required to perform the experiment on 2:1 MUX.
Procedure : First we need to read the liberty file (.lib) using the code: read_liberty -lib <path of the .lib>


Read the RTL code:

read_verilog <RTL_Design_file>

For synthesis:

synth -top <instance_name>

For Generating netlist:

abc -liberty <.lib path>  --------<present_on_lib_folder>
This Netlist can be viewed in the synthesized circuit form which uses std. cell present in .lib using the show command :
<img width="1085" alt="lc_shell" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/19c8df9a79de2fb33db16e1d9e3e8b95a55a64b8/PD%23Day1/Yosys_netlist.PNG">
</details>
</details>



## Day-2-Introduction to Timing libraries, Hierarchical vs flat synthesis, and flip flop coding

<details>
 <summary> Introduction to Timing Library File (.Lib) </summary>
Liberty File(.lib) contains important info about the electrical behavior  of std cells used in IC design. Also, Liberty File(.lib) consists of ASCII representations of Timing, Area, and Power associated with the Standard cell. The Naming convention in the timing file follows technology node and PVT format (Process, Voltage, Temperature). For example, the standard library used in our case was sky130_fd_sc_hd_tt_025C_1v8, this name suggests that we are using 130 nm technology and the process is typical(tt), temperature is 25C, and 1v8 represents the 1.8V.
Screenshot of a standard library file shown below: 
<img width="1085" alt="lib" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/6e256528c8de9193640fb445f589071e23beeee5/PD%23Day2/lib_part1.PNG">
	
The Liberty File also consists of the technology used for standard cells as in the above example it is CMOS, it also specifies the delay model, unit of time, unit of voltage, unit of resistance, and many other units.
All the data i.e std cells delays, leakage power, capacitance is stored in form of LUTs. For each gate cell based on the number of inputs(N), there will be 2^N combinations, and for each combination leakage power, area, delay, and all related parameters are mentioned. For example, consider the below screenshot the gate mentioned in the screenshot consists of 4 inputs so there will be 16 combinations, and for all the combinations power, delay, value, and all the features are mentioned below.
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/6e256528c8de9193640fb445f589071e23beeee5/PD%23Day2/lib_part2.PNG">
	
The timing file consists of many different variations of the same gate cells. As we move toward faster cell (cell with higher drive strength) the area and power increases. In liberty file area, power, timing values are given for same cell of different drive strength and it also consist if the inform about leakage power of all the possible logic of different configration shown below.
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a69147a2bedd2c78636125b3b35b7996fa55659e/PD%23Day2/lib_part3.PNG">
</details>

<details>
 <summary> Hierarchical vs Flat synthesis in Yosys </summary>
Hierarchical synthesis : The basic flow of hierarchical design is Dividing a design into multiple blocks (i.e. sub-chips, sub-blocks, modules, hierarchical blocks, etc.) which can also be user defined. Hierarchial design has blocks, subblocks in an hierarchy.
In Yosys we have done synthesis of a multimodule combinational circuit which consists of two sub_modules one that of ** AND ** gate and other of ** OR ** gate. Below is the RTL Design code of multimodules is gvien below:
	Synthesis Simulation Mismatch
```
module sub_module2 (input a, input b, output y);
        assign y = a | b;
endmodule

module sub_module1 (input a, input b, output y);
        assign y = a&b;
endmodule
```

module multiple_modules (input a, input b, input c , output y);
        wire net1;
        sub_module1 u1(.a(a),.b(b),.y(net1));  //net1 = a&b
        sub_module2 u2(.a(net1),.b(c),.y(y));  //y = net1|c ,ie y = a&b + c;
endmodule
```
We do synthesis in yosys it generates the following gate level netlist :

<img width="1085" alt="lib" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/7d2732dc1300198990edfb77ed38ef0cff0db911/PD%23Day2/hire_synth.PNG">

The yosys considers the module hierarchy and does mapping according to the instantiation i.e by using sub blocks.The netlist code for hierarchical implementation of the multiple_modules.
```
module multiple_modules(a, b, c, y);
	  input a;
	 input b;
	 input c;
	  wire net1;
	 output y;
  sub_module1 u1 (.a(a),.b(b),.y(net1) );
  sub_module2 u2 (.a(net1),.b(c),.y(y));
endmodule

module sub_module1(a, b, y);
 wire _0_;
 wire _1_;
 wire _2_;
 input a;
 input b;
 output y;
 sky130_fd_sc_hd__and2_0 _3_ (.A(_1_),.B(_0_),.X(_2_));
 assign _1_ = b;
 assign _0_ = a;
 assign y = _2_;
endmodule

module sub_module2(a, b, y);
wire _0_;
 wire _1_;
 wire _2_;
input a;
input b;
 output y;
 sky130_fd_sc_hd__lpflow_inputiso1p_1 _3_ (.A(_1_),.SLEEP(_0_),.X(_2_) );
 assign _1_ = b;
 assign _0_ = a;
 assign y = _2_;
endmodule
```
In the netlist it can observed that separate modules namely sub_module1 sub_module2 are created  i.e submodules are getting instanstiated not the std cells present in library.

Flat synthesis : In Flat synthesis the hierarchies the flattened out and every submodule is created using std cells. We apply flat synthesis on the same design mentioned above. The command used to perform Flat synthesis from yosys are as follows :

--- read_liberty -lib <path of the .lib>

--- read_verilog <RTL_file>

--- synth -top <instance_name>

--- abc -liberty <.lib_path>

--- flatten

--- write_verilog -noattr <.v_File_name>
The synthesized circuit for a flattened netlist is shown in the below: 

<img width="1085" alt="lib" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/227e10459da8569b3bc7ac52f8bc2d389068a278/PD%23Day2/flatten_synth.PNG">
</details>

<details>
 <summary> Flip-flop Coding Styles </summary>

 Flip-flops :A flip-flop is a sequential digital electronic circuit having two stable states that can be used to store one bit of binary data. Flip-flops are the fundamental building blocks of all memory devices.

 The complexity of cobinational circuit increases the chance of glitch, hence FFs are used to avoid it and it stable output.

 Asynchronous Reset D Flop: 
 
 Here the output signal goes low when the reset signal is high , irrespective of the clock's edge(+ve,-ve or dual edge ).
 RTL Design code of positive edge trigerred asynchronous reset D FF:
 ```
module dff_asyncres ( input clk ,  input async_reset , input d , output reg q );
	always @ (posedge clk , posedge async_reset)
	begin
		if(async_reset)
			q <= 1'b0;
		else	
			q <= d;
	end
endmodule
```
Its gtkwave :<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/7b832441e73dd5c5bc078425a1f34ee4dea508fd/PD%23Day2/asyn_dff_gtk.png">

Its Yosys synthesised netlist:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/7b832441e73dd5c5bc078425a1f34ee4dea508fd/PD%23Day2/asyn_rst_synth.png">

Asynchronous set D Flop:

Here the output signal goes high when the reset signal is high , irrespective of the clock's edge(+ve,-ve or dual edge ).
 RTL Design code of positive edge trigerred asynchronous set D FF:
 ```
module dff_async_set ( input clk ,  input async_set , input d , output reg q );
	always @ (posedge clk , posedge async_set)
	begin
		if(async_set)
			q <= 1'b1;
		else
			q <= d;
	end
endmodule
```

Its GTKwave :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/7e6fa6fc208da635a0ef187a306d8c35f51fa7b8/PD%23Day2/asyn_set_gtk.png">

Its Yosys synthesised netlist:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/7e6fa6fc208da635a0ef187a306d8c35f51fa7b8/PD%23Day2/async_sett_synth.png">

Synchronous reset D Flop :

The reset depend on the clock edge. Here the output signal goes low whenever the reset signal is high and at the clock edge(positive or negative)
RTL Design code of positive edge trigerred synchronous reset D FF:
```
module dff_syncres ( input clk , input async_reset , input sync_reset , input d , output reg q );
	always @ (posedge clk )
	begin
		if (sync_reset)
			q <= 1'b0;
		else	
			q <= d;
	end
endmodule
```

Its GTKwave :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1710b01447acaaf9d5dd46085c2de830b13d0052/PD%23Day2/sync_rst_gtk.png">

Its Yosys synthesised netlist:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1710b01447acaaf9d5dd46085c2de830b13d0052/PD%23Day2/sync_rst_synth.png">
</details>


<details>
 <summary> Optimization Techniques </summary>
 The Optimization involves the reducing hardware in the design to improve area, power and speed. Two example where given:
 1. a*2
Consider a case where 3 bit number is multiplied by 2 in this case we dont need any additional hardware and only needs connecting bits to the output and grounding the LSB bit,same is realized by yosys. When binary number is multiplied by 2^n then result will gave same number by appending zero in LSB by n times.
RTL code:
	
```
	module mul2 (input [2:0] a, output [3:0] y);
	assign y = a * 2; // assign y={a,1'b0}
	endmodule
```

Yosys Synthesis result : 
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/323e37b40a9b040ec9f029d9378732b9acbb65b0/PD%23Day2/mult2_synth.png">

 2. a*9
Multiplying a 3 bit number by 9, gives results as concatination of same number twice {a,a}.
a*[8+1]= {a,0,0,0} + a(3bit)={a,a}

RTL code:

```
module mul8 (input [2:0] a, output [5:0] y);
	assign y = a * 9; // assign y={a,a}
endmodule
```

Yosys Synthesis result : 
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/323e37b40a9b040ec9f029d9378732b9acbb65b0/PD%23Day2/mult8_synth.png">
</details>


## Day-3- Combinational and sequential optmizations

<details>
 <summary> Combinational Optimization </summary>
Optimising the combinational logic circuit is squeezing the logic to get the most optimized digital design so that the circuit finally is area and power efficient. This is achieved by the synthesis tool using various techniques and gives us the most optimized circuit.
Command to optimize the circuit by yosys is yosys> opt_clean -purge
We have done synthesis using yosys for few examples:

*Example 1*
```
module opt_check (input a , input b , output y);
	assign y = a?b:0;
endmodule
```
yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d9c6f5e15302e6dc799ad643bcc537094b6c5da/PD%23Day3/opt_check_synth.png">
In this verilog code represents the mux but as one of the input 0 , it infers an AND gate as shown in synthesis.


*Example 2*
```
module opt_check2 (input a , input b , output y);
	assign y = a?1:b;
endmodule
```
yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d9c6f5e15302e6dc799ad643bcc537094b6c5da/PD%23Day3/opt_check2_synth.png">
In this verilog code represents the mux but as one of the input 1, it infers an AND gate as shown in synthesis.

*Example 3*
```
module opt_check3 (input a , input b, input c , output y);
	assign y = a?(c?b:0):0;
endmodule
```
yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d9c6f5e15302e6dc799ad643bcc537094b6c5da/PD%23Day3/opt_check3_synth.png">   
In this verilog code represents the 2 mux but as two of the input 0, it infers an 3 i/p AND gate as shown in synthesis.


*Example 4*
```
module opt_check4 (input a , input b , input c , output y);
	assign y = a?(b?(a & c ):c):(!c);
endmodule
```
yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d9c6f5e15302e6dc799ad643bcc537094b6c5da/PD%23Day3/opt_check4_synth.png">   
In yosys we can see b is never changed follows xnor of a and c inputs.

Generated nelist:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d9c6f5e15302e6dc799ad643bcc537094b6c5da/PD%23Day3/opt_check4_netlist.png">   
So, here input b is passed through buffer and a and c inputs is xnored followed by buffers in inputs and output.

*Example 5*
Here there is multiple modules present so we will try to check whether those module are being used or not and we use flatten for submudules
read_liberty -lib <library_path>

read_verilog <verilog_file>

synth -top <module_name>

opt_clean -purge

abc -liberty <library_path>

flatten
```
module sub_module1(input a , input b , output y);
	 assign y = a & b;
	endmodule

	module sub_module2(input a , input b , output y);
	 assign y = a^b;
	endmodule

	module multiple_module_opt(input a , input b , input c , input d , output y);
	wire n1,n2,n3;
	sub_module1 U1 (.a(a) , .b(1'b1) , .y(n1));
	sub_module2 U2 (.a(n1), .b(1'b0) , .y(n2));
	sub_module2 U3 (.a(b), .b(d) , .y(n3));

	assign y = c | (b & n1); 
	endmodule
```
yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d9c6f5e15302e6dc799ad643bcc537094b6c5da/PD%23Day3/multi_module_opt.png">   

Generated nelist:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d9c6f5e15302e6dc799ad643bcc537094b6c5da/PD%23Day3/multi_module_opt_netlist.png">  

*Example 6*

```
module sub_module(input a , input b , output y);
	assign y = a & b;
endmodule

module multiple_module_opt2(input a , input b , input c , input d , output y);
	wire n1,n2,n3;
	sub_module U1 (.a(a) , .b(1'b0) , .y(n1));
	sub_module U2 (.a(b), .b(c) , .y(n2));
	sub_module U3 (.a(n2), .b(d) , .y(n3));
	sub_module U4 (.a(n3), .b(n1) , .y(y));
endmodule
```
yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d9c6f5e15302e6dc799ad643bcc537094b6c5da/PD%23Day3/multi_module_opt2_synth.png">   

Generated nelist:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d9c6f5e15302e6dc799ad643bcc537094b6c5da/PD%23Day3/multi_module_opt2_netlist.png">  
</details>

<details>
 <summary> Sequential Optimization </summary>
There are various techniques for Sequential Logic Optimization

    - Sequentialal constant propagation

    - Advanced

        - State Optimization

        - Retiming

        - Sequential Logic cloning

 Sequential Constant Propogation

Consider a case where asynchronous reset D Flip-flop is fed with d = 0(i.e GND) always so the output will always be 0 irrespective of the timing or circuit.

 Advanced

State Optimisation: This is optimisation of unused state. Using this technique we can come up with most optimised state machine.

Cloning : It is an optimization technique that duplicates a cell to reduce the load on heavily loaded cell. This technique is usually preffered while performing PHYSICAL AWARE SYNTHESIS. Lets consider a flop A which is connected to flop B and flop C through a combination logic. If B and C are placed far from A in the flooerplan, there is a routing path delay. To avoid this, we connect A to two intermediate flops and then from these flops the output is sent to B and C thereby decreasing the delay. This process is called cloning since we are generating two new flops with same functionality as A.

Retiming : Sequential circuits can be optimised by retiming. The combinational section of the circuitry is unaffected as it only rearranges the registers in the circuit. It is a powerful sequential optimization technique used to move registers across the combinational logic or to optimize the number of registers to improve performance via power-delay trade-off, without changing the input-output behavior of the circuit.

Sequential Constant Propogation

Consider a case where asynchronous reset D Flip-flop is fed with d = 0(i.e GND) always so the output will always be 0 irrespective of the timing or circuit.
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8af801e512e9a291e7cd6dd36255eddba1c168d0/PD%23Day3/image.jpg">   


*Example 1*
```
module dff_const1(input clk, input reset, output reg q);
	always @(posedge clk, posedge reset)
	begin
		if(reset)
			q <= 1'b0;
		else
			q <= 1'b1;
	end
endmodule
```
GTK Wave:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/bc0648ea65f00f921b633d7c79e1c442241a9c28/PD%23Day3/dff_const1_gtk.png">   



Yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/bc0648ea65f00f921b633d7c79e1c442241a9c28/PD%23Day3/dff_const1_synth.png">   

*Example 2*
```
module dff_const2(input clk, input reset, output reg q);
	always @(posedge clk, posedge reset)
	begin
		if(reset)
			q <= 1'b1;
		else
			q <= 1'b1;
	end
endmodule
```

Yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/bc0648ea65f00f921b633d7c79e1c442241a9c28/PD%23Day3/dff_const2_synth.png">
Irrespective of clock edge , output will always is 1. So buffer is  inffered.

*Example 3*
```
module dff_const3(input clk, input reset, output reg q);
	reg q1;

	always @(posedge clk, posedge reset)
	begin
		if(reset)
		begin
			q <= 1'b1;
			q1 <= 1'b0;
		end
		else
		begin
			q1 <= 1'b1;
			q <= q1;
		end
	end
	endmodule
```

GTK Wave:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/bc0648ea65f00f921b633d7c79e1c442241a9c28/PD%23Day3/dff_const3_gtk.png">   



Yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/bc0648ea65f00f921b633d7c79e1c442241a9c28/PD%23Day3/dff_const3_synth.png">   

*Example 4*
```
module dff_const4(input clk, input reset, output reg q);
	reg q1;

	always @(posedge clk, posedge reset)
	begin
		if(reset)
		begin
			q <= 1'b1;
			q1 <= 1'b1;
		end
	else
		begin
			q1 <= 1'b1;
			q <= q1;
		end
	end
	endmodule
```

GTK Wave:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/bc0648ea65f00f921b633d7c79e1c442241a9c28/PD%23Day3/dff_const4_gtk.png">   



Yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/bc0648ea65f00f921b633d7c79e1c442241a9c28/PD%23Day3/dff_const4_synth.png">   

*Example 5*
```
module dff_const5(input clk, input reset, output reg q);
	reg q1;
	always @(posedge clk, posedge reset)
		begin
			if(reset)
			begin
				q <= 1'b0;
				q1 <= 1'b0;
			end
		else
			begin
				q1 <= 1'b1;
				q <= q1;
			end
		end
	endmodule
```
GTK Wave:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/26c2ba861dfaf28ca7e75d2913c070226c8a5285/PD%23Day3/dff_const5_gtk.png">   



Yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/26c2ba861dfaf28ca7e75d2913c070226c8a5285/PD%23Day3/dff_const5_synth.png"> 
</details>


<details>
 <summary> Optimization Examples </summary>
	
*Example 1*
```
   module counter_opt (input clk , input reset , output q);
   reg [2:0] count;
   assign q = count[0];
   always @(posedge clk ,posedge reset)
   begin
   	if(reset)
   		count <= 3'b000;
   	else
   		count <= count + 1;
   end
   endmodule
   ```
   
Yosys generated gui:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/26c2ba861dfaf28ca7e75d2913c070226c8a5285/PD%23Day3/counter_opt_synth.png">
</details>

<details>
 <summary> Summary </summary>

 In Day 3 , It started with optimizing methodology, which involves the cost function. Cost funtion consist of following parts: 
 - Max delay Cost 
 - Min delay Cost 
 - Max Power Cost
 - Max area Cost

In optimization we seen few examples of sequential and combinational circuits based on different algorithms. 
</details>



## Day-4- GLS,blocking vs non-blocking and Synthesis-Simulation mismatch

<details>
<summary> GLS Concepts And Flow Using Iverilog </summary>

-- What is GLS- Gate Level Simulation?:
GLS is generating the simulation output by running test bench with netlist file generated from synthesis as design under test. Netlist is logically same as RTL code, therefore, same test bench can be used for it.

-- Why GLS?:
We perform this to verify logical correctness of the design after synthesizing it. Also ensuring the timing of the design is met.

Below picture gives an insight of the procedure. Here while using iverilog, we also include gate level verilog models to generate GLS simulation.

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/d17cd858582bb157db097c5bdab07548794e008d/PD%23Day4/IMG_6766.png">
Example :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8d9343b03653b5480cb54ca9d97e32782986ba8c/PD%23Day4/IMG_6768.jpeg">

*Synthesis Simulation Mismatch* 
There are three main reasons for Synthesis Simulation Mismatch:

   -- Missing sensitivity list in always block
   -- Blocking vs Non-Blocking Assignments
   -- Non standard Verilog coding
Missing sensitivity list in always block:
Lets take example of mux having inputs as i0,i1 and sel and output as y.
```
always @(sel)                  always @(*)
//It will infer a latch        // It will infer a mux.
```
If i0 and i1 changes will not be reflected in always block.
To avoid the synthesis and simulation mismatch. It is very important to check the behaviour of the circuit first and then match it with the expected output seen in simulation and make sure there are no synthesis and simulation mismatches. This is why we use GLS.

Blocking vs Non-Blocking Assignments:
Blocking statements execute the statemetns in the order they are written inside the always block. Non-Blocking statements execute all the assignment parallelly inside a always block.
This will give mismatch as sometimes, improper use of blocking statements can create latches. 
Example
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8d9343b03653b5480cb54ca9d97e32782986ba8c/PD%23Day4/IMG_6769.jpeg">
</details>

<details>
<summary> LABs </summary>
	
*Example 1*
In this example there is no mismatch between the RTL Design simulated wave and Netlist simulated wave.
```
module ternary_operator_mux (input i0 , input i1 , input sel , output y);
   assign y = sel?i1:i0;
endmodule
```
Gtkwave:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ec9152185e79565ae1d1439d3b644e20bdb8cbd/PD%23Day4/ternary_gtk.png">

Yosys result: 
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ec9152185e79565ae1d1439d3b644e20bdb8cbd/PD%23Day4/ternary_synth.png">

GLS Simulation:
I used the below commands to carry out GLS of ternary_operator_mux.v:
```
iverilog <path to verilog model: ../mylib/verilog_model/primitives.v> <path to sky130_fd_sc_hd__tt_025C_1v80.lib: ../lib/sky130_fd_sc_hd__tt_025C_1v80.lib> <name netlist: ternary_operator_mux_net.v> <name testbench: tb_ternary_operator_mux.v>
./a.out
gtkwave tb_ternary_operator_mux.vdc
```

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ec9152185e79565ae1d1439d3b644e20bdb8cbd/PD%23Day4/ternary_result_gtk.png">

*Example 2*
```
module bad_mux (input i0 , input i1 , input sel , output reg y);
	always @ (sel)
	begin
		if(sel)
			y <= i1;
		else 
			y <= i0;
	end
endmodule
```
Gtkwave:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/90b875b162a2b4374c14537fc8a9b21f6d598dee/PD%23Day4/bad_mux_gtk.png">

Yosys result: 
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ec9152185e79565ae1d1439d3b644e20bdb8cbd/PD%23Day4/ternary_synth.png">

GLS Simulation:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/90b875b162a2b4374c14537fc8a9b21f6d598dee/PD%23Day4/bad_mux_result_gtk.png">

Summary :Here first pic shows the netlist simulation which corrects the bad_mux design which was only changing waveform when sel was triggered while for a mux to work properly it should be sensitivity to all the input signals.

*Example 3*
```
module blocking_caveat (input a , input b , input  c, output reg d); 
reg x;
always @ (*)
	begin
	d = x & c;
	x = a | b;
end
endmodule
```
Hardware of Verilog code :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0a9b38a6aeaf932958f3f06b6435298cc0f233d8/PD%23Day4/IMG_6767.png">
Gtkwave:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/90b875b162a2b4374c14537fc8a9b21f6d598dee/PD%23Day4/blocking_gtk.png">

Yosys result: 
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/90b875b162a2b4374c14537fc8a9b21f6d598dee/PD%23Day4/blocking_synth.png">

GLS Simulation:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/90b875b162a2b4374c14537fc8a9b21f6d598dee/PD%23Day4/blocking_result_gtk.png">

Summary : Here this how the circuit should behave but this correct waveform is only obtained while doing netlist simulation. Here first pic show the netlist simulation which shows the proper working of the dut while the last pic shows the improper working of dut as we have used blocking statement here which causes synthesis simulation mismatch which is sorted out by GLS while providing netlist simulation.
</details>

## Day-5-Design For Testabilty(DFT)

<details>
<summary> Introduction to DFT </summary>
	
**What is Design for Testability, and why we need it?**

Today, semiconductors lie at the heart of ongoing advances across the electronics industry. The introduction of new technologies, has allowed the semiconductor industry to keep pace with increased performance-capacity demands from consumers. This has brightened the prospects for future industry growth.
However, new technologies come with new challenges. Smaller die sizes increase the probability of some errors. Errors in ICs are highly undesirable. 
In simple words, Design for testability is a design technique that makes testing a chip possible and cost-effective by adding additional circuitry to the chip.
Alternatively, Design-for-testability techniques improve the controllability and observability of internal nodes, so that embedded functions can be tested.

Now, Question arrises what is controllability and observability in design.
*Controllability*: Ability to establish aspecific signal value at each node in a circuit from setting values at the circuits inputs.
*Observability*: Ability to determine the signal value at any node in circuit by controlling the circuits input and observing its output.

**Role of DFT**
Testing of Sequential Circuits :
DFT offers a solution to the issue of testing sequential circuits. It’s kind of hard to test sequential circuits. Since there are clocks involved along with the flip-flops.
Unlike combinational circuits, we can’t determine the output of sequential circuits by merely looking into the inputs. Sequential circuits consist of finite states. The output also depends upon the state of the machine. It is difficult to control and observe the internal flip-flops externally.
Hence, the state machines cannot be tested unless they are initialized to a known value. And to initialize them, we need a specific set of features in addition to the typical circuitry. DFT enables us to add this functionality to a sequential circuit and thus allows us to test it.


**Can DFT permanently eliminate faults?**

No, faults can arise even after the chip is in consumer’s hands. A chip may misbehave anytime if it is exposed to a very high temperature or humid environment or due to aging.
You can even generate a fault on your own. A chip can’t ever be made resistant to faults; they are always bound to occur. So, what are we trying to achieve? Testing a device increases our confidence. By testing a chip, vendors try to minimize the possibility of future errors and failures.
To ensure the highest quality of chips, there is also an auxiliary process involved in the chip-design process called Verification.



**Some Terminologies**

Here are a few terminologies which we will often use in this free Design for Testability course. Don’t fret if you can’t completely understand them yet, we will be covering them in-depth in this course.

Testing: An experiment in which the system is put to work and its resulting response is analyzed to ascertain whether it behaved correctly.

Diagnosis: Process for locating the cause of misbehavior in the circuit if it happened.

Defect: Refers to a flaw in the actual hardware or electronic system.

Fault: It is a model or representation of defect for analyzing in a computer program.

Error: It is caused by a defect and happens when a fault in hardware causes line/ gate output to have a wrong value.

Failure: This occurs when a defect causes misbehavior in the circuit or functionality of a system and cannot be reversed or recovered.

Fault Coverage: Percentage of the total number of logical faults that can be tested using a given test set T.

Defect Level: Refers to the fraction of shipped parts that are defective. Or, the proportion of the faulty chip in which fault isn’t detected and has been classified as good.
where Y is the yield, means the fraction of the chips fabricated that are good.
</details>


## Day-6-Introduction to logic synthesis in DC

<details>
<summary> Introduction </summary>

*Synthesis*
-RTL to Gate level translation.

-The design is converted inta gate and connections are made betn the gates.

-INPUT to Synthesis :     1. RTL      2. .lib

*Contents of .lib*
A typical Liberty file contains detailed information about the behaviour of standard cells, including :
    -Timing Information : This includes delay, transition and capacitance values associated with the standard cells. Timing information specifies how the cells behave under different input conditions.
    -Power Information : Liberty file also provides data on power consumption , including static power and dynamic power characteristics. This information is crucial for optimizing the power consumption in IC.
    -Functional Behaviour : Descriptions of the logical functionality of standard cells, such as input and output pins and logical equations and any additional attributesthat define their operation.
    -Operating Conditions : Liberty files may include information about different operating condition in terms of process , voltage and temperature under which all cells are characterized.
    

*Need of Liberty files*:

Timing Analysis : EDA tools use Liberty files to perform static timing analysis, ensuring that the IC design meets specified timing constraints. This is critical for achieving desired performance targets.

Power Optimization : Power consumption is a significant concern in modern IC design. Liberty files provide power data that allows designers to optimize power usage and meet energy efficiency goals.

Design Closure : During the design process, designers use Liberty files to guide the synthesis, placement, and routing of standard cells. The data in these files helps achieve design closure by ensuring that the design meets performance, power, and area targets.

Variability Handling : Variability in manufacturing processes can impact the behavior of standard cells. Liberty files may include data for different process corners to account for manufacturing variations.



*Constraints*
Constraints are the instructions that the designer apply during various step in VLSI chip implementation, such as logic synthesis, clock tree synthesis, Place and Route, and Static Timing Analysis. They define what the tools can or cannot do with the design or how the tool behaves. In VLSI design, constraints are essential parameters and limitations that guide the development process to ensure that the resulting integrated circuits (ICs) meet specific performance, timing, and functionality requirements. These constraints play a crucial role in achieving a successful VLSI design.

</details>

<details>
<summary> DC Complier </summary>

Design Compiler ,  is a high-level synthesis tool developed by Synopsys, a leading provider of EDA solutions. It plays a pivotal role in the process of designing complex integrated circuits (ICs) and is an integral part of modern VLSI design flows.

Important terms used

- Synopsys Design Constraints(SDC) : These are the design constraints which are supplied to DC to enable appropriate optimization suitable for achieving the best implementation.
- .lib : Design Library which contains the Standard cells.
- .db : Same as .lib but in a different format. DC understands libraries in .db format
- .ddc : Synopsys propreitary format for storing the design information. DC can write out and read in DDC.
- Design : RTL files which has the behavioral model of the design.

```
                Read STD Cell/tech.lib
			 ↓
		Read Design (Verilog and Design.lib)
			 ↓
		Read SDC
			 ↓
		Link the Design
			 ↓
		Synthesize
			 ↓
		Generate Report and analyse QoR
			 ↓
		Write out the Netlist
```

The DC compiler does not understand .lib , so the .lib is converted to .db format. lib format is for user reference.

</details>


<details>
<summary> Labs on DC Complier </summary>

 Invoking dc_shell. Then we echo target library and link_library which returns an imaginary pointer library namely your library, which needs to be set.
```
 echo $target_library
 echo $link_library
```
 
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f49dcd5024e5b30f51e644034e3152296993c1da/day5/dc_shell1.png">

The RTL design code is 
```
module lab1_flop_with_en ( input res , input clk , input d , input en , output reg q);
always @ (posedge clk , posedge res)
begin
	if(res)
		q <= 1'b0;
	else if(en)
		q <= d;	
end
endmodule
```
Synthesis of this design code can be done using the following commands
```
read_verilog <path of design file>
read_db <path of .db>
write -f verilog -out <net_filename>
```
Below is the screenshot of the output window after compile This generates the netlist file but it consists of some seqgen library as shown in the figure and not the .db file even though we have read the .db file, This is beacuse we didn't set link and target library,
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b387b6d96107fc8d9f1917bbabf3c21c0007a378/day5/dc_shell2.png">

To set the link_library and target_library we use the following commands:
```
set target_library <path of .db>
set link_library { * path of the .db }
link
compile
write -f verilog -out <net_filename>
```
The generated netlist
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b387b6d96107fc8d9f1917bbabf3c21c0007a378/day5/dc_shell3.png">

*Labs on Design Vision*
To launch Design Vision we need to enable c shell and then give design Vision:
```
csh
design_vision
```
After launching the design_vison first we need to the net to .ddc which is read by Design_vision tool which can be done by using the below command
```
write -f ddc -out <filename_name>
```
Then we can start GUI and then read the .ddc file generated above. This ddc file contains all the information of the tool memory of that particular session. ddc is synopys proprietary format i.e it can be read only br synopsys tools.When the .db is read it automatically reads the linked .db file.
If we have an RTL design that we want to synthesize and we have the Verilog code available, we would typically use read_verilog to start the synthesis process. However, if we have a DDC-formatted design from a previous run or from another tool in the Synopsys toolchain, we would use read_ddc to work with that design in Design Compiler's GUI or command-line environment.
When we click lab1 and then schematic we get the schematic view of the Design show below:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b387b6d96107fc8d9f1917bbabf3c21c0007a378/day5/dc_shell_L2_1.png">

*Lab on DC Setup*
The .synopys_dc.setup file for the above example of mux and d flip flop is as follows :

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b387b6d96107fc8d9f1917bbabf3c21c0007a378/day5/dc_shell_L3_2_target_lib_setting.png">

```
set target_library /home/a.chinchani/DC_WORKSHOP/lib/sky130_fd_sc_hd_tt_025c_1v80.db
set link_library {* $target_library }
```
</details>


<details>
<summary> Labs on TCL </summary>
Tcl (Tool Command Language) is a scripting language used for automating tasks. In EDA, it's used to automate design processes. Here are loops in Tcl:
	
1. While Loop:
while is used for repeating a block of code as long as a condition is true.

Example:

```
set i 0
while {$i < 5} {
    puts "Iteration $i"
    incr i
	}
```

2. For Loop:
for is used for iterating over a range or a list.

Example:
```
for {set i 0} {$i < 5} {incr i} {
    puts "Iteration $i"
}
```

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b387b6d96107fc8d9f1917bbabf3c21c0007a378/day5/tcl_1.png">

*Example*
These codes can be written in tickle file
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b387b6d96107fc8d9f1917bbabf3c21c0007a378/day5/tcl_example_1.png">

Result

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b387b6d96107fc8d9f1917bbabf3c21c0007a378/day5/tcl_example_1_result.png">

</details>


## Day-7-Basic of STA

<details>
<summary> Introduction to STA </summary>

STA breaks down the design into time pathways before doing timing analysis. The following factors make up each time path:

Startpoint: The beginning of a timing route in which data is launched by a clock edge or must be ready at a certain moment. Every startpoint must be a register clock pin or an input port.

Combinational logic network: It includes elements with no internal state or memory. AND, OR, XOR, and inverter elements are allowed in combinational logic, but flip-flops, latches, registers, and RAM are not.

Endpoint: When data is caught by a clock edge or when it needs to be provided at a specified moment, this is the end of a timing path. A register data input pin or an output port must be present at each endpoint.

Static timing analysis calculates a maximum delay using the longest way and a minimum delay using the shortest path.

A Setup time (Max Delay Constraint) refers to a design specification or requirement that imposes an upper limit on the delay a signal can experience while propagating through a specific path or circuit within an integrated circuit. Consider a example of 2 D flip flop connected with a combinational logic in between them.

Tck >= Tcq + Tcomb + Tsu

Hold time (Min Delay constraint) refers to a design specification or requirement that sets a minimum allowable delay for a signal to propagate through a specific path or circuit within an integrated circuit. This constraint is used to ensure that certain signals within the circuit do not propagate too quickly, which can lead to timing violations and potential operational issues.

Thold < Tcq + Tcomb

*Timing Arc*
 A timing arc defines the propagation of signals through logic gates/nets and defines a timing relationship between two related pins. Timing arc is one of the components of a timing path. Static timing analysis works on the concept of timing paths. Each path starts from either primary input or a register and ends at a primary output or a register. In-between, the path traverses through what are known as timing arcs. We can define a timing arc as an indivisible path/constraint from one pin to another that tells EDA tool to consider the path/relationship between the pins. For instance, AND, NAND, NOT, full adder cell etc. gates have arcs from each input pin to each output pin.

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/4c967a1c4855c5b1a5a974bb47f6345591ae6ac3/PD%23Day7/download.png">
 Consider a case of 2:1 Mux this has 3 timing arcs

A -> Z

B -> Z

sel -> Z

this implies that Z ooutput can change from either A,B or sel

Sequential Cells Timing arcs

For D flip flop it is Clock to Q delay timing arc and setup , hold time arcs.

For Latches it is clock to Q delay timing arc , D to Q timing arcs ,setup hold time arcs.

Timing paths in VLSI design are specific routes or signal paths within a digital circuit where the timing characteristics, including signal propagation delays, setup times, hold times, and clock-to-q delays, are analyzed to ensure the circuit's correct and reliable operation. These paths are crucial for timing analysis and play a central role in achieving the desired performance and functionality of the integrated circuit. Timing paths typically include a starting point (often a flip-flop or input pin), a set of logic gates and interconnections, and an ending point (another flip-flop or output pin).

Start points of timing path

Input ports
Clock pins of regs
End point of timing path

Output ports
D pin of D flip flop / D Latch
Always the timing path start at one of the start point and ends at one of the end point

Clock -> D (Reg 2 Reg)

Clock -> Output port (I/O timing path)

input port -> D (I/O timing path)

input port -> Output port (These should not be present)
Consider the circuit
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/d4a75e99e5bcd37ea0a6bf4b47a92e336f231700/PD%23Day7/exa.png">
In this Reg 2 Reg is constrained by clock , Reg to out is constrained by Output external delay and clock period , In 2 Reg is constrained by input external delay and clock period.

In addition to this Input transition delaya are also constrained as signal transition are not ideal , As delay are function of input transition delay and load capacitance they both need to be constrain.
</details>

<details>
<summary> Labs </summary>
Timing File (.lib) consists of ASCII representations of Timing, Area, and Power associated with the Standard cell. The Naming convention in the timing file follows PVT format (Process, Voltage, Temperature). For example, the standard library used in our case was sky130_fd_sc_hd_tt_025C_1v8, this name suggests that we are using 130 nm technology and the process is typical, temperature is 25C, and 1.8 V represents the voltage.
The common part of Lib file contains
- Library name and technology name
- Units (of time, power, voltage, current, resistance and capacitance)
- Value of operating condition ( process, voltage and temperature) – Max, Min and Typical 

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8204f51893df840de7100d1c433293e9edb1e96c/PD%23Day7/opening_lib.png">

Based on operating conditions there are three different lib files for Max, Min and Typical corners. In the second part of Lib file, it contains cell-specific information for each cell. 

Cell-specific information in Lib file is mainly
- Cell name
- Pin name
- Area of cell
- Leakage power in respect of input pins logic state.

Also It contains Pins details like
- Pin name
- Pin direction
- Internal power
- Capacitance
- Raise capacitance
- Fall Capacitance
- Fanout load
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8204f51893df840de7100d1c433293e9edb1e96c/PD%23Day7/opening_lib.png">

A Look-Up Table (LUT) in a Liberty file is a component that defines the logical behavior and timing characteristics of a combinational logic cell within a digital library. Liberty files are used in the electronic design automation (EDA) industry to represent libraries of standard cells that can be used in VLSI (Very Large Scale Integration) design.

index1 represents input transition , index2 represeents output load capacitance

example of and2_1 gate index table
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8204f51893df840de7100d1c433293e9edb1e96c/PD%23Day7/and2_index.png">

*Unateness*
A function is said to be unate if the rise transition on the positive unate input variable causes the ouput to rise or no change and vice versa.

Negative unateness means cell output logic is inverted version of input logic. eg. In inverter having input A and output Y, Y is -ve unate w.r.t A. Positive unate means cell output logic is same as that of input.
These +ve ad -ve unateness are constraints defined in library file and are defined for output pin w.r.t some input pin.

A clock signal is positive unate if a rising edge at the clock source can only cause a rising edge at the register clock pin, and a falling edge at the clock source can only cause a falling edge at the register clock pin.

A clock signal is negative unate if a rising edge at the clock source can only cause a falling edge at the register clock pin, and a falling edge at the clock source can only cause a rising edge at the register clock pin. In other words, the clock signal is inverted.

A clock signal is not unate if the clock sense is ambiguous as a result of non-unate timing arcs in the clock path.

And gate is an example of positive Unateness:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8204f51893df840de7100d1c433293e9edb1e96c/PD%23Day7/and2_1_unnate.png">

Comparing 2 differnt flavour of and gates namely and2_0 and and2_1 , we see that area of and2_1 > and2_0
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f0cf73c96d30c52fd66281f4d82e1003696ea95b/PD%23Day7/Capture.PNG">

Sequential flops have clock pin as true

```
area : 38.787200000;
        cell_footprint : "sky130_fd_sc_hd__sdfbbn";
        cell_leakage_power : 0.0153947700;
        driver_waveform_fall : "ramp";
        driver_waveform_rise : "ramp";
        ff ("IQ","IQ_N") {
            clear : "!RESET_B";
            clear_preset_var1 : "H";
            clear_preset_var2 : "L";
            clocked_on : "!CLK_N";
            next_state : "(D&!SCE) | (SCD&SCE)";
            preset : "!SET_B";
        }
        pg_pin ("VGND") {
            pg_type : "primary_ground";
            related_bias_pin : "VPB";
            voltage_name : "VGND";
        }
        pg_pin ("VNB") {
            pg_type : "nwell";
            physical_connection : "device_layer";
            voltage_name : "VNB";
        }
        pg_pin ("VPB") {
            pg_type : "pwell";
            physical_connection : "device_layer";
            voltage_name : "VPB";
        }
        pg_pin ("VPWR") {
            pg_type : "primary_power";
            related_bias_pin : "VNB";
            voltage_name : "VPWR";
        }
        pin ("CLK_N") {
            capacitance : 0.0017800000;
            ** clock : "true";  ** -------------> Clock is true
            direction : "input";
            fall_capacitance : 0.0016980000;
         
```


Unnateness of D flip flop positive edge triggered
```
                related_pin : "CLK_N";
                rise_transition ("del_1_7_7") {
                    index_1("0.0100000000, 0.0230506000, 0.0531329000, 0.1224740000, 0.2823110000, 0.6507430000, 1.5000000000");
                    index_2("0.0005000000, 0.0013189500, 0.0034792400, 0.0091778800, 0.0242103000, 0.0638642000, 0.1684670000");
                    values("0.0232978000, 0.0295765000, 0.0465064000, 0.0946410000, 0.2265447000, 0.5754117000, 1.5026856000", \
                        "0.0234848000, 0.0296225000, 0.0464747000, 0.0944869000, 0.2264113000, 0.5750624000, 1.5045718000", \
                        "0.0233643000, 0.0295607000, 0.0464747000, 0.0945168000, 0.2263061000, 0.5753233000, 1.5028371000", \
                        "0.0235687000, 0.0297767000, 0.0466145000, 0.0944561000, 0.2259604000, 0.5746931000, 1.5046934000", \
                        "0.0235661000, 0.0295917000, 0.0466156000, 0.0945248000, 0.2261588000, 0.5747037000, 1.5006447000", \
                        "0.0236305000, 0.0297841000, 0.0466114000, 0.0943436000, 0.2264104000, 0.5749078000, 1.5007792000", \
                        "0.0234834000, 0.0296178000, 0.0466203000, 0.0946091000, 0.2266867000, 0.5748321000, 1.5022009000");
                }
                timing_sense : "non_unate";
                timing_type : "falling_edge";
            }
```


Unateness of D latch positive edge triggered
```
                related_pin : "GATE_N";
                rise_transition ("del_1_7_7") {
                    index_1("0.0100000000, 0.0230506000, 0.0531329000, 0.1224740000, 0.2823110000, 0.6507430000, 1.5000000000");
                    index_2("0.0005000000, 0.0013104500, 0.0034345500, 0.0090016200, 0.0235923000, 0.0618331000, 0.1620580000");
                    values("0.0290359000, 0.0360989000, 0.0537774000, 0.1023029000, 0.2327008000, 0.5800371000, 1.4992581000", \
                        "0.0290669000, 0.0360541000, 0.0537217000, 0.1023566000, 0.2325888000, 0.5812102000, 1.5037938000", \
                        "0.0289580000, 0.0359722000, 0.0537431000, 0.1023093000, 0.2327867000, 0.5797032000, 1.5054989000", \
                        "0.0289144000, 0.0360224000, 0.0538419000, 0.1022993000, 0.2324767000, 0.5806629000, 1.5049062000", \
                        "0.0289832000, 0.0360823000, 0.0537268000, 0.1023169000, 0.2327650000, 0.5794586000, 1.5054222000", \
                        "0.0290149000, 0.0360945000, 0.0537585000, 0.1023309000, 0.2324873000, 0.5810031000, 1.4970503000", \
                        "0.0289586000, 0.0360057000, 0.0538139000, 0.1022934000, 0.2326491000, 0.5787922000, 1.5045210000");
                }
                timing_sense : "non_unate";
                timing_type : "falling_edge";
            }
```



**lab on .lib in dc_compiler**

Ex 1 : To print all the sequential gates
```
dc_shell> echo $target_library 
DC_WORKSHOP/lib/sky130_fd_sc_hd__tt_025C_1v80.db
dc_shell> get_lib_cells */* -filter "is_sequential == true"
{sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfbbn_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfbbn_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfbbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfrbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfrbp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfrtn_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfrtp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfrtp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfrtp_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfsbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfsbp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfstp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfstp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfstp_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfxbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfxbp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfxtp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfxtp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dfxtp_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlclkp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlclkp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlclkp_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrbn_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrbn_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrbp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrtn_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrtn_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrtn_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrtp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrtp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlrtp_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlxbn_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlxbn_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlxbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlxtn_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlxtn_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlxtn_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlxtp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__edfxbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__edfxtp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_inputisolatch_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfbbn_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfbbn_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfbbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfrbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfrbp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfrtn_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfrtp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfrtp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfrtp_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfsbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfsbp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfstp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfstp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfstp_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfxbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfxbp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfxtp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfxtp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdfxtp_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdlclkp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdlclkp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdlclkp_4 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sedfxbp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sedfxbp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sedfxtp_1 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sedfxtp_2 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sedfxtp_4}
```

Ex 2 : To Prints the library linked
```
dc_shell> list_lib
Logical Libraries:
-------------------------------------------------------------------------
Library		File			Path
-------		----			----
  sky130_fd_sc_hd__tt_025C_1v80 sky130_fd_sc_hd__tt_025C_1v80.db /home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/lib
1
```

Ex 3 : the list of cells from the collection
```
dc_shell> foreach_in_collection my_lib_cell [get_lib_cells */*and*] {                                                                                                                                                                      set my_lib_cell_name [get_object_name $my_lib_cell];                                                                                                                                                               echo $my_lib_cell_name;                                                                                                                                                                                            }
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and2_0
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and2_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and2_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and2_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and2b_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and2b_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and2b_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and3_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and3_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and3_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and3b_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and3b_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and3b_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and4_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and4_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and4_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and4b_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and4b_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and4b_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and4bb_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and4bb_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__and4bb_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand2_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand2_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand2_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand2_8
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand2b_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand2b_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand2b_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_4
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_1
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_2
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_4
```


Ex 4: Prints the functionality of a particular cell
```
dc_shell> foreach_in_collection my_pins [get_lib_pins sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/*] {
set my_pin_name [get_object_name $my_pins];
set pin_dir [get_lib_attribute $my_pin_name direction];
echo $my_pin_name $pin_dir;
}
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/A'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/A 1
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/B'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/B 1
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/C'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/C 1
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/D'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/D 1
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/Y 2
dc_shell> get_lib_attribute sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/Y function
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/Y'. 
(!A) | (!B) | (!C) | (!D)
```
Ex 5: To find the output pin name and its functionality for multiple cells

First make vim file by name my_script.tcl , then inside gvim file write :
```
set my_list [list sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_1 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_2 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_4 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_1 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_2 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_4 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_1 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_4 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_1 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_2 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_4 \
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_1 ]



#For each cell in  the list, find the output pin name and its functionality


foreach my_cell $my_list {
foreach_in_collection my_lib_pin [get_lib_pins ${my_cell}/*] {
set my_lib_pin_name [get_object_name $my_lib_pin];
set a [get_lib_attribute $my_lib_pin_name direction];
if {$a > 1} {
set fn [get_lib_attribute $my_lib_pin_name function];
echo $my_lib_pin_name $a $fn;
}
}

}
```
Then Source the file 

dc_shell> source my_script.tcl

```
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_1/A'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_1/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_1/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_1/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_1/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_1/Y 2 (!A) | (!B) | (!C)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_2/A'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_2/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_2/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_2/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_2/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_2/Y 2 (!A) | (!B) | (!C)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_4/A'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_4/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_4/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_4/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_4/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3_4/Y 2 (!A) | (!B) | (!C)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_1/A_N'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_1/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_1/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_1/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_1/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_1/Y 2 (A_N) | (!B) | (!C)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_2/A_N'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_2/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_2/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_2/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_2/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_2/Y 2 (A_N) | (!B) | (!C)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_4/A_N'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_4/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_4/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_4/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_4/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand3b_4/Y 2 (A_N) | (!B) | (!C)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_1/A'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_1/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_1/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_1/D'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_1/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_1/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_1/Y 2 (!A) | (!B) | (!C) | (!D)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/A'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/D'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_2/Y 2 (!A) | (!B) | (!C) | (!D)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_4/A'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_4/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_4/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_4/D'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_4/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_4/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4_4/Y 2 (!A) | (!B) | (!C) | (!D)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_1/A_N'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_1/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_1/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_1/D'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_1/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_1/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_1/Y 2 (A_N) | (!B) | (!C) | (!D)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_2/A_N'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_2/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_2/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_2/D'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_2/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_2/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_2/Y 2 (A_N) | (!B) | (!C) | (!D)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_4/A_N'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_4/B'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_4/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_4/D'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_4/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_4/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4b_4/Y 2 (A_N) | (!B) | (!C) | (!D)
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_1/A_N'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_1/B_N'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_1/C'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_1/D'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_1/Y'. 
Performing get_lib_attribute on library object 'sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_1/Y'. 
sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand4bb_1/Y 2 (A_N) | (B_N) | (!C) | (!D)
```
Everywhere its showing its pin name and functionality.
Similarly , We can do for other attributes like area, capacitance, clock etc.
 To find the attributs :

dc_shell> list_attributes -app > a

dc_shell> sh gvim a &
</details>




## Day-8-Advanced Constraints

<details>
<summary> Clock Terminology </summary>


We know that when the when the clock is constrained , Actually clock period gets constrained , which in turn limits the combinational delay i.e

Tclk >= Tcq + Tcomb + Tst

Tcomb <= Tclk - (Tcq + Tst)



Clock Generator are a critical component of VLSI (Very Large Scale Integration) circuits, playing a fundamental role in synchronizing various components of an integrated circuit (IC). They provide clock signals that control the timing of digital operations within the IC. Clock generators are designed to produce clock signals with specific characteristics, such as frequency, duty cycle, and phase, to meet the requirements of the overall system.

*Types of clock generators*

    - Oscillators: These are widely used as clock generators. They generate continuous periodic signals without an external input. Common types include RC oscillators, LC oscillators, and crystal oscillators.

    - Phase-Locked Loops (PLLs): PLLs are versatile clock generators that can generate clock signals with adjustable frequency and phase. They are often used for clock synchronization and multiplication.

    - Delay-Locked Loops (DLLs): DLLs are used to align the phase of a clock signal with respect to another reference clock signal.

    - Ring Oscillators: These are simple but effective oscillators often used for generating clock signals with relatively low frequencies.

    - Crystal Oscillators: They are highly stable and accurate oscillators that use piezoelectric crystals to generate clock signals.


Consider the above circuit in this the clock arrives at flop B at 100 ps and at flop A at 100 ps. From this it clear that clock doesnot arrive at same time for all flops. This difference in arrival of clock is called skew.

    - Deterministic Clock Skew: Deterministic clock skew is predictable and results from known factors such as wire delays, signal routing, and clock distribution. It is typically caused by the physical characteristics of the circuit and can be analyzed and compensated for during the design phase. Techniques like clock tree synthesis and buffer insertion are used to mitigate deterministic skew.

    - Random Clock Skew: Random clock skew, also known as process-induced skew, is caused by manufacturing process variations that affect the timing of signals. These variations can lead to slightly different propagation delays for clock signals across different parts of a chip. Random skew is not easily predictable and can vary from chip to chip, even within the same manufacturing batch. To address random skew, designers often use techniques like over-design and guard-banding to ensure that the circuit operates reliably under worst-case conditions.

    - Global Clock Skew: Global clock skew refers to the difference in arrival times of a clock signal at various points across the entire chip. It affects all elements of the chip and can lead to synchronization issues between different clock domains. Managing global clock skew is a critical aspect of clock distribution in large and complex integrated circuits. Global skew can be reduced by careful clock tree synthesis and by minimizing the length of critical paths in the design.

    - Local Clock Skew: Local clock skew is specific to a particular region or block within the chip. It can result from variations in the lengths of wires or traces that carry the clock signal to different parts of a block. Local skew is often easier to manage than global skew because it affects a smaller portion of the chip. Techniques like buffer insertion and clock gating can be used to mitigate local clock skew.

Positive and Negative Skew: Clock skew can be further categorized into positive skew and negative skew based on whether clock signals arrive later or earlier than the ideal clock edge, respectively.

        - Positive Skew: Positive skew occurs when clock signals arrive at different destinations later than the ideal clock edge. It can lead to setup time violations.
        - Negative Skew: Negative skew occurs when clock signals arrive earlier than the ideal clock edge at different destinations. Negative skew can result in hold time violations.

Clock Jitter is a timing variation or uncertainty in the period or phase of a clock signal. It represents the deviation of the actual clock signal edges from their ideal, regularly spaced positions. Clock jitter can occur due to various factors and can have significant implications for the performance and reliability of digital systems.

Clock latency refers to the time delay or propagation delay that a clock signal experiences as it travels from its source to various points within an integrated circuit (IC) or digital system. It represents the time it takes for the clock signal to propagate through various components, interconnects, and buffers before reaching its destination.

Source latency: The source latency of a clock, also known as clock source latency, refers to the delay or latency introduced by the clock generation circuitry at its source before the clock signal is distributed to other parts of the integrated circuit (IC) or digital system.

Network latency : Network latency in the context of a clock typically refers to the delay or time delay introduced when transmitting a clock signal across a network or communication medium.

Clock Modelling

We should model the clock for:

    Period
    Source latency
    Clock skew
    Clock Network
    Clock Network latency
</details>


<details>
<summary> Labs on Advanced Constrains </summary>

**1. Checking the target and link Library**
```
dc_shell> echo $target_library 
DC_WORKSHOP/lib/sky130_fd_sc_hd__tt_025C_1v80.db

dc_shell> echo $link_library 
*$target_library
```
**2. Reading and linking verilog file**
```
dc_shell> read_verilog verilog_files/lab8_circuit.v
Loading db file '/home/synopsys/DC/syn_vT-2022.03-SP5-1/libraries/syn/gtech.db'
Loading db file '/home/synopsys/DC/syn_vT-2022.03-SP5-1/libraries/syn/standard.sldb'
  Loading link library 'gtech'
Loading verilog file '/home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/lab8_circuit.v'
Detecting input file type automatically (-rtl or -netlist).
Reading with Presto HDL Compiler (equivalent to -rtl option).
Running PRESTO HDLC
Warning: Can't read link_library file '*$target_library'. (UID-3)
Compiling source file /home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/lab8_circuit.v

Inferred memory devices in process
	in routine lab8_circuit line 4 in file
		'/home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/lab8_circuit.v'.
===============================================================================
|    Register Name    |   Type    | Width | Bus | MB | AR | AS | SR | SS | ST |
===============================================================================
|      REGA_reg       | Flip-flop |   1   |  N  | N  | Y  | N  | N  | N  | N  |
|      REGC_reg       | Flip-flop |   1   |  N  | N  | Y  | N  | N  | N  | N  |
|      REGB_reg       | Flip-flop |   1   |  N  | N  | Y  | N  | N  | N  | N  |
===============================================================================
Presto compilation completed successfully.
Current design is now '/home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/lab8_circuit.db:lab8_circuit'
Loaded 1 design.
Current design is 'lab8_circuit'.
lab8_circuit


dc_shell> link

  Linking design 'lab8_circuit'
  Using the following designs and libraries:
  --------------------------------------------------------------------------
  lab8_circuit                /home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/lab8_circuit.db
  sky130_fd_sc_hd__tt_025C_1v80 (library) /home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/lib/sky130_fd_sc_hd__tt_025C_1v80.db

1


dc_shell> compile_ultra 
Loading db file '/home/synopsys/DC/syn_vT-2022.03-SP5-1/libraries/syn/dw_foundation.sldb'
Warning: DesignWare synthetic library dw_foundation.sldb is added to the synthetic_library in the current command. (UISN-40)
Information: Performing power optimization. (PWR-850)
Analyzing: "/home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/lib/sky130_fd_sc_hd__tt_025C_1v80.db"
Library analysis succeeded.
Information: Evaluating DesignWare library utilization. (UISN-27)

============================================================================
| DesignWare Building Block Library  |         Version         | Available |
============================================================================
| Basic DW Building Blocks           | T-2022.03-DWBB_202203.4 |     *     |
| Licensed DW Building Blocks        | T-2022.03-DWBB_202203.4 |     *     |
============================================================================

====================================================================================================
| Flow Information                                                                                 |
----------------------------------------------------------------------------------------------------
| Flow         | Design Compiler WLM                                                               |
| Comand Line  | compile_ultra                                                                     |
====================================================================================================
| Design Information                                      | Value                                  |
====================================================================================================
| Number of Scenarios                                     | 0                                      |
| Leaf Cell Count                                         | 8                                      |
| Number of User Hierarchies                              | 0                                      |
| Sequential Cell Count                                   | 3                                      |
| Macro Count                                             | 0                                      |
| Number of Power Domains                                 | 0                                      |
| Number of Path Groups                                   | 1                                      |
| Number of VT Class                                      | 0                                      |
| Number of Clocks                                        | 0                                      |
| Number of Dont Touch Cells                              | 0                                      |
| Number of Dont Touch Nets                               | 0                                      |
| Number of Size Only Cells                               | 0                                      |
| Design with UPF Data                                    | false                                  |
====================================================================================================
```

**3. Listing ports in design**

```
dc_shell> get_ports 
{rst clk IN_A IN_B OUT_Y out_clk}
# returns all the ports present in the design


dc_shell> foreach_in_collection my_port [get_ports *] {
set my_port_name [get_object_name $my_port];
echo $my_port_name;
}
rst
clk
IN_A
IN_Blmstat -c 27020@srilc01 -f Design-Compiler

OUT_Y
out_clk

#Listing port with direction

dc_shell> foreach_in_collection my_port [get_ports *] {                                                                                                                                                                                                                    set my_port_name [get_object_name $my_port];
                 set dir [get_attribute [get_ports $my_port_name] direction];
                 echo $my_port_name $dir;
                 }                                                                                                                                                                                               
rst in
clk in
IN_A in
IN_B in
OUT_Y out
out_clk out
```
**4. Listing Cells in design**

```
dc_shell> get_cells *
 {REGA_reg REGB_reg REGC_reg U9 U10 U11 U12 U13 U14}

By default system gives hierarchical cells:
dc_shell> get_cells * -hier -filter "is_hierarchical == false"
{REGA_reg REGB_reg REGC_reg U9 U10 U11 U12 U13 U14}


For listing Reference cells :

dc_shell> foreach_in_collection my_cell [get_cells * -hier] {
 set my_cell_name [get_object_name $my_cell];
 set rname [get_attribute [get_cells $my_cell_name] ref_name];
echo $my_cell_name $rname;
}

REGA_reg sky130_fd_sc_hd__dfrtp_1
REGB_reg sky130_fd_sc_hd__dfrtp_1
REGC_reg sky130_fd_sc_hd__dfrtp_1
U9 sky130_fd_sc_hd__clkinv_1
U10 sky130_fd_sc_hd__clkinv_1
U11 sky130_fd_sc_hd__nor2_1
U12 sky130_fd_sc_hd__a21oi_1
U13 sky130_fd_sc_hd__clkinv_1
U14 sky130_fd_sc_hd__nand2_1

```
Now we convert our design into ddc

dc_shell> write -f ddc -out verilog_files/lab8_circuit.ddc

Then open design_vision gui in another tab read ddc file of lab8.
The schematic of lab8_circuit.ddc as gvien below:

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/cf5b0991e603accfcdcd5af37e353c6526456714/PD%23day8/lab8_schematic.png">

```
design_vision> foreach_in_collection my_pin [all_connected n5] {
set pin_name [get_object_name $my_pin];
set dir [get_attribute [get_pins $pin_name] direction];
echo $pin_name $dir;
}
U11/Y out
U13/A in
U12/B1 in
```
**4. Getting Pin of Design**

```
dc_shell> get_pin *
{REGA_reg/D REGA_reg/CLK REGA_reg/RESET_B REGA_reg/Q REGB_reg/D REGB_reg/CLK REGB_reg/RESET_B REGB_reg/Q REGC_reg/D REGC_reg/CLK REGC_reg/RESET_B REGC_reg/Q U9/A U9/Y U10/A U10/Y U11/A U11/B U11/Y U12/A1 U12/A2 U12/B1 U12/Y U13/A U13/Y U14/A U14/B U14/Y}

Listing it vertically:
dc_shell> foreach_in_collection my_pin [get_pins *] {
set pin_name [get_object_name $my_pin];
echo $pin_name;
}
REGA_reg/D
REGA_reg/CLK
REGA_reg/RESET_B
REGA_reg/Q
REGB_reg/D
REGB_reg/CLK
REGB_reg/RESET_B
REGB_reg/Q
REGC_reg/D
REGC_reg/CLK
REGC_reg/RESET_B
REGC_reg/Q
U9/A
U9/Y
U10/A
U10/Y
U11/A
U11/B
U11/Y
U12/A1
U12/A2
U12/B1
U12/Y
U13/A
U13/Y
U14/A
U14/B
U14/Y
```
If pin is input pin  the list it:

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/860ccf555961c8b9e9918c7606f4e155da4ba6b3/PD%23day8/querry_tcl.png">

After Sourcing tcl file we get this result:
```
dc_shell> source  querry.tcl 
REGA_reg/CLK
REGB_reg/CLK
REGC_reg/CLK
```
**5. Creating Clock**

```
dc_shell> create_clock -name MYCLK -per 10 [get_ports clk]
1
dc_shell> get_clocks *
{MYCLK}

## Reporting Clock
dc_shell> report_clock *
Information: Updating graph... (UID-83)
 
****************************************
Report : clocks
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 15:12:44 2023
****************************************

Attributes:
    d - dont_touch_network
    f - fix_hold
    p - propagated_clock
    G - generated_clock
    g - lib_generated_clock

Clock          Period   Waveform            Attrs     Sources
--------------------------------------------------------------------------------
MYCLK           10.00   {0 5}                         {clk}
--------------------------------------------------------------------------------
1

dc_shell> get_attribute [get_ports out_Optimizationsclk] clocks --------> It tells what are clocks reaching the pin.
{MYCLK}                       
dc_shell> get_attribute [get_ports out_clk] clock ---------> It tells is the pin meant to be a clock pin or not.
Warning: Attribute 'clock' does not exist on port 'out_clk'. (UID-101)
```
Creating different types of clock :
```
dc_shell> create_clock -name MYCLK -per 10 [get_ports clk] -wave {5 10} -----> Clock with rising edge at 5 and falling edge at 10. 50% duty cucle.
dc_shell> create_clock -name MYCLK -per 10 [get_ports clk] -wave {0 2.5} -----> Clock with rising edge at 0 and falling edge at 2.5. 25% duty cycle.
dc_shell> create_clock -name MYCLK -per 10 [get_ports clk] -wave {15 20} ----> rising edge at 15, before 15ns no clock.
```
To remove clock :

dc_shell> remove_clock <clock_name>


**6. Report_timing**

In report timing it says (Path is unconstrained) because clock is not present.
So, we create a clock first...
```
dc_shell> create_clock -name MYCLK -per 10 [get_ports clk]
1


dc_shell> report_timing -to REGC_reg/D
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 15:54:55 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: REGB_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Endpoint: REGC_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             0.00       0.00
  REGB_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00       0.00 r
  REGB_reg/Q (sky130_fd_sc_hd__dfrtp_1)                   0.29       0.29 r
  U14/Y (sky130_fd_sc_hd__nand2_1)                        0.04       0.34 f
  REGC_reg/D (sky130_fd_sc_hd__dfrtp_1)                   0.00       0.34 f
  data arrival time                                                  0.34

  clock MYCLK (rise edge)                                10.00      10.00
  clock network delay (ideal)                             0.00      10.00
  REGC_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00      10.00 r
  library setup time                                     -0.12       9.88
  data required time                                                 9.88
  --------------------------------------------------------------------------
  data required time                                                 9.88
  data arrival time                                                 -0.34
  --------------------------------------------------------------------------
  slack (MET)                                                        9.55
```
This report timing will show the arival time and required time with slack. It will not show uncertanity , input and output external delay, latency because we have not modeled it yet.

```
dc_shell> set_clock_latency -source 2 [get_clocks MYCLK]
1
dc_shell> set_clock_latency 1 [get_clocks MYCLK]
1
dc_shell> set_clock_uncertainty -setup 0.5 [get_clocks MYCLK]
1
dc_shell> set_clock_uncertainty -hold 0.5 [get_clocks MYCLK]
1
```

FOR  SETUP :
```
dc_shell> report_timing -to REGC_reg/D 
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 16:02:40 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: REGB_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Endpoint: REGC_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00            ------------> changed from 0 to 3 clock network latency =source latency + nwetwork latency = 2 + 1=3
  REGB_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00       3.00 r
  REGB_reg/Q (sky130_fd_sc_hd__dfrtp_1)                   0.29       3.29 r
  U14/Y (sky130_fd_sc_hd__nand2_1)                        0.04       3.34 f
  REGC_reg/D (sky130_fd_sc_hd__dfrtp_1)                   0.00       3.34 f
  data arrival time                                                  3.34

  clock MYCLK (rise edge)                                10.00      10.00
  clock network delay (ideal)                             3.00      13.00            -----------> changed from 0 to 3 clock network latency =source latency + nwetwork latency = 2 + 1=3
  clock uncertainty                                      -0.50      12.50            -----------> Uncertanity is subtracted
  REGC_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00      12.50 r
  library setup time                                     -0.12      12.38
  data required time                                                12.38
  --------------------------------------------------------------------------
  data required time                                                12.38
  data arrival time                                                 -3.34
  --------------------------------------------------------------------------
  slack (MET)                                                        9.05        --------------------> slack went down from 9.55 to 9.05
```


FOR HOLD 

```
dc_shell> report_timing -to REGC_reg/D -delay_type min
 
****************************************
Report : timing
        -path full
        -delay min
        -max_paths 1
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 16:09:25 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: REGA_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Endpoint: REGC_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: min

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00
  REGA_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00       3.00 r
  REGA_reg/Q (sky130_fd_sc_hd__dfrtp_1)                   0.29       3.29 r
  U14/Y (sky130_fd_sc_hd__nand2_1)                        0.04       3.33 f
  REGC_reg/D (sky130_fd_sc_hd__dfrtp_1)                   0.00       3.33 f
  data arrival time                                                  3.33

  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00
  clock uncertainty                                       0.50       3.50     ---------> Uncertainity is added
  REGC_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00       3.50 r
  library hold time                                      -0.05       3.45
  data required time                                                 3.45
  --------------------------------------------------------------------------
  data required time                                                 3.45
  data arrival time                                                 -3.33
  --------------------------------------------------------------------------
  slack (VIOLATED)                                                  -0.12
```
**8. Modeling IO delays**


When we do *report_timing -from IN_A* we get path is unconstrained. We set IO Constrains :
```
dc_shell> set_input_delay -max 5 -clock [get_clocks MYCLK] [get_ports IN_A]
1
dc_shell> set_input_delay -max 5 -clock [get_clocks MYCLK] [get_ports IN_B]
1
dc_shell> set_input_delay -min 1 -clock [get_clocks MYCLK] [get_ports IN_B]
1
dc_shell> set_input_delay -min 1 -clock [get_clocks MYCLK] [get_ports IN_A]
1
dc_shell> set_input_transition -max 0.3 [get_ports IN_A]
1
dc_shell> set_input_transition -max 0.3 [get_ports IN_B]
1
dc_shell> set_input_transition -min 0.1 [get_ports IN_B]
1
dc_shell> set_input_transition -min 0.1 [get_ports IN_A]
1
```

We get report_timing as :

FOR SETUP :

```
dc_shell> report_timing -from IN_A -trans -net -cap -nosplit 
 
****************************************
Report : timing
        -path full
        -delay max
        -nets
        -max_paths 1
        -transition_time
        -capacitance
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 16:20:38 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: IN_A (input port clocked by MYCLK)
  Endpoint: REGA_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                       Fanout       Cap     Trans      Incr       Path
  ----------------------------------------------------------------------------------------------
  clock MYCLK (rise edge)                                                     0.00       0.00
  clock network delay (ideal)                                                 3.00       3.00
  input external delay                                                        5.00       8.00 f
  IN_A (in)                                                         0.30      0.00       8.00 f
  IN_A (net)                                    2         0.00                0.00       8.00 f
  U11/Y (sky130_fd_sc_hd__nor2_1)                                   0.16      0.22       8.22 r
  n5 (net)                                      2         0.01                0.00       8.22 r
  U13/Y (sky130_fd_sc_hd__clkinv_1)                                 0.05      0.07       8.29 f
  N0 (net)                                      1         0.00                0.00       8.29 f
  REGA_reg/D (sky130_fd_sc_hd__dfrtp_1)                             0.05      0.00       8.29 f
  data arrival time                                                                      8.29

  clock MYCLK (rise edge)                                                    10.00      10.00
  clock network delay (ideal)                                                 3.00      13.00
  clock uncertainty                                                          -0.50      12.50
  REGA_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                                     0.00      12.50 r
  library setup time                                                         -0.13      12.37
  data required time                                                                    12.37
  ----------------------------------------------------------------------------------------------
  data required time                                                                    12.37
  data arrival time                                                                     -8.29
  ----------------------------------------------------------------------------------------------
                                                                                         4.08   ----------------> Setup slack is reduced due input trans.

```

FOR HOLD : 
```
dc_shell> report_timing -from IN_A -trans -net -cap -nosplit -delay_type min
 
****************************************
Report : timing
        -path full
        -delay min
        -nets
        -max_paths 1
        -transition_time
        -capacitance
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 16:25:15 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: IN_A (input port clocked by MYCLK)
  Endpoint: REGB_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: min

  Point                                       Fanout       Cap     Trans      Incr       Path
  ----------------------------------------------------------------------------------------------
  clock MYCLK (rise edge)                                                     0.00       0.00
  clock network delay (ideal)                                                 3.00       3.00
  input external delay                                                        1.00       4.00 r
  IN_A (in)                                                         0.10      0.00       4.00 r
  IN_A (net)                                    2         0.00                0.00       4.00 r
  U12/Y (sky130_fd_sc_hd__a21oi_1)                                  0.04      0.07       4.07 f
  N1 (net)                                      1         0.00                0.00       4.07 f
  REGB_reg/D (sky130_fd_sc_hd__dfrtp_1)                             0.04      0.00       4.07 f
  data arrival time                                                                      4.07

  clock MYCLK (rise edge)                                                     0.00       0.00
  clock network delay (ideal)                                                 3.00       3.00
  clock uncertainty                                                           0.50       3.50
  REGB_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                                     0.00       3.50 r
  library hold time                                                          -0.05       3.45
  data required time                                                                     3.45
  ----------------------------------------------------------------------------------------------
  data required time                                                                     3.45
  data arrival time                                                                     -4.07
  ----------------------------------------------------------------------------------------------
  slack (MET)                                                                            0.62

```
Setting Output Delay 

```
dc_shell> set_output_delay -max 5 -clock [get_clock MYCLK] [get_ports OUT_Y]
1
dc_shell> set_output_delay -min 1 -clock [get_clock MYCLK] [get_ports OUT_Y]
1
```
Report timing :

```
dc_shell> report_timing -to OUT_Y -cap -trans -nosplit
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
        -transition_time
        -capacitance
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 16:30:24 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: REGC_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Endpoint: OUT_Y (output port clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                          Cap     Trans      Incr       Path
  ------------------------------------------------------------------------------------
  clock MYCLK (rise edge)                                           0.00       0.00
  clock network delay (ideal)                                       3.00       3.00
  REGC_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00      0.00       3.00 r
  REGC_reg/Q (sky130_fd_sc_hd__dfrtp_1)         0.00      0.04      0.34       3.34 f
  U10/Y (sky130_fd_sc_hd__clkinv_1)             0.00      0.01      0.03       3.36 r
  OUT_Y (out)                                             0.01      0.00       3.36 r
  data arrival time                                                            3.36

  clock MYCLK (rise edge)                                          10.00      10.00
  clock network delay (ideal)                                       3.00      13.00
  clock uncertainty                                                -0.50      12.50
  output external delay                                            -5.00       7.50
  data required time                                                           7.50
  ------------------------------------------------------------------------------------
  data required time                                                           7.50
  data arrival time                                                           -3.36
  ------------------------------------------------------------------------------------
  slack (MET)                                                                  4.14
```

After setting load
```
dc_shell> set_load -max 0.4 [get_ports OUT_Y]
1
dc_shell> set_load -min 0.1 [get_ports OUT_Y]
1
```

Report Timing

```
dc_shell> report_timing -to OUT_Y -cap -trans -nosplit
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
        -transition_time
        -capacitance
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 16:33:26 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: REGC_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Endpoint: OUT_Y (output port clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                          Cap     Trans      Incr       Path
  ------------------------------------------------------------------------------------
  clock MYCLK (rise edge)                                           0.00       0.00
  clock network delay (ideal)                                       3.00       3.00
  REGC_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00      0.00       3.00 r
  REGC_reg/Q (sky130_fd_sc_hd__dfrtp_1)         0.00      0.05      0.30       3.30 r
  U10/Y (sky130_fd_sc_hd__clkinv_1)             0.40      3.07      2.32       5.62 f
  OUT_Y (out)                                             3.07      0.00       5.62 f
  data arrival time                                                            5.62

  clock MYCLK (rise edge)                                          10.00      10.00
  clock network delay (ideal)                                       3.00      13.00
  clock uncertainty                                                -0.50      12.50
  output external delay                                            -5.00       7.50
  data required time                                                           7.50
  ------------------------------------------------------------------------------------
  data required time                                                           7.50
  data arrival time                                                           -5.62
  ------------------------------------------------------------------------------------
  slack (MET)                                                                  1.88

```

Due to increase in load from 0 to 0.4 the transition time icreased, due to which we have more delay. Slack is also reduced. 


**9. Creating Generated Clock**
```
dc_shell> create_generated_clock -name MYGEN_CLK -master MYCLK -source [get_ports clk] -div 1 [get_ports out_clk]
1

dc_shell> report_clocks *
 
****************************************
Report : clocks
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 16:47:01 2023
****************************************

Attributes:
    d - dont_touch_network
    f - fix_hold
    p - propagated_clock
    G - generated_clock
    g - lib_generated_clock

Clock          Period   Waveform            Attrs     Sources
--------------------------------------------------------------------------------
MYCLK           10.00   {0 5}                         {clk}
MYGEN_CLK       10.00   {0 5}               G         {out_clk}
--------------------------------------------------------------------------------

Generated     Master         Generated      Master         Waveform
Clock         Source         Source         Clock          Modification
--------------------------------------------------------------------------------
MYGEN_CLK     clk            {out_clk}      MYCLK          divide_by(1)
--------------------------------------------------------------------------------
```
As you can see my generated clock is created.

Now , if we do report_timing -to OUT_Y , it will show timing wrt MYCLK. But, we want report MYGEN_CLK.
```
dc_shell> set_clock_latency -max 5 [get_clocks MYGEN_CLK]
1
dc_shell> set_clock_latency -max 1 [get_clocks MYGEN_CLK]
1
dc_shell> set_output_delay -max 5 [get_ports OUT_Y] -clock [get_clocks MYGEN_CLK]
1
dc_shell> set_output_delay -min 1 [get_ports OUT_Y] -clock [get_clocks MYGEN_CLK]
1
```
Report Timing :
```
dc_shell> report_timing -to OUT_Y
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 12 17:03:59 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: REGC_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Endpoint: OUT_Y (output port clocked by MYGEN_CLK)
  Path Group: MYGEN_CLK                        -----------------------> Generated Clock is used
  Path Type: max

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00
  REGC_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00       3.00 r
  REGC_reg/Q (sky130_fd_sc_hd__dfrtp_1)                   0.30       3.30 r
  U10/Y (sky130_fd_sc_hd__clkinv_1)                       2.32       5.62 f
  OUT_Y (out)                                             0.00       5.62 f
  data arrival time                                                  5.62

  clock MYGEN_CLK (rise edge)                            10.00      10.00
  clock network delay (ideal)                             1.00      11.00
  output external delay                                  -5.00       6.00
  data required time                                                 6.00
  --------------------------------------------------------------------------
  data required time                                                 6.00
  data arrival time                                                 -5.62
  --------------------------------------------------------------------------
  slack (MET)                                                        0.38


```



Example: lab8_circuit_modified

```ruby
module lab8 circuit (input rst, input clk , input IN_A , input IN_B , output OUT_Y , output out_clk output reg out_div_clk)
reg REGA, REGB , REGC ;
always @ (posedge clk , posedge rst )
begin
	if(rst)
	begin
		REGA <= 1'b0 ;
		REGB <= 1'b0 ;
		REGC <= 1'b0 ;
		out_div_clk <= 1'b0 ;
	end
	else
	begin
		REGA= IN_A | IN_B;
		REGB<- IN_A ^ IN_B;
		REGC <= !(REGA & REGB) ;
		out_div_clk <= ~out_div_clk
	end
end

assign OUT_Y = ~REGC ;

assign out_clk = clk;

endmodule
```

Loading the new design and Instead of writting constraints everytime we can create a .tcl program and then source it:

```
create_clock -name MYCLK -per 10 [get_ports clk];
set_clock_latency -source 2 [get_clocks MYCLK];
set_clock_latency 1 [get_clocks MYCLK];
set_clock_uncertainty -setup 0.5 [get_clocks MYCLK];
set_clock_uncertainty -hold 0.1 [get_clocks MYCLK];
set_input_delay -max 4 -clock [get_clocks MYCLK] [get_ports IN_A];
set_input_delay -max 4 -clock [get_clocks MYCLK] [get_ports IN_B];
set_input_delay -min 1 -clock [get_clocks MYCLK] [get_ports IN_A];
set_input_delay -min 1 -clock [get_clocks MYCLK] [get_ports IN_B];
set_input_transition -max 0.4 [get_ports IN_A];
set_input_transition -max 0.4 [get_ports IN_B];
set_input_transition -min 0.1 [get_ports IN_A];
set_input_transition -min 0.1 [get_ports IN_B];
create_generated_clock -name MYGEN_CLK -master MYCLK -source [get_ports clk] -div 1 [get_ports out_clk];
create_generated_clock -name MYGEN_DIV_CLK -master MYCLK -source [get_ports clk] -div 2 [get_ports out_div_clk]; 
set_output_delay -max 4 -clock [get_clocks MYGEN_CLK] [get_ports OUT_Y];
set_output_delay -min 1 -clock [get_clocks MYGEN_CLK] [get_ports OUT_Y];
set_load -max 0.4 [get_ports OUT_Y];
set_load -min 0.1 [get_ports OUT_Y];
```

When we give 
- set_input_delay -max 3 -clock <clock_name> [<definition_point>]

Here -max 3 implies that the data arrives 3 ns late compared to clock

- set_input_delay -max -3 -clock <clock_name> [<definition_point>]

Here the data is arriving 3 ns before the rising edge which helps in setup time

so negative max relaxes the path in case of setup

Positive max tightens the path in case of setup

In case of hold it is the opposite case negative min tightens the path and positive min relaxes the path.

- Now consider the case where two inputs In_C and In_D are given to combinational logic and it should be constraint , This design is independent of the original design.

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/5c1edee411118736dbf4a546d4d22ba9228f9b2b/PD%23day8/266766737-a595756f-21f0-4518-85bb-351eb3959551.png">

This can be done by using max_latency or using the virtual lab:
set_max_latency -from [<source_port_name>] -to [<destination_port_name>]

**10. Creating Virtual Clock 

create_clock -name <virtual_clock_name> -period

set_input_delay -max -clock <clock_name> -clock_fall -add [<destination_point>]

Here the -add is signify that we are appending this to already constrained path.

In cases where there are multiple load attached to a net , Transition delay can get further delayed depending on loading strain.

In such cases set_driving_cell is more recommanded.

NOTE

set_input_transition => It is used mainly for top level primary Input/output .
set_driving_cell => It is used for intrernal path.
Command for set_driving_cell is

set_driving_cell -lib_cell <lib_cell_ref_name> [all_inputs]

Labs on set_max_latency virtual_clocks
When we do report_timing -to OUT_Z , we get unconstrained path.

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/44610624eb8cde3640d1149e987b3da763773c56/PD%23day8/lab7_unconstrained.png">

Again when we compile the design is optimized and timing is met

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/dcdb2830c74f21a06eecb67b3da1c14e0d7bd75a/PD%23day8/Capture.PNG">

Viewing the design in Design_vision:

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1d926069f6fa03e8c15215a19e20a05c8173374e/PD%23day8/schematic.PNG">

*Lab on virtual clock*
Virtual CLock is a clock created without a definition point.

Creating virtual clock and constraining it.
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/7439f41278c95901be375d47a7bc8db6f2b6aaae/PD%23day8/lab8_commandvirt.png">

when we give report_timing -to OUT_Z -sig 4 , we get the path is violated.

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f2ab4084911082033a768d6d40d0687e57972dc7/PD%23day8/lab8_violated.png">

When we again compile the design is optimized and slack is met :

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/1006f838a8df15ce08bdbcd8a678c7b60a3d05a5/PD%23day8/lab8_met.png">

</details>

## Day-9-Optimizations

<details>
<summary> Introduction to Combinational and Sequential Optimization </summary>

Optimization in VLSI design is a crucial aspect of creating efficient and high-performance integrated circuits (ICs). VLSI optimization involves improving various aspects of IC design, such as power consumption, area utilization, timing, and manufacturability.

The goals of optimization :

- Cost based Optimization
     Optimization till cost is met
     Over optimization of one goal can harm other goals.


- Performance Optimization:

    Speed: Improve the operational speed of the IC by minimizing delays, optimizing critical paths, and ensuring that the design meets specified timing requirements.
    Throughput: Enhance the overall system throughput by optimizing data flow and minimizing bottlenecks in the circuit.

- Power Optimization:

    Dynamic Power: Minimize dynamic power consumption to extend battery life in portable devices and reduce power dissipation in data centers.
    Static Power: Reduce static power (leakage power) to lower overall power consumption when the IC is in standby or idle mode.

- Goals for Synthesis

    > Meet Timing
    > Meet Area
    > Meet power
    > Meet Quality

    
*Combination logic Optimisation*

Combinational Logic Optimization squeeze the logic to get most optimized design in terms of area and power. There are various techniques for optimizing the circuit

    constant propagation(Direct propagation)
    Boolean Logic Optimization(K-Means ,QUine Mckluskey)

*Sequential Optimization*

Basic Sequential Optimization

    Sequential Constant propagation
    Retiming
    Unused Flop Removal
    Clock Gating

Advanced

    State Optimization
    Sequential logic cloning

*Optimization of Unloaded Outputs*

Optimizing unloaded outputs typically involves reduction of power consumption , area, delay for unused or idle pins . It refers to flip-flops whose outputs are not connected to any subsequent logic gates or do not affect the functionality of the overall circuit. so these flip flops can be removed thus retaining the function and reducing the area , power of the design.

*Controlling sequential optimization*

    compile_seqmap_propagate_constants ----> If this variable is not set to true, the sequential constant propagating circuits are retained in circuit and not optimized.
    compile_delete_unloaded_sequential_cells ----> If the variable is not set to true, it doesn't remove the counter cells as discussed, it retains all counters in the circuit.
    compile_register_replication ----> If the variable is set to true, this replicates the registers in cloning optimization so that timing is met.
</details>



<details>
<summary> Labs on Combinational and Sequential Optimization </summary>
	
**EX 1: opt_check**

The RTL code of the opt_check is as follows:

```ruby
module opt_check (input a , input b , input c , output y1, output y2);
wire a1;
assign y1 = a?b:0;
assign y2 = ~((a1 & b) | c);
assign a1 = 1'b0;
endmodule
```
The report after linking the compiling the above design is as follows:
```
dc_shell> read_verilog verilog_files/opt_check.v
dc_shell> link
dc_shell> compile
dc_shell> write -f ddc -out verilog_files/opt_check.ddc

open design_vision
design_vision> read_ddc verilog_files/opt_check.ddc
```
The schematic in design vision:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/51c8857814ba1688bf1c1368a1190ddf49b33dca/PD%23day9/opt_check_schematic.png">

**EX 2: opt_check2**

The RTL code of the opt_check is as follows:

```ruby
module opt_check2 (input a , input b , output y);
assign y = a?1:b;
endmodule
```
The report after linking the compiling the above design is as follows:
```
dc_shell> read_verilog verilog_files/opt_check2.v
dc_shell> link
dc_shell> compile
dc_shell> write -f ddc -out verilog_files/opt_check2.ddc

open design_vision
design_vision> read_ddc verilog_files/opt_check2.ddc
```
The schematic in design vision:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f2cc84d716bbbfbe49819f72b603867954595e63/PD%23day9/opt_check2_schematic.png">


**EX 3: opt_check3**

The RTL code of the opt_check is as follows:

```ruby
module opt_check3 (input a , input b, input c , output y);
assign y = a?(c?b:0):0;
endmodule
```
The report after linking the compiling the above design is as follows:
```
dc_shell> read_verilog verilog_files/opt_check3.v
dc_shell> link
dc_shell> compile
dc_shell> write -f ddc -out verilog_files/opt_check3.ddc

open design_vision
design_vision> read_ddc verilog_files/opt_check3.ddc
```
The schematic in design vision:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f2cc84d716bbbfbe49819f72b603867954595e63/PD%23day9/opt_check3.png">

**EX 4: opt_check4**

The RTL code of the opt_check is as follows:

```ruby
module opt_check4 (input a , input b , input c , output y);
assign y = a?(b?(a & c ):c):(!c);
endmodule
```
The report after linking the compiling the above design is as follows:
```
dc_shell> read_verilog verilog_files/opt_check4.v
dc_shell> link
dc_shell> compile
dc_shell> write -f ddc -out verilog_files/opt_check4.ddc

open design_vision
design_vision> read_ddc verilog_files/opt_check4.ddc
```
The schematic in design vision:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f2cc84d716bbbfbe49819f72b603867954595e63/PD%23day9/opt_check4_schem.png">

Then set_max_delay as 0.06 and do report_timing:
```
design_vision> set_max_delay 0.06 -from [all_inputs] -to [get_ports y]
1


design_vision> report_timing -sig 4
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : opt_check4
Version: T-2022.03-SP5-1
Date   : Thu Sep 14 12:14:43 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: a (input port)
  Endpoint: y (output port)
  Path Group: default
  Path Type: max

  Point                                    Incr       Path
  -----------------------------------------------------------
  input external delay                   0.0000     0.0000 f
  a (in)                                 0.0000     0.0000 f
  U2/Y (sky130_fd_sc_hd__xnor2_1)        0.0830     0.0830 f
  y (out)                                0.0000     0.0830 f
  data arrival time                                 0.0830

  max_delay                              0.0600     0.0600
  output external delay                  0.0000     0.0600
  data required time                                0.0600
  -----------------------------------------------------------
  data required time                                0.0600
  data arrival time                                -0.0830
  -----------------------------------------------------------
  slack (VIOLATED)                                 -0.0230

```
Then we do compile ulta to optimize the timing specs:

```
design_vision> compile_ultra

design_vision> report_timing
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : opt_check4
Version: T-2022.03-SP5-1
Date   : Thu Sep 14 12:18:00 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: a (input port)
  Endpoint: y (output port)
  Path Group: default
  Path Type: max

  Point                                    Incr       Path
  -----------------------------------------------------------
  input external delay                     0.00       0.00 f
  a (in)                                   0.00       0.00 f
  U3/Y (sky130_fd_sc_hd__xnor2_1)          0.08       0.08 f
  y (out)                                  0.00       0.08 f
  data arrival time                                   0.08

  max_delay                                0.06       0.06
  output external delay                    0.00       0.06
  data required time                                  0.06
  -----------------------------------------------------------
  data required time                                  0.06
  data arrival time                                  -0.08
  -----------------------------------------------------------
  slack (VIOLATED)                                   -0.02

```
After report timing it gives same result, Hence further optimization not possbile.



**EX 5: Resource_sharing_mult_check**

RTL code:
```ruby
module resource_sharing_mult_check (input [3:0] a , input [3:0] b, input [3:0] c , input [3:0] d, output [7:0] y  , input sel);
	assign y = sel ? (a*b) : (c*d);

endmodule
```
Commands:

```
design_vision> read_verilog verilog_files/resource_sharing_mult_check.v 
design_vision> design_vision> link
design_vision> compile_ultra 
```
Report Area:
```
design_vision> report_area 
 
****************************************
Report : area
Design : resource_sharing_mult_check
Version: T-2022.03-SP5-1
Date   : Thu Sep 14 12:25:46 2023
****************************************

Information: Updating design information... (UID-85)
Library(s) Used:

    sky130_fd_sc_hd__tt_025C_1v80 (File: /home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/lib/sky130_fd_sc_hd__tt_025C_1v80.db)

Number of ports:                           25
Number of nets:                            66
Number of cells:                           37
Number of combinational cells:             37
Number of sequential cells:                 0
Number of macros/black boxes:               0
Number of buf/inv:                          1
Number of references:                       5

Combinational area:                334.070391
Buf/Inv area:                        3.753600
Noncombinational area:               0.000000
Macro/Black Box area:                0.000000
Net Interconnect area:      undefined  (No wire load specified)

Total cell area:                   334.070391
Total area:                 undefined
1
```
Report Timing :
```
design_vision> report_timing
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : resource_sharing_mult_check
Version: T-2022.03-SP5-1
Date   : Thu Sep 14 12:30:53 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: sel (input port)
  Endpoint: y[6] (output port)
  Path Group: default
  Path Type: max

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  input external delay                                    0.00       0.00 r
  sel (in)                                                0.00       0.00 r
  U2/Y (sky130_fd_sc_hd__clkinv_1)                        0.12       0.12 f
  U22/Y (sky130_fd_sc_hd__a22oi_1)                        0.29       0.40 r
  U24/Y (sky130_fd_sc_hd__nor2_1)                         0.09       0.49 f
  DP_OP_9J2_122_9283/U13/SUM (sky130_fd_sc_hd__ha_1)      0.30       0.80 f
  DP_OP_9J2_122_9283/U6/COUT (sky130_fd_sc_hd__fa_1)      0.38       1.18 f
  DP_OP_9J2_122_9283/U5/COUT (sky130_fd_sc_hd__fa_1)      0.41       1.59 f
  DP_OP_9J2_122_9283/U4/COUT (sky130_fd_sc_hd__fa_1)      0.38       1.97 f
  DP_OP_9J2_122_9283/U3/COUT (sky130_fd_sc_hd__fa_1)      0.38       2.35 f
  U27/SUM (sky130_fd_sc_hd__fa_1)                         0.46       2.81 r
  y[6] (out)                                              0.00       2.81 r
  data arrival time                                                  2.81

  max_delay                                               2.50       2.50
  output external delay                                   0.00       2.50
  data required time                                                 2.50
  --------------------------------------------------------------------------
  data required time                                                 2.50
  data arrival time                                                 -2.81
  --------------------------------------------------------------------------
  slack (VIOLATED)                                                  -0.31
```
Then we do compile ultra then slack is changed to 0.08.
Again we set max delay to 0.1
```
design_vision> set_max_delay -from sel -to [all_outputs] 0.1
1
```
Again slack changed to -2.32.
We do compile ultra then check for area:
```
design_vision> report_area
 
****************************************
Report : area
Design : resource_sharing_mult_check
Version: T-2022.03-SP5-1
Date   : Thu Sep 14 12:37:53 2023
****************************************

Information: Updating design information... (UID-85)
Library(s) Used:

    sky130_fd_sc_hd__tt_025C_1v80 (File: /home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/lib/sky130_fd_sc_hd__tt_025C_1v80.db)

Number of ports:                           25
Number of nets:                           206
Number of cells:                          189
Number of combinational cells:            189
Number of sequential cells:                 0
Number of macros/black boxes:               0
Number of buf/inv:                         35
Number of references:                      16

Combinational area:                962.172781
Buf/Inv area:                      133.878396
Noncombinational area:               0.000000
Macro/Black Box area:                0.000000
Net Interconnect area:      undefined  (No wire load specified)

Total cell area:                   962.172781
Total area:                 undefined
1
```
Area increaseas tried to constrain timing.

Now, we try contrain both area and timing:

```
design_vision> set_max_area 800
design_vision> compile_ultra
```
Report Timing:
```
design_vision> report_timing
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : resource_sharing_mult_check
Version: T-2022.03-SP5-1
Date   : Thu Sep 14 12:42:44 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: sel (input port)
  Endpoint: y[0] (output port)
  Path Group: default
  Path Type: max

  Point                                    Incr       Path
  -----------------------------------------------------------
  input external delay                     0.00       0.00 f
  sel (in)                                 0.00       0.00 f
  U202/Y (sky130_fd_sc_hd__nand2_1)        0.04       0.04 r
  U203/Y (sky130_fd_sc_hd__o21ai_1)        0.04       0.07 f
  y[0] (out)                               0.00       0.07 f
  data arrival time                                   0.07

  max_delay                                0.10       0.10
  output external delay                    0.00       0.10
  data required time                                  0.10
  -----------------------------------------------------------
  data required time                                  0.10
  data arrival time                                  -0.07
  -----------------------------------------------------------
  slack (MET)                                         0.03

```

Area Report:

```
design_vision> report_area
 
****************************************
Report : area
Design : resource_sharing_mult_check
Version: T-2022.03-SP5-1
Date   : Thu Sep 14 12:44:16 2023
****************************************

Library(s) Used:

    sky130_fd_sc_hd__tt_025C_1v80 (File: /home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/lib/sky130_fd_sc_hd__tt_025C_1v80.db)

Number of ports:                           25
Number of nets:                           168
Number of cells:                          150
Number of combinational cells:            150
Number of sequential cells:                 0
Number of macros/black boxes:               0
Number of buf/inv:                         18
Number of references:                      23

Combinational area:                783.251184
Buf/Inv area:                       67.564798
Noncombinational area:               0.000000
Macro/Black Box area:                0.000000
Net Interconnect area:      undefined  (No wire load specified)

Total cell area:                   783.251184
Total area:                 undefined
1
```
Now,area also confined within 800.

Tie cells

Tie cells also known as tie-high and tie-low cells, are components used in vlsi design to ensure that specific signal are held at a predetermined logic value regardless of input condition. These cells are particularlly useful in preventing floating or undefined states in digital circuit.

**EX 6: dff_const1**

RTL:
```ruby
module dff_const1(input clk, input reset, output reg q);
  always @(posedge clk, posedge reset)
  begin
  	if(reset)
  		q <= 1'b0;
  	else
  		q <= 1'b1;
  end

endmodule
```
Commands:
```
dc_shell> read_verilog verilog_files/dff_const1.v
dc_shell> link
dc_shell> compile
```
The schematic in design vision:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b33c6d638fe239f64297bba4889dd1ee2eba1768/PD%23day9/dff_const1.png">

**EX 7: dff_const2**
RTL:
```ruby
module dff_const2(input clk, input reset, output reg q);
always @(posedge clk, posedge reset)
begin
	if(reset)
		q <= 1'b1;
	else
		q <= 1'b1;
end

endmodule
```
Commands:
```
dc_shell> read_verilog verilog_files/dff_const2.v
dc_shell> link
dc_shell> compile
```

The schematic in design vision:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b33c6d638fe239f64297bba4889dd1ee2eba1768/PD%23day9/dff_const2.png">

**EX 8: dff_const3**
RTL:
```ruby
module dff_const3(input clk, input reset, output reg q);
reg q1;

always @(posedge clk, posedge reset)
begin
	if(reset)
	begin
		q <= 1'b1;
		q1 <= 1'b0;
	end
	else
	begin
		q1 <= 1'b1;
		q <= q1;
	end
end

endmodule
```
Commands:
```
dc_shell> read_verilog verilog_files/dff_const3.v
dc_shell> link
dc_shell> compile
dc_shell> set compile_seqmap_propagate_constant f
```

The schematic in design vision:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b33c6d638fe239f64297bba4889dd1ee2eba1768/PD%23day9/dff_const3.png">

**EX 9: dff_const4**
RTL:
```ruby
module dff_const4(input clk, input reset, output reg q);
reg q1;

always @(posedge clk, posedge reset)
begin
	if(reset)
	begin
		q <= 1'b1;
		q1 <= 1'b1;
	end
	else
	begin
		q1 <= 1'b1;
		q <= q1;
	end
end

endmodule
```
Commands:
```
dc_shell> read_verilog verilog_files/dff_const4.v
dc_shell> link
dc_shell> compile
dc_shell> set compile_seqmap_propagate_constant f
```

The schematic in design vision:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b33c6d638fe239f64297bba4889dd1ee2eba1768/PD%23day9/dff_const4.png">

**EX 10: dff_const5**
RTL:
```ruby
module dff_const5(input clk, input reset, output reg q);
reg q1;

always @(posedge clk, posedge reset)
begin
	if(reset)
	begin
		q <= 1'b0;
		q1 <= 1'b0;
	end
	else
	begin
		q1 <= 1'b1;
		q <= q1;
	end
end

endmodule
```
Commands:
```
dc_shell> read_verilog verilog_files/dff_const5.v
dc_shell> link
dc_shell> compile
dc_shell> set compile_seqmap_propagate_constant f
```

The schematic in design vision:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b33c6d638fe239f64297bba4889dd1ee2eba1768/PD%23day9/dff_const5.png">

**Boundary Optimization**

"Boundary optimization" in VLSI (Very Large Scale Integration) design generally refers to the optimization of boundaries or interfaces between different components or modules within an integrated circuit (IC) or system-on-chip (SoC).

RTL Design code:
```ruby
module check_boundary (input clk , input res , input [3:0] val_in , output reg [3:0] val_out);
wire en;
internal_module u_im (.clk(clk) , .res(res) , .cnt_roll(en));

always @ (posedge clk , posedge res)
begin
	if(res)
		val_out <= 4'b0;
	else if(en)
		val_out <= val_in;	
end
endmodule


module internal_module (input clk , input res , output cnt_roll);
reg [2:0] cnt;

always @(posedge clk , posedge res)
begin
	if(res)
		cnt <= 3'b0;
	else
		cnt <= cnt + 1;
end

assign cnt_roll = (cnt == 3'b111);

endmodule
```
No boundary , Entire design is optimized
Without :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/7e60f34abdd02ce1730651d9970396fcadfdd620/PD%23day9/check_boundry_before.png">

If we don't want boundary optimization then we need to use the below command

set_boundary_optimization <name_pin> false

example : set_boundary_optimization u_im false


With:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/7e60f34abdd02ce1730651d9970396fcadfdd620/PD%23day9/boundry_check_after.png">


**Register Retiming**

Register retiming is a technique used in Very Large Scale Integration (VLSI) design to optimize the performance of digital circuits by rearranging the registers in the circuit without changing its functionality. The primary goal of register retiming is to minimize the critical path delay, which is the longest path in the circuit from an input to an output.

```ruby
module check_reg_retime (input clk , input [3:0] a, input [3:0] b , output [7:0] c , input reset);

wire [7:0] mult;
assign mult = a * b;
reg [7:0] q1;
reg [7:0] q2;
reg [7:0] q3;




always @ (posedge clk , posedge reset)
begin
	if(reset)
	begin
		q1 <= 8'b0;
		q2 <= 8'b0;
		q3 <= 8'b0;
	end
	else
	begin
		q1 <= mult;
		q2 <= q1;
		q3 <= q2;
	end
end
assign c = q3;

endmodule
```
In order to rectify this we retime it using following command

compile_ultra -retime

GUI view before optimization:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a93a9270ab984bebc7ad48bd7e3363f0b9626659/PD%23day9/check_reg_retime_bc.png">

Timing before the optimization:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/95713055d2b47d7a443f3925f01f94f472ecf082/PD%23Day9/IMG_7053.jpeg">

GUI view after optimization:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a93a9270ab984bebc7ad48bd7e3363f0b9626659/PD%23day9/check_reg_retime_bc.png">

Timing after the optimization:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a93a9270ab984bebc7ad48bd7e3363f0b9626659/PD%23day9/timing_retime.png">

Timing for all paths from al input:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a93a9270ab984bebc7ad48bd7e3363f0b9626659/PD%23day9/timing_retime_all_input.png">

**Isolating output ports**

In VLSI (Very Large Scale Integration) design, isolating output ports often refers to ensuring that the output signals of a circuit or module are properly isolated and do not interfere with each other or with other parts of the system. This isolation is crucial for maintaining signal integrity, reducing noise, and preventing unintended interactions.

Isolating Output Ports:

- Purpose: The primary goal of isolating output ports is to decouple the internal logic paths of a digital circuit from the variability in the output load, which can affect the cell delay and potentially lead to the failing of internal paths.

- Cell Delay and Output Load: In digital design, the delay of a logic cell is often a function of the output load it drives. When the output load varies, it can result in changes in cell delay, impacting the operation of internal logic elements.

- Solution: To mitigate this problem, designers use isolation techniques. Isolating output ports typically involves inserting buffers between the output ports and external loads, which effectively decouples the internal logic paths from the output paths.

RTL Design code:
```ruby
module check_boundary (input clk , input res , input [3:0] val_in , output reg [3:0] val_out);
wire en;
internal_module u_im (.clk(clk) , .res(res) , .cnt_roll(en));

always @ (posedge clk , posedge res)
begin
	if(res)
		val_out <= 4'b0;
	else if(en)
		val_out <= val_in;	
end
endmodule


module internal_module (input clk , input res , output cnt_roll);
reg [2:0] cnt;

always @(posedge clk , posedge res)
begin
	if(res)
		cnt <= 3'b0;
	else
		cnt <= cnt + 1;
end

assign cnt_roll = (cnt == 3'b111);

endmodule
```

The Design before isolating the ports:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b5bc6f6b6f27fde0c83252cc25bd1a783e447d51/PD%23day9/before_isolate.png">

The timing report before isolating ports
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/6ae4a420490f131a0002e332d251bb69dffb4cd6/PD%23Day9/IMG_7054.jpeg">

REG2REG Timing report before isolation:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b5bc6f6b6f27fde0c83252cc25bd1a783e447d51/PD%23day9/timing_before_isolate_regtoreg.png">

The command set_isolate_ports –type buffer [all_outputs] instructs the tool to isolate the output ports by inserting buffer elements. Buffers drive the external load, which effectively separates the internal paths from the output paths.
The command for isolating ports

set_isolate_ports -type buffer [all_outputs]

The Design after isolating the ports:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b5bc6f6b6f27fde0c83252cc25bd1a783e447d51/PD%23day9/after_isolate.png">

The timing report after isolating ports
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b5bc6f6b6f27fde0c83252cc25bd1a783e447d51/PD%23day9/timing_after_isolate.png">

REG2REG Timing report after isolation:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/b5bc6f6b6f27fde0c83252cc25bd1a783e447d51/PD%23day9/timing_after_isolate_regtoreg.png">

**Multicycle path**

A multicycle path in VLSI (Very Large Scale Integration) design refers to a timing path within a digital circuit where a signal takes multiple clock cycles to propagate from a source register (or flip-flop) to a destination register. This is in contrast to a single-cycle path where the signal must propagate and settle within a single clock cycle.

Multicycle paths are typically encountered in digital designs when specific timing constraints or requirements allow for signals to have longer propagation delays. These paths are often used for various purposes, including achieving certain functionalities, optimizing critical paths, or accommodating variations in clocking schemes.

For a single cycle path, the setup check is done at the consecutive edge of the flop and hold is done at the same edge of the flop. Hold is always checked edge before setup. For a half cycle path, the setup check is done at the subsequent fall edge of the flop and hold is done at the previous falling edge of the flop. In a half cycle path, setup is very stringent and hold is relaxed. Fir a multicycle path, the -setup switch specifies the number of cycles after the launch edge, it needs to check setup and the -hold switch specifies the number of cycles the launch edge moves to check with capture.

RTL:
```ruby
module mcp_check (input clk , input res  , input [7:0] a , input [7:0] b, input en , output reg [15:0] prod);

reg valid; 

always @ (posedge clk , posedge res)
begin
	if(res)
		valid <= 1'b0;
	else 
		valid <= en;
end



always @ (posedge clk , posedge res)
begin
	if(res)
		prod <= 16'b0;
	else if (valid)
		prod <= a * b;
end

endmodule
```

Timing after performing optimization for setup time:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/d8260286e5a9141c8df4fdaba5b7f2377c8e1b4a/PD%23Day9/IMG_7055.jpeg">

Optimization for the minimum time:
before optimizing:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/d8260286e5a9141c8df4fdaba5b7f2377c8e1b4a/PD%23Day9/IMG_7056.jpeg">
after optimizing:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/d8260286e5a9141c8df4fdaba5b7f2377c8e1b4a/PD%23Day9/IMG_7057.jpeg">

Multicycle Path timing after performing isolation:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/d8260286e5a9141c8df4fdaba5b7f2377c8e1b4a/PD%23Day9/IMG_7058.jpeg">

</details>


## Day-10-Quality Checks

<details>
 <summary> Introduction </summary>

**Sanity checks:**

To ensure that the input received from the library team and synthesis team is correct or not. If we are not doing these checks then it creates problems in later stages of design.
Basically, we are checking following input files: and make sure that these files are complete and not erroneous.
1.      Design/netlist checks
2.      SDC checks
3.      Library checks
Design checks:
Check if current design is consistent or not
It checks the quality of netlist and identifies:
1.       Floating pins
2.       Multidriven nets 
3.       Undriven input ports
4.       Unloaded outputs
5.       Unconstrained pins 
6.       Pin mismatch counts between an instance and its reference
7.       Tristate buses with non-tristate drivers
8.       Wire loops across hierarchies
*command: check_design*:
Checks for multi driven nets, floating nets/pins, empty modules.
Pins mismatch, cells or instances without I/O pins/ports etc. 

SDC Checks:
1.      If any unconstrained paths exist in the design then PNR tool will not optimize that path, so these checks are used to report unconstrained paths 
2.      Checks whether the clock is reaching to all the clock pin of the flip-flop.
3.      Check if multiple clock are driving same registers
4.      Check unconstrained endpoints 
5.      Port missing input/output delay.
6.      Port missing slew/load constraints.
*command: check_timing*

Library checks:
It validate the library i.e. it checks the consistency between logical and physical libraries.
It checks the qualities of both libraries.
*check_library*: This command shows the name of the library, library type & its version, units of time, capacitance, leakage power, and current. It shows the number of cells missing, the number of metal or pins missing in the physical and logical library.


**Propagation Delay :**
Propagation delay, in the context of digital electronics and integrated circuits, refers to the time it takes for an electrical signal to travel from the input of a digital logic gate or circuit to its output. It is a critical parameter in digital design because it affects the speed and performance of the circuit. Propagation delay is typically measured in time units, such as nanoseconds (ns) or picoseconds (ps), and it depends on various factors, including the specific technology used, the length of interconnecting wires, and the complexity of the circuit.

Rising Edge Propagation Delay (tpdr): This is the time it takes for the output signal to transition from a low (0) to a high (50% of Vdd crossing) level after the input signal has made a similar transition.

Falling Edge Propagation Delay (tpdf): This is the time it takes for the output signal to transition from a high (50% of Vdd crossing) to a low (0) level after the input signal has made a similar transition.

**report_timing**

The report_timing is used to analyse the report of a timing path that gives information such as cell delays, transition, capacitance, the slack etc.. The report_timing command gives the setup delay of a timing path with two significant digits by default. The following are the different ways to use report_timing command as follows:
```
    report_timing -from DFF_A/clk
    report_timing -from DFF_A/clk -to DFF_C/D
    report_timing -fall_from DFF_A/clk
    report_timing -rise_from DFF_B/clk
    report_timing -delay_type min -to DFF_C/D
    report_timing -delay_type min -through INV/a
    report_timing -delay_type max -through AND/b
    report_timing -rise_from DFF_B/clk -delay_type max -nets -cap -trans -sig 4
```
</details>

<details>
 <summary> LABs </summary>

**Ex: lab8_circuit_modified**

RTL from previous labs :
```ruby
module lab8 circuit (input rst, input clk , input IN_A , input IN_B , output OUT_Y , output out_clk output reg out_div_clk)
reg REGA, REGB , REGC ;
always @ (posedge clk , posedge rst )
begin
	if(rst)
	begin
		REGA <= 1'b0 ;
		REGB <= 1'b0 ;
		REGC <= 1'b0 ;
		out_div_clk <= 1'b0 ;
	end
	else
	begin
		REGA= IN_A | IN_B;
		REGB<- IN_A ^ IN_B;
		REGC <= !(REGA & REGB) ;
		out_div_clk <= ~out_div_clk
	end
end

assign OUT_Y = ~REGC ;

assign out_clk = clk;

endmodule
```
We are also created a.tcl file which sets the constrains on this design:
```
create_clock -name MYCLK -per 10 [get_ports clk];
set_clock_latency -source 2 [get_clocks MYCLK];
set_clock_latency 1 [get_clocks MYCLK];
set_clock_uncertainty -setup 0.5 [get_clocks MYCLK];
set_clock_uncertainty -hold 0.1 [get_clocks MYCLK];
set_input_delay -max 4 -clock [get_clocks MYCLK] [get_ports IN_A];
set_input_delay -max 4 -clock [get_clocks MYCLK] [get_ports IN_B];
set_input_delay -min 1 -clock [get_clocks MYCLK] [get_ports IN_A];
set_input_delay -min 1 -clock [get_clocks MYCLK] [get_ports IN_B];
set_input_transition -max 0.4 [get_ports IN_A];
set_input_transition -max 0.4 [get_ports IN_B];
set_input_transition -min 0.1 [get_ports IN_A];
set_input_transition -min 0.1 [get_ports IN_B];
create_generated_clock -name MYGEN_CLK -master MYCLK -source [get_ports clk] -div 1 [get_ports out_clk];
create_generated_clock -name MYGEN_DIV_CLK -master MYCLK -source [get_ports clk] -div 2 [get_ports out_div_clk]; 
set_output_delay -max 4 -clock [get_clocks MYGEN_CLK] [get_ports OUT_Y];
set_output_delay -min 1 -clock [get_clocks MYGEN_CLK] [get_ports OUT_Y];
set_load -max 0.4 [get_ports OUT_Y];
set_load -min 0.1 [get_ports OUT_Y];
```

Reading and compiling the design:
```
dc_shell> read_verilog verilog_files/lab8_circuit_modified.v 
dc_shell> link
dc_shell> compile_ultra
```
report_timing :
```


 dc_shell> report_timing
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 12:53:14 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: IN_A (input port clocked by MYCLK)
  Endpoint: REGA_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00
  input external delay                                    4.00       7.00 f
  IN_A (in)                                               0.00       7.00 f
  U21/Y (sky130_fd_sc_hd__nor2_1)                         0.25       7.25 r
  U19/Y (sky130_fd_sc_hd__clkinv_1)                       0.08       7.32 f
  REGA_reg/D (sky130_fd_sc_hd__dfrtp_1)                   0.00       7.32 f
  data arrival time                                                  7.32

  clock MYCLK (rise edge)                                10.00      10.00
  clock network delay (ideal)                             3.00      13.00
  clock uncertainty                                      -0.50      12.50
  REGA_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00      12.50 r
  library setup time                                     -0.13      12.37
  data required time                                                12.37
  --------------------------------------------------------------------------
  data required time                                                12.37
  data arrival time                                                 -7.32
  --------------------------------------------------------------------------
  slack (MET)                                                        5.05
```

Falling:fall_from IN_A

```
dc_shell> report_timing -fall_from IN_A -net -capacitance -transition_time  -sig 4
 
****************************************
Report : timing
        -path full
        -delay max
        -nets
        -max_paths 1
        -transition_time
        -capacitance
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 12:58:16 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: IN_A (input port clocked by MYCLK)
  Endpoint: REGA_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                       Fanout       Cap     Trans      Incr       Path
  ----------------------------------------------------------------------------------------------
  clock MYCLK (rise edge)                                                   0.0000     0.0000
  clock network delay (ideal)                                               3.0000     3.0000
  input external delay                                                      4.0000     7.0000 f
  IN_A (in)                                                       0.4000    0.0000     7.0000 f
  IN_A (net)                                    2       0.0045              0.0000     7.0000 f
  U21/Y (sky130_fd_sc_hd__nor2_1)                                 0.1763    0.2481     7.2481 r
  n12 (net)                                     2       0.0057              0.0000     7.2481 r
  U19/Y (sky130_fd_sc_hd__clkinv_1)                               0.0495    0.0761     7.3242 f
  n11 (net)                                     1       0.0019              0.0000     7.3242 f
  REGA_reg/D (sky130_fd_sc_hd__dfrtp_1)                           0.0495    0.0000     7.3242 f
  data arrival time                                                                    7.3242

  clock MYCLK (rise edge)                                                  10.0000    10.0000
  clock network delay (ideal)                                               3.0000    13.0000
  clock uncertainty                                                        -0.5000    12.5000
  REGA_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                                   0.0000    12.5000 r
  library setup time                                                       -0.1266    12.3734
  data required time                                                                  12.3734
  ----------------------------------------------------------------------------------------------
  data required time                                                                  12.3734
  data arrival time                                                                   -7.3242
  ----------------------------------------------------------------------------------------------
  5.0492
```
Rising:rise_from IN_A
```
dc_shell> report_timing -rise_from IN_A -net -capacitance -transition_time  -sig 4
 
****************************************
Report : timing
        -path full
        -delay max
        -nets
        -max_paths 1
        -transition_time
        -capacitance
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 13:00:56 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: IN_A (input port clocked by MYCLK)
  Endpoint: REGB_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                       Fanout       Cap     Trans      Incr       Path
  ----------------------------------------------------------------------------------------------
  clock MYCLK (rise edge)                                                   0.0000     0.0000
  clock network delay (ideal)                                               3.0000     3.0000
  input external delay                                                      4.0000     7.0000 r
  IN_A (in)                                                       0.4000    0.0000     7.0000 r
  IN_A (net)                                    2       0.0049              0.0000     7.0000 r
  U21/Y (sky130_fd_sc_hd__nor2_1)                                 0.0938    0.1136     7.1136 f
  n12 (net)                                     2       0.0051              0.0000     7.1136 f
  U22/Y (sky130_fd_sc_hd__a21oi_1)                                0.1185    0.1163     7.2299 r
  N1 (net)                                      1       0.0020              0.0000     7.2299 r
  REGB_reg/D (sky130_fd_sc_hd__dfrtp_1)                           0.1185    0.0000     7.2299 r
  data arrival time                                                                    7.2299

  clock MYCLK (rise edge)                                                  10.0000    10.0000
  clock network delay (ideal)                                               3.0000    13.0000
  clock uncertainty                                                        -0.5000    12.5000
  REGB_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                                   0.0000    12.5000 r
  library setup time                                                       -0.0837    12.4163
  data required time                                                                  12.4163
  ----------------------------------------------------------------------------------------------
  data required time                                                                  12.4163
  data arrival time                                                                   -7.2299
  ----------------------------------------------------------------------------------------------
  5.1864
```
Delay_type min:
```
dc_shell> report_timing -rise_from IN_A -net -capacitance -transition_time  -sig 4 -delay_type min
 
****************************************
Report : timing
        -path full
        -delay min
        -nets
        -max_paths 1
        -transition_time
        -capacitance
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 13:10:10 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: IN_A (input port clocked by MYCLK)
  Endpoint: REGB_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: min

  Point                                       Fanout       Cap     Trans      Incr       Path
  ----------------------------------------------------------------------------------------------
  clock MYCLK (rise edge)                                                   0.0000     0.0000
  clock network delay (ideal)                                               3.0000     3.0000
  input external delay                                                      1.0000     4.0000 r
  IN_A (in)                                                       0.1000    0.0000     4.0000 r
  IN_A (net)                                    2       0.0049              0.0000     4.0000 r
  U22/Y (sky130_fd_sc_hd__a21oi_1)                                0.0397    0.0692     4.0692 f
  N1 (net)                                      1       0.0019              0.0000     4.0692 f
  REGB_reg/D (sky130_fd_sc_hd__dfrtp_1)                           0.0397    0.0000     4.0692 f
  data arrival time                                                                    4.0692

  clock MYCLK (rise edge)                                                   0.0000     0.0000
  clock network delay (ideal)                                               3.0000     3.0000
  clock uncertainty                                                         0.1000     3.1000
  REGB_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                                   0.0000     3.1000 r
  library hold time                                                        -0.0539     3.0461
  data required time                                                                   3.0461
  ----------------------------------------------------------------------------------------------
  data required time                                                                   3.0461
  data arrival time                                                                   -4.0692
  ----------------------------------------------------------------------------------------------
  slack (MET)                                                                          1.0231
```

Observation from report_timing for both rise and fall:

The r indicates rise and f indicates fall delay being considered. The U21 cell has a less delay for rise to fall arc(93.8ps) than the fall to rise arc (176ps) as the gate is an inverter (negative unateness). The library setup time is different for a rise transition and fall transition. The delay varies between rise_from and fall_from of a timing path. Min path defines library hold time. The launch edge and capture edge are calculated at same instant. 

*Report_timing -through <>*

MAX:
```
dc_shell> report_timing -thr U21/Y
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 13:16:06 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: IN_A (input port clocked by MYCLK)
  Endpoint: REGA_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00
  input external delay                                    4.00       7.00 f
  IN_A (in)                                               0.00       7.00 f
  U21/Y (sky130_fd_sc_hd__nor2_1) <-                      0.25       7.25 r
  U19/Y (sky130_fd_sc_hd__clkinv_1)                       0.08       7.32 f
  REGA_reg/D (sky130_fd_sc_hd__dfrtp_1)                   0.00       7.32 f
  data arrival time                                                  7.32

  clock MYCLK (rise edge)                                10.00      10.00
  clock network delay (ideal)                             3.00      13.00
  clock uncertainty                                      -0.50      12.50
  REGA_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00      12.50 r
  library setup time                                     -0.13      12.37
  data required time                                                12.37
  --------------------------------------------------------------------------
  data required time                                                12.37
  data arrival time                                                 -7.32
  --------------------------------------------------------------------------
  slack (MET)                                                        5.05
```
MIN:
```
dc_shell> report_timing -thr U21/Y -delay_type min
 
****************************************
Report : timing
        -path full
        -delay min
        -max_paths 1
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 13:18:22 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: IN_B (input port clocked by MYCLK)
  Endpoint: REGA_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: min

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00
  input external delay                                    1.00       4.00 r
  IN_B (in)                                               0.00       4.00 r
  U21/Y (sky130_fd_sc_hd__nor2_1) <-                      0.06       4.06 f
  U19/Y (sky130_fd_sc_hd__clkinv_1)                       0.04       4.10 r
  REGA_reg/D (sky130_fd_sc_hd__dfrtp_1)                   0.00       4.10 r
  data arrival time                                                  4.10

  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00
  clock uncertainty                                       0.10       3.10
  REGA_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00       3.10 r
  library hold time                                      -0.04       3.06
  data required time                                                 3.06
  --------------------------------------------------------------------------
  data required time                                                 3.06
  data arrival time                                                 -4.10
  --------------------------------------------------------------------------
  slack (MET)                                                        1.03

```
Checking whether the deign is loaded correctly or is there any Human error

**check_design**

The check_timing shows whether the design is properly constrained or not. The constraints shows MET and unconstrained endpoints are listed as the constraints are not defined yet. 
Reading the design , after linking
```
dc_shell> read_verilog verilog_files/lab8_circuit_modified.v 
dc_shell> link
dc_shell> check_timing
dc_shell> compile_ultra
```
check_design:
```
dc_shell> check_timing
Information: Updating design information... (UID-85)

Information: Checking generated_clocks...

Information: Checking loops...

Information: Checking no_input_delay...

Information: Checking unconstrained_endpoints...

Warning: The following end-points are not constrained for maximum delay.

End point
---------------
OUT_Y
REGA_reg/next_state
REGB_reg/next_state
REGC_reg/next_state
out_clk
out_div_clk
out_div_clk_reg/next_state

Information: Checking pulse_clock_cell_type...

Information: Checking no_driving_cell...

Information: Checking partial_input_delay...
1
```
check_timing this showed all the paths were unconstrained. So, we report the constrains

**report_constraints**
```
dc_shell> report_constraints
Information: Updating design information... (UID-85)
 
****************************************
Report : constraint
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 13:28:02 2023
****************************************

    Constraint                                     Slack
    ----------------------------------------------------
    max_leakage_power                              -0.06  (VIOLATED)


    Constraint                                       Cost
    -----------------------------------------------------
    max_transition                                   0.00 (MET)
    max_capacitance                                  0.00 (MET)
    max_leakage_power                                0.06 (VIOLATED)

```
After defining the constraints, the check_timing shows some of endpoints are defined. So, only the clock ports are not defined. 
```
dc_shell> check_timing

Information: Checking generated_clocks...

Information: Checking loops...

Information: Checking no_input_delay...

Information: Checking unconstrained_endpoints...

Warning: The following end-points are not constrained for maximum delay.

End point
---------------
out_clk
out_div_clk

Information: Checking pulse_clock_cell_type...

Information: Checking no_driving_cell...

Information: Checking partial_input_delay...
1
```
Again Report timing:
```
dc_shell> report_timing
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 13:35:22 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: IN_A (input port clocked by MYCLK)
  Endpoint: REGA_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Path Group: MYCLK
  Path Type: max

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00
  input external delay                                    4.00       7.00 f
  IN_A (in)                                               0.00       7.00 f
  U13/Y (sky130_fd_sc_hd__nor2_1)                         0.25       7.25 r
  U10/Y (sky130_fd_sc_hd__clkinv_1)                       0.08       7.32 f
  REGA_reg/D (sky130_fd_sc_hd__dfrtp_1)                   0.00       7.32 f
  data arrival time                                                  7.32

  clock MYCLK (rise edge)                                10.00      10.00
  clock network delay (ideal)                             3.00      13.00
  clock uncertainty                                      -0.50      12.50
  REGA_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00      12.50 r
  library setup time                                     -0.13      12.37
  data required time                                                12.37
  --------------------------------------------------------------------------
  data required time                                                12.37
  data arrival time                                                 -7.32
  --------------------------------------------------------------------------
  slack (MET)                                                        5.05


  Startpoint: REGC_reg (rising edge-triggered flip-flop clocked by MYCLK)
  Endpoint: OUT_Y (output port clocked by MYGEN_CLK)
  Path Group: MYGEN_CLK
  Path Type: max

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock MYCLK (rise edge)                                 0.00       0.00
  clock network delay (ideal)                             3.00       3.00
  REGC_reg/CLK (sky130_fd_sc_hd__dfrtp_1)                 0.00       3.00 r
  REGC_reg/Q (sky130_fd_sc_hd__dfrtp_1)                   0.30       3.30 r
  U11/Y (sky130_fd_sc_hd__clkinv_1)                       2.32       5.62 f
  OUT_Y (out)                                             0.00       5.62 f
  data arrival time                                                  5.62

  clock MYGEN_CLK (rise edge)                            10.00      10.00
  clock network delay (ideal)                             0.00      10.00
  output external delay                                  -4.00       6.00
  data required time                                                 6.00
  --------------------------------------------------------------------------
  data required time                                                 6.00
  data arrival time                                                 -5.62
  --------------------------------------------------------------------------
  slack (MET)                                                        0.38
```
Again report_constrains:
The following shows the report_constraints that there is no negative slack. So, the constraints are MET
```
dc_shell> report_constraints
 
****************************************
Report : constraint
Design : lab8_circuit
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 13:36:32 2023
****************************************


                                                   Weighted
    Group (max_delay/setup)      Cost     Weight     Cost
    -----------------------------------------------------
    MYCLK                        0.00      1.00      0.00
    MYGEN_CLK                    0.00      1.00      0.00
    MYGEN_DIV_CLK                0.00      1.00      0.00
    default                      0.00      1.00      0.00
    -----------------------------------------------------
    max_delay/setup                                  0.00

                              Total Neg  Critical
    Group (critical_range)      Slack    Endpoints   Cost
    -----------------------------------------------------
    MYCLK                        0.00         0      0.00
    MYGEN_CLK                    0.00         0      0.00
    MYGEN_DIV_CLK                0.00         0      0.00
    default                      0.00         0      0.00
    -----------------------------------------------------
    critical_range                                   0.00

                                                   Weighted
    Group (min_delay/hold)       Cost     Weight     Cost
    -----------------------------------------------------
    MYCLK (no fix_hold)          0.00      1.00      0.00
    MYGEN_CLK (no fix_hold)      0.00      1.00      0.00
    MYGEN_DIV_CLK                0.00      1.00      0.00
    default                      0.00      1.00      0.00
    -----------------------------------------------------
    min_delay/hold                                   0.00
    Constraint                                     Slack
    ----------------------------------------------------
    max_leakage_power                              -0.06  (VIOLATED)


    Constraint                                       Cost
    -----------------------------------------------------
    max_transition                                   1.58 (VIOLATED)
    max_capacitance                                  0.21 (VIOLATED)
    max_delay/setup                                  0.00 (MET)
    sequential_clock_pulse_width                     0.00 (MET)
    critical_range                                   0.00 (MET)
    max_leakage_power                                0.06 (VIOLATED)

```

**EX 2: mux_generate_128.v**

RTL:

```
module mux_generate ( input [127:0] in, input [6:0] sel, output reg y);
integer k;
always @ (*)
begin
for(k = 0; k < 128; k=k+1) begin
	if(k == sel)
		y = in[k];
end
end
endmodule
```
Commands:
```
dc_shell> read_verilog verilog_files/mux_generate_128.v
Loading verilog file '/home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/mux_generate_128.v'
Detecting input file type automatically (-rtl or -netlist).
Reading with Presto HDL Compiler (equivalent to -rtl option).
Running PRESTO HDLC
Compiling source file /home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/mux_generate_128.v
Warning:  /home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/mux_generate_128.v:7: signed to unsigned conversion occurs. (VER-318)

Inferred memory devices in process
	in routine mux_generate line 4 in file
		'/home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/mux_generate_128.v'.
===========================================================================
|    Register Name    | Type  | Width | Bus | MB | AR | AS | SR | SS | ST |
===========================================================================
|        y_reg        | Latch |   1   |  N  | N  | N  | N  | -  | -  | -  |
===========================================================================
Presto compilation completed successfully.
Current design is now '/home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/mux_generate.db:mux_generate'
Loaded 1 design.
Current design is 'mux_generate'.
mux_generate

//Latch is infered

dc_shell> write -f verilog -out verilog_files/mux_generate_128_net.v
Writing verilog file '/home/prakhar.g2/Samsung-PD-Training-/sky130RTLDesignAndSynthesisWorkshop/DC_WORKSHOP/verilog_files/mux_generate_128_net.v'.
1
dc_shell> sh gvim verilog_files/mux_generate_128_net.v

```
The latch is inferred because always statement is used and y is assigned in for loop.

The following image shows the generated list is a pure combinational logic design:

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/001959e3c6ef7590067ced6b4d7c875cac493b6b/PD%23day10/mux_128_net.png">
Then we do report_timing, The report_timing shows it has so many fanouts such as 15, 18. The fanout can increase the capacitance as it shows the net with fanout of 18 has a capacitance of 40fF
Now we set the max delay :

dc_shell> set_max_delay -from [all_inputs] -to [all_outputs] 3.5

Then we do report_timing:

```
dc_shell> report_timing
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : mux_generate
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 14:10:32 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: sel[2] (input port)
  Endpoint: y (output port)
  Path Group: default
  Path Type: max

  Point                                    Incr       Path
  -----------------------------------------------------------
  input external delay                     0.00       0.00 r
  sel[2] (in)                              0.00       0.00 r
  U485/Y (sky130_fd_sc_hd__clkinv_1)       0.21       0.21 f
  U486/Y (sky130_fd_sc_hd__nor2_1)         0.68       0.89 r
  U477/Y (sky130_fd_sc_hd__clkinv_1)       0.35       1.24 f
  U561/Y (sky130_fd_sc_hd__o22ai_1)        0.19       1.42 r
  U562/Y (sky130_fd_sc_hd__a31oi_1)        0.05       1.48 f
  U563/Y (sky130_fd_sc_hd__a21oi_1)        0.14       1.62 r
  U564/Y (sky130_fd_sc_hd__a31oi_1)        0.05       1.67 f
  U566/Y (sky130_fd_sc_hd__o21ai_1)        0.16       1.82 r
  U567/Y (sky130_fd_sc_hd__a21oi_1)        0.05       1.87 f
  U568/Y (sky130_fd_sc_hd__a21oi_1)        0.11       1.98 r
  U569/Y (sky130_fd_sc_hd__o21ai_1)        0.07       2.05 f
  U570/Y (sky130_fd_sc_hd__o21ai_1)        0.06       2.11 r
  U571/Y (sky130_fd_sc_hd__a21oi_1)        0.05       2.16 f
  U573/Y (sky130_fd_sc_hd__o22ai_1)        0.11       2.28 r
  U576/Y (sky130_fd_sc_hd__a22oi_1)        0.08       2.35 f
  U578/X (sky130_fd_sc_hd__a22o_1)         0.19       2.54 f
  U581/Y (sky130_fd_sc_hd__a222oi_1)       0.29       2.83 r
  U582/Y (sky130_fd_sc_hd__a31oi_1)        0.06       2.90 f
  U584/X (sky130_fd_sc_hd__a22o_1)         0.19       3.09 f
  U587/Y (sky130_fd_sc_hd__a222oi_1)       0.29       3.38 r
  U588/Y (sky130_fd_sc_hd__a31oi_1)        0.06       3.44 f
  U590/Y (sky130_fd_sc_hd__o21ai_1)        0.15       3.59 r
  U591/Y (sky130_fd_sc_hd__a21oi_1)        0.05       3.64 f
  U592/Y (sky130_fd_sc_hd__a21oi_1)        0.11       3.75 r
  U593/Y (sky130_fd_sc_hd__o21ai_1)        0.07       3.81 f
  U594/Y (sky130_fd_sc_hd__o21ai_1)        0.06       3.88 r
  U595/Y (sky130_fd_sc_hd__a21oi_1)        0.05       3.93 f
  U597/Y (sky130_fd_sc_hd__o22ai_1)        0.11       4.04 r
  U600/Y (sky130_fd_sc_hd__a22oi_1)        0.08       4.12 f
  U602/X (sky130_fd_sc_hd__a22o_1)         0.19       4.31 f
  U605/Y (sky130_fd_sc_hd__a222oi_1)       0.29       4.60 r
  U606/Y (sky130_fd_sc_hd__a31oi_1)        0.06       4.66 f
  U608/X (sky130_fd_sc_hd__a22o_1)         0.19       4.85 f
  U611/Y (sky130_fd_sc_hd__a222oi_1)       0.29       5.14 r
  U612/Y (sky130_fd_sc_hd__a31oi_1)        0.06       5.20 f
  U614/Y (sky130_fd_sc_hd__o21ai_1)        0.15       5.36 r
  U615/Y (sky130_fd_sc_hd__a21oi_1)        0.05       5.40 f
  U617/Y (sky130_fd_sc_hd__a21oi_1)        0.14       5.54 r
  U618/Y (sky130_fd_sc_hd__a211oi_1)       0.05       5.59 f
  U620/Y (sky130_fd_sc_hd__o22ai_1)        0.11       5.71 r
  U623/Y (sky130_fd_sc_hd__nand2_1)        0.06       5.77 f
  U624/X (sky130_fd_sc_hd__a22o_1)         0.20       5.97 f
  U627/Y (sky130_fd_sc_hd__a222oi_1)       0.29       6.26 r
  U628/Y (sky130_fd_sc_hd__a31oi_1)        0.06       6.32 f
  U629/X (sky130_fd_sc_hd__a22o_1)         0.19       6.51 f
  U632/Y (sky130_fd_sc_hd__a222oi_1)       0.29       6.80 r
  U633/Y (sky130_fd_sc_hd__a31oi_1)        0.06       6.86 f
  U635/Y (sky130_fd_sc_hd__a21oi_1)        0.15       7.01 r
  U636/Y (sky130_fd_sc_hd__a211oi_1)       0.06       7.07 f
  U637/Y (sky130_fd_sc_hd__a22oi_1)        0.18       7.25 r
  U640/Y (sky130_fd_sc_hd__nor2_1)         0.06       7.31 f
  U644/Y (sky130_fd_sc_hd__o22ai_1)        0.15       7.46 r
  U645/Y (sky130_fd_sc_hd__nor2b_1)        0.06       7.52 f
  U648/Y (sky130_fd_sc_hd__o22ai_1)        0.15       7.66 r
  U649/Y (sky130_fd_sc_hd__a21oi_1)        0.05       7.72 f
  U651/Y (sky130_fd_sc_hd__o22ai_1)        0.13       7.84 r
  U654/Y (sky130_fd_sc_hd__a22oi_1)        0.07       7.92 f
  U655/Y (sky130_fd_sc_hd__a21oi_1)        0.11       8.03 r
  U656/Y (sky130_fd_sc_hd__a21oi_1)        0.05       8.07 f
  U659/Y (sky130_fd_sc_hd__o22ai_1)        0.15       8.22 r
  U660/Y (sky130_fd_sc_hd__a21oi_1)        0.05       8.28 f
  U663/Y (sky130_fd_sc_hd__o22ai_1)        0.13       8.40 r
  U666/Y (sky130_fd_sc_hd__a22oi_1)        0.07       8.48 f
  U667/Y (sky130_fd_sc_hd__a31oi_1)        0.13       8.61 r
  U668/Y (sky130_fd_sc_hd__a21oi_1)        0.05       8.66 f
  U671/Y (sky130_fd_sc_hd__o22ai_1)        0.15       8.81 r
  U672/Y (sky130_fd_sc_hd__a21oi_1)        0.05       8.86 f
  U677/Y (sky130_fd_sc_hd__o22ai_1)        0.16       9.02 r
  U682/Y (sky130_fd_sc_hd__a21oi_1)        0.08       9.10 f
  U685/Y (sky130_fd_sc_hd__o22ai_1)        0.15       9.25 r
  U686/Y (sky130_fd_sc_hd__a21oi_1)        0.05       9.30 f
  U687/Y (sky130_fd_sc_hd__a21oi_1)        0.12       9.42 r
  U688/Y (sky130_fd_sc_hd__a21oi_1)        0.05       9.47 f
  U691/Y (sky130_fd_sc_hd__o21ai_1)        0.08       9.55 r
  y (out)                                  0.00       9.55 r
  data arrival time                                   9.55

  max_delay                                3.50       3.50
  output external delay                    0.00       3.50
  data required time                                  3.50
  -----------------------------------------------------------
  data required time                                  3.50
  data arrival time                                  -9.55
  -----------------------------------------------------------
  slack (VIOLATED)                                   -6.05
```

We set the max capacitance and report the constraints:

set_max_capacitance 0.025 [current_design]
```
dc_shell> set_max_capacitance 0.025 [current_design]
Current design is 'mux_generate'.
1


dc_shell> report_constraint -all_violators 
 
****************************************
Report : constraint
        -all_violators
Design : mux_generate
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 14:16:32 2023
****************************************


   max_delay/setup ('default' group)

                             Required        Actual
   Endpoint                 Path Delay     Path Delay        Slack
   -----------------------------------------------------------------
   y                            3.50           9.55 r        -6.05  (VIOLATED)


   max_capacitance

                             Required        Actual
   Net                      Capacitance    Capacitance       Slack
   -----------------------------------------------------------------
   n567                         0.03           0.05          -0.02  (VIOLATED)
   sel[3]                       0.03           0.05          -0.02  (VIOLATED)
   n591                         0.03           0.04          -0.02  (VIOLATED)
   n671                         0.03           0.04          -0.01  (VIOLATED)
   n670                         0.03           0.04          -0.01  (VIOLATED)
   n602                         0.03           0.04          -0.01  (VIOLATED)
   n669                         0.03           0.04          -0.01  (VIOLATED)
   n684                         0.03           0.04          -0.01  (VIOLATED)
   sel[2]                       0.03           0.03           0.00  (VIOLATED: increase significant digits)
   sel[4]                       0.03           0.03           0.00  (VIOLATED: increase significant digits)
   sel[5]                       0.03           0.03           0.00  (VIOLATED: increase significant digits)
   sel[1]                       0.03           0.03           0.00  (VIOLATED: increase significant digits)

   -----------------------------------------------------------------
   Total                      12                 -0.13  

   max_leakage_power

                             Required        Actual
   Design                   Leakage Power  Leakage Power     Slack
   -----------------------------------------------------------------
   mux_generate                 0.00           0.36          -0.36  (VIOLATED)

```

Now, after compile_ultra, there is no unconstrained endpoint due to set_max_delay command.
The report_constraint shows that all constraints MET as the set_max_capacitance is defined. The set_max_capacitance is used for buffering the high fanout net :
```

dc_shell> report_constraints
Information: Updating design information... (UID-85)
 
****************************************
Report : constraint
Design : mux_generate
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 14:18:55 2023
****************************************


                                                   Weighted
    Group (max_delay/setup)      Cost     Weight     Cost
    -----------------------------------------------------
    default                      0.00      1.00      0.00
    -----------------------------------------------------
    max_delay/setup                                  0.00

                              Total Neg  Critical
    Group (critical_range)      Slack    Endpoints   Cost
    -----------------------------------------------------
    default                      0.00         0      0.00
    -----------------------------------------------------
    critical_range                                   0.00
    Constraint                                     Slack
    ----------------------------------------------------
    max_leakage_power                              -0.43  (VIOLATED)


    Constraint                                       Cost
    -----------------------------------------------------
    max_transition                                   0.00 (MET)
    max_capacitance                                  0.00 (MET)
    max_delay/setup                                  0.00 (MET)
    critical_range                                   0.00 (MET)
    max_leakage_power                                0.43 (VIOLATED)

```
Report_timing is met :

```
dc_shell> report_timing -net -cap -sig 4
 
****************************************
Report : timing
        -path full
        -delay max
        -nets
        -max_paths 1
        -capacitance
Design : mux_generate
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 14:21:54 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: sel[3] (input port)
  Endpoint: y (output port)
  Path Group: default
  Path Type: max

  Point                        Fanout       Cap      Incr       Path
  ---------------------------------------------------------------------
  input external delay                             0.0000     0.0000 f
  sel[3] (in)                                      0.0000     0.0000 f
  sel[3] (net)                   6       0.0141    0.0000     0.0000 f
  U724/Y (sky130_fd_sc_hd__clkinv_1)               0.1010     0.1010 r
  n903 (net)                     9       0.0235    0.0000     0.1010 r
  U683/Y (sky130_fd_sc_hd__clkinv_1)               0.1590     0.2600 f
  n904 (net)                     7       0.0155    0.0000     0.2600 f
  U775/Y (sky130_fd_sc_hd__nand2_1)                0.2200     0.4800 r
  n1092 (net)                    9       0.0232    0.0000     0.4800 r
  U709/Y (sky130_fd_sc_hd__clkinv_1)               0.1631     0.6431 f
  n1052 (net)                    5       0.0111    0.0000     0.6431 f
  U838/Y (sky130_fd_sc_hd__nand2_1)                0.1044     0.7475 r
  n1004 (net)                    2       0.0058    0.0000     0.7475 r
  U697/Y (sky130_fd_sc_hd__clkinv_1)               0.0686     0.8162 f
  n1074 (net)                    2       0.0043    0.0000     0.8162 f
  U840/Y (sky130_fd_sc_hd__a31oi_1)                0.1188     0.9349 r
  n994 (net)                     1       0.0025    0.0000     0.9349 r
  U841/Y (sky130_fd_sc_hd__a21oi_1)                0.0454     0.9803 f
  n1007 (net)                    1       0.0015    0.0000     0.9803 f
  U848/X (sky130_fd_sc_hd__or3_1)                  0.3297     1.3101 f
  n1008 (net)                    1       0.0022    0.0000     1.3101 f
  U849/Y (sky130_fd_sc_hd__a21oi_1)                0.1126     1.4226 r
  n1012 (net)                    1       0.0026    0.0000     1.4226 r
  U852/Y (sky130_fd_sc_hd__o21ai_1)                0.0633     1.4860 f
  n1014 (net)                    1       0.0023    0.0000     1.4860 f
  U853/Y (sky130_fd_sc_hd__o211ai_1)               0.0731     1.5591 r
  n1040 (net)                    1       0.0024    0.0000     1.5591 r
  U871/Y (sky130_fd_sc_hd__a31oi_1)                0.0875     1.6466 f
  n1041 (net)                    1       0.0022    0.0000     1.6466 f
  U872/Y (sky130_fd_sc_hd__nor3_1)                 0.1240     1.7706 r
  n1044 (net)                    1       0.0025    0.0000     1.7706 r
  U873/Y (sky130_fd_sc_hd__a21oi_1)                0.0522     1.8228 f
  n1046 (net)                    1       0.0022    0.0000     1.8228 f
  U874/Y (sky130_fd_sc_hd__nor2_1)                 0.0775     1.9004 r
  n1048 (net)                    1       0.0025    0.0000     1.9004 r
  U875/Y (sky130_fd_sc_hd__o22ai_1)                0.0621     1.9625 f
  n1056 (net)                    1       0.0023    0.0000     1.9625 f
  U880/Y (sky130_fd_sc_hd__a21oi_1)                0.1205     2.0830 r
  n1057 (net)                    1       0.0025    0.0000     2.0830 r
  U881/Y (sky130_fd_sc_hd__o22ai_1)                0.0709     2.1539 f
  n1064 (net)                    1       0.0023    0.0000     2.1539 f
  U883/Y (sky130_fd_sc_hd__a2bb2oi_1)              0.1212     2.2752 r
  n1066 (net)                    1       0.0025    0.0000     2.2752 r
  U884/Y (sky130_fd_sc_hd__o22ai_1)                0.0725     2.3476 f
  n1077 (net)                    1       0.0021    0.0000     2.3476 f
  U889/Y (sky130_fd_sc_hd__a222oi_1)               0.3021     2.6497 r
  n1078 (net)                    1       0.0025    0.0000     2.6497 r
  U890/Y (sky130_fd_sc_hd__o22ai_1)                0.0979     2.7476 f
  n1086 (net)                    1       0.0023    0.0000     2.7476 f
  U893/Y (sky130_fd_sc_hd__a21oi_1)                0.1232     2.8708 r
  n1087 (net)                    1       0.0025    0.0000     2.8708 r
  U894/Y (sky130_fd_sc_hd__o22ai_1)                0.0704     2.9412 f
  n1099 (net)                    1       0.0023    0.0000     2.9412 f
  U898/Y (sky130_fd_sc_hd__a21oi_1)                0.1255     3.0668 r
  n1100 (net)                    1       0.0025    0.0000     3.0668 r
  U899/Y (sky130_fd_sc_hd__a21oi_1)                0.0460     3.1128 f
  n1102 (net)                    1       0.0022    0.0000     3.1128 f
  U900/Y (sky130_fd_sc_hd__a21oi_1)                0.1046     3.2174 r
  n1105 (net)                    1       0.0024    0.0000     3.2174 r
  U901/Y (sky130_fd_sc_hd__a31oi_1)                0.0471     3.2645 f
  n1112 (net)                    1       0.0023    0.0000     3.2645 f
  U904/Y (sky130_fd_sc_hd__o21ai_1)                0.1111     3.3755 r
  n1131 (net)                    1       0.0024    0.0000     3.3755 r
  U914/Y (sky130_fd_sc_hd__a21oi_1)                0.0503     3.4258 f
  y (net)                        1       0.0000    0.0000     3.4258 f
  y (out)                                          0.0000     3.4258 f
  data arrival time                                           3.4258

  max_delay                                        3.5000     3.5000
  output external delay                            0.0000     3.5000
  data required time                                          3.5000
  ---------------------------------------------------------------------
  data required time                                          3.5000
  data arrival time                                          -3.4258
  ---------------------------------------------------------------------
  slack (MET)                                                 0.0742

```
Number of inputs increase, the fanout of selectline increases. A high fan-out corresponds to a very high capacitance load,can high transition time.


**EX 3: 128 bit enable**

RTL:
```ruby
module en_128 (input [127:0] x , output [127:0] y , input en);
	assign y[127:0] = en ?x[127:0]:128'b0;
endmodule
```
 Commands:
 
```
dc_shell> read_verilog verilog_files/en_128.v 
dc_shell> link
dc_shell> compile_ultra
dc_shell> report_timing -net -cap -inp -from en
 
****************************************
Report : timing
        -path full
        -delay max
        -input_pins
        -nets
        -max_paths 1
        -capacitance
Design : en_128
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 16:24:49 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: en (input port)
  Endpoint: y[127] (output port)
  Path Group: (none)
  Path Type: max

  Point                        Fanout       Cap      Incr       Path
  ---------------------------------------------------------------------
  input external delay                               0.00       0.00 f
  en (in)                                            0.00       0.00 f
  en (net)                     128         0.20      0.00       0.00 f
  U257/A (sky130_fd_sc_hd__and2_0)                   0.00       0.00 f
  U257/X (sky130_fd_sc_hd__and2_0)                   0.09       0.09 f
  y[127] (net)                   1         0.00      0.00       0.09 f
  y[127] (out)                                       0.00       0.09 f
  data arrival time                                             0.09
  ---------------------------------------------------------------------
  (Path is unconstrained)
```
The report_timing shows the unconstrained path. It has a fanout of 128 which results a high capacitance of 0.2pF.

Constraint the capacitance to 30fF on current design:

dc_shell> set_max_capacitance 0.03 [current_design]

report_constraints:
```
dc_shell> report_constraints
 
****************************************
Report : constraint
Design : en_128
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 16:28:31 2023
****************************************

    Constraint                                     Slack
    ----------------------------------------------------
    max_leakage_power                              -0.29  (VIOLATED)


    Constraint                                       Cost
    -----------------------------------------------------
    max_transition                                   0.00 (MET)
    max_capacitance                                  0.17 (VIOLATED)
    max_leakage_power                                0.29 (VIOLATED)


```

Now after compile_ultra, the capacitance is now limited to 0.03 pF and fanout is reduced to 17 :
report_timing:
```
dc_shell> report_timing -net -cap -inp -from en
Information: Updating design information... (UID-85)
 
****************************************
Report : timing
        -path full
        -delay max
        -input_pins
        -nets
        -max_paths 1
        -capacitance
Design : en_128
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 16:31:15 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: en (input port)
  Endpoint: y[116] (output port)
  Path Group: (none)
  Path Type: max

  Point                        Fanout       Cap      Incr       Path
  ---------------------------------------------------------------------
  input external delay                               0.00       0.00 r
  en (in)                                            0.00       0.00 r
  en (net)                      17         0.03      0.00       0.00 r
  U271/A (sky130_fd_sc_hd__clkbuf_1)                 0.00       0.00 r
  U271/X (sky130_fd_sc_hd__clkbuf_1)                 0.28       0.28 r
  n1 (net)                      19         0.03      0.00       0.28 r
  U272/A (sky130_fd_sc_hd__and2_1)                   0.00       0.28 r
  U272/X (sky130_fd_sc_hd__and2_1)                   0.16       0.44 r
  y[116] (net)                   1         0.00      0.00       0.44 r
  y[116] (out)                                       0.00       0.44 r
  data arrival time                                             0.44
  ---------------------------------------------------------------------
  (Path is unconstrained)
```
Then we write design ddc.

dc_shell> write -f ddc -out verilog_files/en_128.ddc

design_vision> read_ddc verilog_files/en_128.ddc

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/001959e3c6ef7590067ced6b4d7c875cac493b6b/PD%23day10/en_128_sch1.png">
En is Zoomed:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/001959e3c6ef7590067ced6b4d7c875cac493b6b/PD%23day10/en_128_sch2.png">

Then we constrain max trans:

dc_shell> set_max_transition 0.150 [current_design]

The we report constraints:
```
dc_shell> report_constraints -all_violators 
 
****************************************
Report : constraint
        -all_violators
Design : en_128
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 16:45:07 2023
****************************************


   max_transition

                             Required        Actual
   Net                      Transition     Transition        Slack
   -----------------------------------------------------------------
   n1                           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U332/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U339/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U348/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U357/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U366/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U372/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U272/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U273/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U274/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U275/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U276/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U277/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U278/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U279/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U280/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U281/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U282/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U283/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U284/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U271/X           0.15           0.36          -0.21  (VIOLATED)
   n2                           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U333/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U340/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U349/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U358/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U373/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U378/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U286/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U287/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U288/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U289/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U290/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U291/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U292/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U293/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U294/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U295/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U296/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U297/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U298/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U285/X           0.15           0.36          -0.21  (VIOLATED)
   n4                           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U331/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U338/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U343/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U351/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U360/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U375/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U314/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U315/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U316/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U317/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U318/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U319/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U320/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U321/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U322/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U323/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U324/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U325/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U326/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U313/X           0.15           0.36          -0.21  (VIOLATED)
   n6                           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U335/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U346/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U352/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U355/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U362/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U364/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U370/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U259/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U380/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U381/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U382/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U383/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U384/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U385/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U386/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U387/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U388/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U389/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U390/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U391/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U258/X           0.15           0.36          -0.21  (VIOLATED)
   n3                           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U330/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U337/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U342/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U350/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U359/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U374/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U376/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U300/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U301/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U302/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U303/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U304/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U305/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U306/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U307/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U308/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U309/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U310/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U311/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U312/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U299/X           0.15           0.36          -0.21  (VIOLATED)
   n5                           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U336/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U347/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U356/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U361/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U365/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U367/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U368/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U371/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U377/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U261/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U262/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U263/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U264/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U265/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U266/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U267/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U268/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U269/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U270/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U328/A           0.15           0.36          -0.21  (VIOLATED)
       PIN :   U260/X           0.15           0.36          -0.21  (VIOLATED)

   -----------------------------------------------------------------
   Total                      6                  -1.28  

   max_leakage_power

                             Required        Actual
   Design                   Leakage Power  Leakage Power     Slack
   -----------------------------------------------------------------
   en_128                       0.00           0.32          -0.32  (VIOLATED)
```

Check_timing: 
The check_timing shows only the unconstrained endpoints. 

```
dc_shell> check_timing 

Information: Checking generated_clocks...

Information: Checking loops...

Information: Checking no_input_delay...

Information: Checking unconstrained_endpoints...

Warning: The following end-points are not constrained for maximum delay.

End point
---------------
y[0]
y[1]
y[2]
y[3]
y[4]
y[5]
y[6]
y[7]
y[8]
y[9]
y[10]
y[11]
y[12]
y[13]
y[14]
y[15]
y[16]
y[17]
y[18]
y[19]
y[20]
y[21]
y[22]
y[23]
y[24]
y[25]
y[26]
y[27]
y[28]
y[29]
y[30]
y[31]
y[32]
y[33]
y[34]
y[35]
y[36]
y[37]
y[38]
y[39]
y[40]
y[41]
y[42]
y[43]
y[44]
y[45]
y[46]
y[47]
y[48]
y[49]
y[50]
y[51]
y[52]
y[53]
y[54]
y[55]
y[56]
y[57]
y[58]
y[59]
y[60]
y[61]
y[62]
y[63]
y[64]
y[65]
y[66]
y[67]
y[68]
y[69]
y[70]
y[71]
y[72]
y[73]
y[74]
y[75]
y[76]
y[77]
y[78]
y[79]
y[80]
y[81]
y[82]
y[83]
y[84]
y[85]
y[86]
y[87]
y[88]
y[89]
y[90]
y[91]
y[92]
y[93]
y[94]
y[95]
y[96]
y[97]
y[98]
y[99]
y[100]
y[101]
y[102]
y[103]
y[104]
y[105]
y[106]
y[107]
y[108]
y[109]
y[110]
y[111]
y[112]
y[113]
y[114]
y[115]
y[116]
y[117]
y[118]
y[119]
y[120]
y[121]
y[122]
y[123]
y[124]
y[125]
y[126]he check_timing shows only the unconstrained endpoints 
y[127]

Information: Checking pulse_clock_cell_type...

Information: Checking no_driving_cell...

Information: Checking partial_input_delay...
1
```

report_timing:
```
dc_shell> report_timing -inp -nets -cap -trans -sig 4 -nosplit
 
****************************************
Report : timing
        -path full
        -delay max
        -input_pins
        -nets
        -max_paths 1
        -transition_time
        -capacitance
Design : en_128
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 16:49:37 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: en (input port)
  Endpoint: y[116] (output port)
  Path Group: (none)
  Path Type: max

  Point                        Fanout       Cap     Trans      Incr       Path
  -------------------------------------------------------------------------------
  input external delay                                       0.0000     0.0000 r
  en (in)                                          0.0000    0.0000     0.0000 r
  en (net)                      17       0.0308              0.0000     0.0000 r
  U271/A (sky130_fd_sc_hd__clkbuf_1)               0.0000    0.0000     0.0000 r
  U271/X (sky130_fd_sc_hd__clkbuf_1)               0.3636    0.2849     0.2849 r
  n1 (net)                      19       0.0307              0.0000     0.2849 r
  U272/A (sky130_fd_sc_hd__and2_1)                 0.3636    0.0000     0.2849 r
  U272/X (sky130_fd_sc_hd__and2_1)                 0.0302    0.1576     0.4425 r
  y[116] (net)                   1       0.0000              0.0000     0.4425 r
  y[116] (out)                                     0.0302    0.0000     0.4425 r
  data arrival time                                                     0.4425
  -------------------------------------------------------------------------------
  (Path is unconstrained)
```

Now, the transition is limited to 150ps in the timing report:
```
dc_shell> set_max_transition 0.150 [current_design]

dc_shell> report_constraints
 
****************************************
Report : constraint
Design : en_128
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 16:53:12 2023
****************************************

    Constraint                                     Slack
    ----------------------------------------------------
    max_leakage_power                              -0.32  (VIOLATED)


    Constraint                                       Cost
    -----------------------------------------------------
    max_transition                                   1.28 (VIOLATED)
    max_capacitance                                  0.00 (MET)
    max_leakage_power                                0.32 (VIOLATED)

```

The max_cap and max_trans should be constrained because the tool takes the values from lib if not defined. check_design ensures the quality of design is proper or not. check_timing ensures all constraints are implemented. report_constraints shows constraints violated if any.

**Report_QOR**
This reports the quality of design, which includes reports of timing path group and cell count details, along with current design statistics such as cobinational, non combinational and total area. This also reports the static power, design rule violation and compile time details.

```
dc_shell> report_qor
 
****************************************
Report : qor
Design : en_128
Version: T-2022.03-SP5-1
Date   : Tue Sep 19 17:13:54 2023
****************************************


  Timing Path Group (none)
  -----------------------------------
  Levels of Logic:               2.00
  Critical Path Length:          0.44
  Critical Path Slack:         uninit
  Critical Path Clk Period:       n/a
  Total Negative Slack:          0.00
  No. of Violating Paths:        0.00
  Worst Hold Violation:          0.00
  Total Hold Violation:          0.00
  No. of Hold Violations:        0.00
  -----------------------------------


  Cell Count
  -----------------------------------
  Hierarchical Cell Count:          0
  Hierarchical Port Count:          0
  Leaf Cell Count:                134
  Buf/Inv Cell Count:               6
  Buf Cell Count:                   6
  Inv Cell Count:                   0
  CT Buf/Inv Cell Count:            0
  Combinational Cell Count:       134
  Sequential Cell Count:            0
  Macro Count:                      0
  -----------------------------------


  Area
  -----------------------------------
  Combinational Area:      823.289605
  Noncombinational Area:     0.000000
  Buf/Inv Area:             22.521599
  Total Buffer Area:            22.52
  Total Inverter Area:           0.00
  Macro/Black Box Area:      0.000000
  Net Area:                  0.000000
  -----------------------------------
  Cell Area:               823.289605
  Design Area:             823.289605


  Design Rules
  -----------------------------------
  Total Number of Nets:           263
  Nets With Violations:             6
  Max Trans Violations:             6
  Max Cap Violations:               0
  -----------------------------------


  Hostname: ssirlab03

  Compile CPU Statistics
  -----------------------------------------
  Resource Sharing:                    0.00
  Logic Optimization:                  0.04
  Mapping Optimization:                0.26
  -----------------------------------------
  Overall Compile Time:                2.08
  Overall Compile Wall Clock Time:     2.35

  --------------------------------------------------------------------

  Design  WNS: 0.00  TNS: 0.00  Number of Violating Paths: 0


  Design (Hold)  WNS: 0.00  TNS: 0.00  Number of Violating Paths: 0

  --------------------------------------------------------------------

```
    
</details>

## Day-11-About My processor

<details>
<summary> EXYNOS 2100 </summary>

Exynos 2100 was one of Samsung's flagship system-on-chip (SoC) designs. It was used in some of Samsung's high-end smartphones and other devices.

Architecture

CPU Cores :

    The Exynos 2100 featured a tri-cluster CPU architecture.
    One prime Cortex-X1 core: This high-performance core was designed for demanding tasks and offered a significant boost in single-threaded performance.
    Three Cortex-A78 cores: These were high-performance cores intended for multi-threaded tasks, providing a balance between performance and efficiency.
    Four Cortex-A55 cores: These were energy-efficient cores used for less demanding tasks to save power.

GPU :

    The Exynos 2100 was equipped with the Mali-G78 GPU, which was designed to deliver excellent graphics and gaming performance.
    It featured multiple execution cores and supported the latest graphics APIs.

AI and Machine Learning :

    The SoC incorporated dedicated AI (Artificial Intelligence) and machine learning accelerators to enhance AI-related tasks such as image recognition, voice processing, and more.
    Samsung's proprietary NPU (Neural Processing Unit) or AI Engine likely played a role in this.

Memory:

    The Exynos 2100 supported LPDDR5 (Low Power DDR5) RAM for fast and efficient memory access. This enabled smooth multitasking and app performance.

Connectivity :

    The chip likely included a 5G modem to support high-speed mobile data connectivity.
    It would have featured various connectivity options, including Wi-Fi, Bluetooth, and GPS.

Multimedia :
Exynos 2100 was one of Samsung's flagship system-on-chip (SoC) designs. It was used in some of Samsung's high-end smartphones and other devices.

Architecture

CPU Cores :

    The Exynos 2100 featured a tri-cluster CPU architecture.
    One prime Cortex-X1 core: This high-performance core was designed for demanding tasks and offered a significant boost in single-threaded performance.
    Three Cortex-A78 cores: These were high-performance cores intended for multi-threaded tasks, providing a balance between performance and efficiency.
    Four Cortex-A55 cores: These were energy-efficient cores used for less demanding tasks to save power.

GPU :

    The Exynos 2100 was equipped with the Mali-G78 GPU, which was designed to deliver excellent graphics and gaming performance.
    It featured multiple execution cores and supported the latest graphics APIs.

AI and Machine Learning :

    The SoC incorporated dedicated AI (Artificial Intelligence) and machine learning accelerators to enhance AI-related tasks such as image recognition, voice processing, and more.
    Samsung's proprietary NPU (Neural Processing Unit) or AI Engine likely played a role in this.

Memory:

    The Exynos 2100 supported LPDDR5 (Low Power DDR5) RAM for fast and efficient memory access. This enabled smooth multitasking and app performance.

Connectivity :

    The chip likely included a 5G modem to support high-speed mobile data connectivity.
    It would have featured various connectivity options, including Wi-Fi, Bluetooth, and GPS.

Multimedia :

    The Exynos 2100 supported advanced multimedia features, including high-resolution camera sensors, 8K video recording, and hardware-based codecs for efficient video playback and encoding.

Security :

    Samsung typically includes a range of security features in its flagship SoCs. This may include hardware-based encryption, secure boot processes, and trusted execution environments for enhanced device security.

Power Efficiency :

    The 5nm manufacturing process, combined with the heterogeneous CPU architecture, was aimed at providing a good balance between performance and power efficiency.

    The Exynos 2100 supported advanced multimedia features, including high-resolution camera sensors, 8K video recording, and hardware-based codecs for efficient video playback and encoding.

Security :

    Samsung typically includes a range of security features in its flagship SoCs. This may include hardware-based encryption, secure boot processes, and trusted execution environments for enhanced device security.

Power Efficiency :

    The 5nm manufacturing process, combined with the heterogeneous CPU architecture, was aimed at providing a good balance between performance and power efficiency.
    
</details>

## Day-12-Modeling BabySoC

<details>
<summary> Example of 4 bit Adder </summary>

RTL:
```ruby
module fulladd (  input [3:0] a,
                  input [3:0] b,
                  input c_in,
                  output c_out,
                  output  [3:0] sum);
							
assign   {c_out, sum} = a + b + c_in;   
  
endmodule

```

Testbench:
```ruby
module tb_fulladd;
    // 1. Declare testbench variables
   reg [3:0] a;
   reg [3:0] b;
   reg c_in;
   wire [3:0] sum;
   integer i;
​
    // 2. Instantiate the design and connect to testbench variables
   fulladd  fa0 ( .a (a),
                  .b (b),
                  .c_in (c_in),
                  .c_out (c_out),
                  .sum (sum));
​
    // 3. Provide stimulus to test the design
   initial begin
      a <= 0;
      b <= 0;
      c_in <= 0;
      
      $monitor ("a=0x%0h b=0x%0h c_in=0x%0h c_out=0x%0h sum=0x%0h", a, b, c_in, c_out, sum);
​
        // Use a for loop to apply random values to the input
      for (i = 0; i < 5; i = i+1) begin
         #10 a <= $random;
             b <= $random;
                 c_in <= $random;
      end
   end
  tb_adder4.v
   initial begin
     $dumpvars;
     $dumpfile("dump.vcd");
   end
endmodule
```
Commands to run:
```
[prakhar.g2@ssirlab03 rvmyth]$ iverilog adder4.v tb_adder4.v
[prakhar.g2@ssirlab03 rvmyth]$ ./a.out
VCD info: dumpfile dump.vcd opened for output.
VCD warning: tb_adder4.v:34: $dumpfile called after $dumpvars started,
                             using existing file (dump.vcd).
a=0x0 b=0x0 c_in=0x0 c_out=0x0 sum=0x0
a=0x4 b=0x1 c_in=0x1 c_out=0x0 sum=0x6
a=0x3 b=0xd c_in=0x1 c_out=0x1 sum=0x1
a=0x5 b=0x2 c_in=0x1 c_out=0x0 sum=0x8
a=0xd b=0x6 c_in=0x1 c_out=0x1 sum=0x4
a=0xd b=0xc c_in=0x1 c_out=0x1 sum=0xa
[prakhar.g2@ssirlab03 rvmyth]$ gtkwave dump.vcd
```
GTKwave :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/9cafb50830d10b483a8e157aba0eff851f4af6b3/PD%23day11/adder_gtk.png">

</details>


<details>
<summary> VSD BabySoC </summary>

**Individual Simulation of modules**

1. Modelling RVMYTH


Commands:
```
[prakhar.g2@ssirlab03 rvmyth]$ iverilog mythcore_test.v tb_mythcore_test.v 
[prakhar.g2@ssirlab03 rvmyth]$ ./a.out
VCD info: dumpfile tb_mythcore_test.vcd opened for output.
[prakhar.g2@ssirlab03 rvmyth]$ gtkwave tb_mythcore_test.vcd
```
GTKwave :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/626895be01a6481920ef64febf8083e8f45da514/PD%23day11/mythcore_gtk.png">
10-bit digital codes observed at the output of rvmyth. It works as RISC V prcessor which 5 cycle fetch , decode , read , execute and write. 
Working : Adds 1 to 1000 as 10 bit binary and 11th bit kept for sign flag as it becomes high it starts counting down.

2. Modelling DAC
Commands:
```
[prakhar.g2@ssirlab03 Pre-synthesis]$ iverilog avsddac.v avsddac_tb_test.v
[prakhar.g2@ssirlab03 Pre-synthesis]$ ./a.out
VCD info: dumpfile avsddac_tb_test.vcd opened for output.
[prakhar.g2@ssirlab03 Pre-synthesis]$ gtkwave avsddac_tb_test.vcd
```
GTKwave :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/d9160236b2007b77070a241561aeccb424396814/PD%23day11/dac_gtk.png">

Working : It is DAC whose Vref High is 3.3v and Vef Low = 0v. At coverts the equivalent 10 bit sign to its respective output.
EX: D[9:0] = 111111010 = equivalent to 1019
Out = Vref * (1019/1024) =3.283886 Which is matched with gtkwave.

3. Modeling PLL

Commands:
```
[prakhar.g2@ssirlab03 module]$ iverilog rvmyth_pll.v rvmyth_pll_tb.v
[prakhar.g2@ssirlab03 module]$ gvim pll_tb.v
[prakhar.g2@ssirlab03 module]$ gvim pll_tb.v
[prakhar.g2@ssirlab03 module]$ iverilog avsd_pll_1v8.v pll_tb.v
[prakhar.g2@ssirlab03 module]$ ./a.out
VCD info: dumpfile test.vcd opened for output.
[prakhar.g2@ssirlab03 module]$ gtkwave test.vcd
```
GTKwave :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/e3cc764fc0d8217764765028d000fdabe30ee66d/PD%23day11/pll_gtk.png">

**Interfacing all the modules**

Commands:
```
[prakhar.g2@ssirlab03 module]$ iverilog vsdbabysoc.v testbench.v avsdpll.v avsddac.v mythcore_test.v
[prakhar.g2@ssirlab03 module]$ ./a.out
VCD info: dumpfile dump.vcd opened for output.
[prakhar.g2@ssirlab03 module]$ gtkwave dump.vcd
```
GTKwave :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/e3cc764fc0d8217764765028d000fdabe30ee66d/PD%23day11/combined_gtk.png">
</details>

## Day-13-Post-Synthesis Simulation of BabySoC

<details>
<summary> Post-Synthesis Simulation </summary>

**1. Converting .lib to .db**

Git cone all the .lib files then convert it in .db using lc_shell :

1. For DAC lib file
Commands:
```
lc_shell> read_lib libs/avsddac.lib 
Reading '/home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.lib' ...
Warning: Line 27, Cell 'avsddac', The 'area' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_output_pin_rise_res' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_inout_pin_fall_res' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_inout_pin_rise_res' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_fanout_load' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_slope_rise' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_output_pin_fall_res' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_intrinsic_rise' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_slope_fall' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_intrinsic_fall' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_inout_pin_cap' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_input_pin_cap' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_output_pin_cap' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 28, Cell 'avsddac', pin 'OUT', The 'OUT' Pin/bus on the 'avsddac' cell has no 'function' attribute.
	The cell becomes a black box. (LIBG-16)
Technology library 'avsddac' read successfully
1
lc_shell> write_lib avsddac -format db -output avsddac.db
Wrote the 'avsddac' library to '/home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/avsddac.db' successfully
1
```

2. For PLL lib file 
Commands :
```
lc_shell> read_lib libs/avsdpll.lib
Reading '/home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.lib' ...
Warning: Line 18, Cell 'avsdpll', The 'area' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_output_pin_rise_res' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_inout_pin_fall_res' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_inout_pin_rise_res' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_fanout_load' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_slope_rise' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_output_pin_fall_res' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_intrinsic_rise' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_slope_fall' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 1, The 'default_intrinsic_fall' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_inout_pin_cap' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_input_pin_cap' attribute is not specified. Using 1.00. (LBDB-172)
Warning: Line 1, The 'default_output_pin_cap' attribute is not specified. Using 0.00. (LBDB-172)
Warning: Line 19, Cell 'avsdpll', pin 'CLK', The 'CLK' Pin/bus on the 'avsdpll' cell has no 'function' attribute.
	The cell becomes a black box. (LIBG-16)
Technology library 'avsdpll' read successfully
1
lc_shell> write_lib avsdpll -format db -output avsdpll.db
Wrote the 'avsdpll' library to '/home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/avsdpll.db' successfully
1
```
3. We aready have .db file of sky 130

**2. Setting target and link library**
Make vim file by name .synopsys_dc.setup, inside that vim file write :
```ruby
set target_library { /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.db /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.db /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/sky130_fd_sc_hd__tt_025C_1v80.db }

set link_library {* /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.db home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.db /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/sky130_fd_sc_hd__tt_025C_1v80.db}
```

After setting lib check in dc_shell:
```
dc_shell> echo $target_library 
 /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.db /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.db /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/sky130_fd_sc_hd__tt_025C_1v80.db

dc_shell> echo $link_library 
* /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.db home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.db /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/sky130_fd_sc_hd__tt_025C_1v80.db
```

reading the rtl :

```
dc_shell> read_verilog mythcore_test.v
dc_shell> link

  Linking design 'clk_gate'
  Using the following designs and libraries:
  --------------------------------------------------------------------------
  * (2 designs)               /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/clk_gate.db, etc
  avsdpll (library)           /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.db
  avsddac (library)           /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.db
  sky130_fd_sc_hd__tt_025C_1v80 (library) /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/sky130_fd_sc_hd__tt_025C_1v80.db

dc_shell> set current_design core

dc_shell> compile_ultra
dc_shell> write -f verilog -out myth_core_net.v
Writing verilog file '/home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/myth_core_net.v'.
Warning: Verilog 'assign' or 'tran' statements are written out. (VO-4)
1
```

GTKwave :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/31fbaf995e4de0688ce0ef095ba78c6cf26344cf/PD%23day13/mythcore_gtkwave_net.png">

Netlist Gui :
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/31fbaf995e4de0688ce0ef095ba78c6cf26344cf/PD%23day13/myth_core_sche.png">

**4 bit Adder Example**
Commands:
*Setting target and link library*
Make vim file by name .synopsys_dc.setup, inside that vim file write :
```ruby
set target_library { /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.db /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.db /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/sky130_fd_sc_hd__tt_025C_1v80.db }

set link_library {* /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.db home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.db /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/sky130_fd_sc_hd__tt_025C_1v80.db}
```
Writing .v file :
```
dc_shell> read_verilog adder4.v
dc_shell> link

  Linking design 'fulladd'
  Using the following designs and libraries:
  --------------------------------------------------------------------------
  * (2 designs)               /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/fulladd.db, etc
  avsdpll (library)           /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.db
  avsddac (library)           /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.db
  sky130_fd_sc_hd__tt_025C_1v80 (library) /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/sky130_fd_sc_hd__tt_025C_1v80.db
dc_shell> compile_ultra
dc_shell> write -f verilog -out adder4_net.v
Writing verilog file '/home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/adder4_net.v'.
```
Netlist GUI before compile:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/31fbaf995e4de0688ce0ef095ba78c6cf26344cf/PD%23day13/adder_sche_before_compile.png">

GLS based Simulation:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/31fbaf995e4de0688ce0ef095ba78c6cf26344cf/PD%23day13/adder4_after_compile.png">

Netlist GUI after compile:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/31fbaf995e4de0688ce0ef095ba78c6cf26344cf/PD%23day13/adder4_gtkwave_postsyn.png">

**Combined Modules**

In this we run post systhesis of vsdbabysoc. Which includes module rvmyth , pll and dac.

Commands:
```
dc_shell> read_verilog vsdbabysoc.v 
dc_shell> link

  Linking design 'vsdbabysoc'
  Using the following designs and libraries:
  --------------------------------------------------------------------------
  * (3 designs)               /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/vsdbabysoc.db, etc
  avsdpll (library)           /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsdpll.db
  avsddac (library)           /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/avsddac.db
  sky130_fd_sc_hd__tt_025C_1v80 (library)
                              /home/prakhar.g2/Samsung-PD-Training-/VSDBabySoC/src/module/libs/sky130_fd_sc_hd__tt_025C_1v80.db

dc_shell> compile_ultra 
```
Generated Nelist:
``` ruby
module vsdbabysoc ( OUT, reset, VCO_IN, ENb_CP, ENb_VCO, REF, VREFH );
  input reset, VCO_IN, ENb_CP, ENb_VCO, REF, VREFH;
  output OUT;
  wire   CLK, net8;
  wire   [9:0] RV_TO_DAC;

  core core1 ( .clk(CLK), .reset(reset), .out(RV_TO_DAC) );
  avsdpll pll ( .ENb_CP(ENb_CP), .ENb_VCO(ENb_VCO), 
        .REF(REF), .VCO_IN(VCO_IN), .CLK(CLK) );
  avsddac dac ( .D(RV_TO_DAC), .OUT(OUT), .VREFH(VREFH) );
endmodule
```
Netlist GUI after compile:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/62c986d5de1eca23b76fc2f17ea1669b07c0d35d/PD%23day13/combined_sche.png">


GLS based Simulation:
<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/62c986d5de1eca23b76fc2f17ea1669b07c0d35d/PD%23day13/vsdbabysoc_gtk.png">

</details>


## Day-14-Synopsys DC and timing analysis

<details>
<summary> Process,Voltage andTemperature (PVT) </summary>


    - Process variations are caused by changes in manufacturing conditions such as temperature, pressure, and dopant concentrations. Deviations in the semiconductor fabrication process are accounted for by this variance.
    - Integrated circuits are designed in such away that they can function in a wide variety of temperatures and voltages,rather than a single temperature and voltage.

*How is PVT data measured?*
Gammadot measures PvT behaviour using a high pressure indirect dilatometry system developed by Rapra Technology Ltd. The technique employs a stainless steel bellows test cell with Mercury as the containing fluid. Volume changes related to changes in temperature & pressure are monitored via a displacement transducer.

**Process**
Variations in the process parameters can be impurity concentration densities, oxide thicknesses and diffusion depths. These are caused bye non uniform conditions during depositions and/or during diffusions of the impurities. This introduces variations in the sheet resistance and transistor parameters such as threshold voltage. Variations are in the dimensions of the devices, mainly resulting from the limited resolution of the photolithographic process. This causes (W/L) variations in MOS transistors.

**Voltage**

As we are going to the lower nodes the supply voltage for a chip is also going to less.
    Let’s say the chip is operating at 1.2V. So, there are chances that at certain instances of time this voltage may vary. It can go to 1.5V or 0.8V. To take       care of this scenario, we consider voltage variation.
There are multiple reasons for voltage variation.
IR drop is caused by the current flow over the power grid network. Supply noise caused by parasitic inductance in combination with resistance and capacitance. when the current is flowing through parasitic inductance (L) it will causes the voltage bounce.

**Temperature**

Effects on performance caused by temperature fluctuations are most often handled as linear scaling effects, but some submicron silicon processes require         nonlinear calculations. This is due to the power dissipation in the MOS-transistors.The power consumption is mainly due to switching, short-circuit and leakage power consumption.
</details>



<details>
<summary> LABs(pt_shell) </summary>

Used primetime (pt_shell) for analysis:
1. Get all the .lib files in the work directory: git clone https://github.com/Geetima2021/vsdpcvrd.g
2. Delete the line from the .lib with the error stated. (REPEAT THIS FOR ALL THE .LIB)
3. After done editing the file: Load lc_shell and read_lib, the write the lib into db.
4. read_verilog vsdbabysoc.v (current_design is clk_gate)
5. read_file {vsdbabysoc.v avsd_pll_1v8.v avsddac.v mythcore_test.v} -autoread -format verilog -top vsdbabysoc
6. link
7. report_global_timing

We created one tcl file to  generate report_timing for both min and max delay types and also generate report_global_timing inside pt_shell.First it sorts all the .db files beforing running loop then we exclude all All the corner report are saved inside the report2 folder:

TCL script :
```ruby
set db_files [glob -directory "./" -types f -tails *.db]
set exclude_files {"avsddac.db" "avsdpll.db"}
set sky_db {}
foreach db $db_files {
    if {$db ni $exclude_files} {
        lappend sky_db $db
    }
}
    
foreach file_name $sky_db {
    set target_library [concat $file_name " avsddac.db avsdpll.db "]
    set link_library [concat " * " $file_name " avsddac.db avsdpll.db "]
    echo $file_name
   ## read_file {vsdbabysoc.v mythcore_test.v} -autoread -format verilog -top vsdbabysoc
    read_file { ../../../../VSDBabySoC/src/module/myth_core_net3.v ../../../../VSDBabySoC/src/module/vsdbabysoc_net.v} -format verilog
    #set current_design core
    source cons.tcl
    link
    ##compile_ultra
    report_timing -delay_type min >> reports2/$file_name.rptmin
    report_timing -delay_type max >> reports2/$file_name.rptmax
    report_global_timing >> reports2/$file_name.rptglobal
     
}
```

The design given to us is unconstrained, we write the constraints for the design :
```ruby
## set_units -time ns
create_clock -name MYCLK -per 2 [get_pins {pll/CLK}];

set_clock_latency -source 1 [get_clocks MYCLK]
set_clock_uncertainty -setup 0.5 [get_clocks MYCLK]; 
set_clock_uncertainty -hold 0.4 [get_clocks MYCLK]; 

set_input_delay -max 1 -clock [get_clocks MYCLK] [all_inputs];
set_input_delay -min 0.5 -clock [get_clocks MYCLK] [all_inputs];
set_output_delay -max 1 -clock [get_clocks MYCLK] [all_outputs];
set_output_delay -min 0.5 -clock [get_clocks MYCLK] [all_outputs];

set_input_transition -max 0.2 [all_inputs];
set_input_transition -min 0.1 [all_inputs];

set_max_area  800;

set_load -max 0.2 [all_outputs];
set_load -min 0.1 [all_outputs];
```

**1. For sky130_fd_sc_hd__ff_100C_1v65**

Report_global_timing :
```
Setup violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS      -9.90     -9.90      0.00      0.00      0.00
TNS   -6250.73  -6250.73      0.00      0.00      0.00
NUM       1065      1065         0         0         0
---------------------------------------------------------


Hold violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS      -0.15     -0.15      0.00      0.00      0.00
TNS     -66.14    -66.14      0.00      0.00      0.00
NUM       1139      1139         0         0         0
---------------------------------------------------------
```
**2. sky130_fd_sc_hd__ff_100C_1v95**
Report_global_timing :

```
No setup violations found.

No hold violations found.
1
```
**3. sky130_fd_sc_hd__ff_n40C_1v56**

Report_global_timing :

```
Setup violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS     -13.02    -13.02      0.00      0.00      0.00
TNS   -8290.76  -8290.76      0.00      0.00      0.00
NUM       1094      1094         0         0         0
---------------------------------------------------------


Hold violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS      -0.11     -0.11      0.00      0.00      0.00
TNS     -10.63    -10.63      0.00      0.00      0.00
NUM        524       524         0         0         0
---------------------------------------------------------

1
```
**4. sky130_fd_sc_hd__ff_n40C_1v65**

Report_global_timing :
```
No setup violations found.

No hold violations found.
1
```
**5. sky130_fd_sc_hd__ff_n40C_1v76**

Report_global_timing :
```
Setup violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS      -9.33     -9.33      0.00      0.00      0.00
TNS   -5820.90  -5820.90      0.00      0.00      0.00
NUM       1064      1064         0         0         0
---------------------------------------------------------


Hold violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS      -0.18     -0.18      0.00      0.00      0.00
TNS     -97.53    -97.53      0.00      0.00      0.00
NUM       1145      1145         0         0         0
---------------------------------------------------------

1
```
**6. sky130_fd_sc_hd__ss_100C_1v40**

Report_global_timing :
```
No setup violations found.

No hold violations found.
1
```
**7. sky130_fd_sc_hd__ss_100C_1v60**

Report_global_timing :
```
Setup violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS     -32.60    -32.60      0.00      0.00      0.00
TNS  -21164.23 -21164.23      0.00      0.00      0.00
NUM       1119      1119         0         0         0
---------------------------------------------------------


No hold violations found.
1
```
**8. sky130_fd_sc_hd__ss_n40C_1v28**

Report_global_timing :
```
No setup violations found.

No hold violations found.
1
```
**9. sky130_fd_sc_hd__ss_n40C_1v35**

Report_global_timing :
```
No setup violations found.

No hold violations found.
1
```
**10. sky130_fd_sc_hd__ss_n40C_1v40**

Report_global_timing :
```
Setup violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS     -75.16    -75.16     -0.40      0.00      0.00
TNS  -49114.48 -49114.08     -0.40      0.00      0.00
NUM       1192      1191         1         0         0
---------------------------------------------------------


No hold violations found.
1
```
**11. sky130_fd_sc_hd__ss_n40C_1v44**

Report_global_timing :
```
No setup violations found.

No hold violations found.
1
```
**12. sky130_fd_sc_hd__ss_n40C_1v76**

Report_global_timing :
```
Setup violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS     -25.84    -25.84      0.00      0.00      0.00
TNS  -16864.05 -16864.05      0.00      0.00      0.00
NUM       1117      1117         0         0         0
---------------------------------------------------------


No hold violations found.
1
```
**13. sky130_fd_sc_hd__tt_025C_1v80**

Report_global_timing :
```
Setup violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS     -14.10    -14.10      0.00      0.00      0.00
TNS   -8972.77  -8972.77      0.00      0.00      0.00
NUM       1098      1098         0         0         0
---------------------------------------------------------


Hold violations
---------------------------------------------------------
         Total  reg->reg   in->reg  reg->out   in->out
---------------------------------------------------------
WNS      -0.09     -0.09      0.00      0.00      0.00
TNS      -5.20     -5.20      0.00      0.00      0.00
NUM         69        69         0         0         0
---------------------------------------------------------

1
```

Table for Setup :
```
Corners 	WNS	TNS
ff_100C_1v65	9.9	6250.73
ff_100C_1v95	0	0
ff_n40C_1v56	13.02	8290.76
ff_n40C_1v65	0	0
ff_n40C_1v76	9.33	5820.9
ss_100C_1v40	0	0
ss_100C_1v60	32.6	21164.23
ss_n40C_1v28	0	0
ss_n40C_1v35	0	0
ss_n40C_1v40	75.16	49114.08
ss_n40C_1v44	0	0
ss_n40C_1v76	25.84	16864.05
tt_025C_1v80	14.1	8972.77
```

Graph for Setup:

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0e9e722776d778f8ca831cab639a26ac34dd07e3/PD%23day14/setup_pvt_graph.PNG">




Table for Hold:

```
Corners 	WNS	TNS
ff_100C_1v65	0.15	66.14
ff_100C_1v95	0	0
ff_n40C_1v56	0.11	10.63
ff_n40C_1v65	0	0
ff_n40C_1v76	0.18	97.53
ss_100C_1v40	0	0
sDAY-15 Inception of EDA and PDKs_100C_1v60	0	0
ss_n40C_1v28	0	0
ss_n40C_1v35	0	0
ss_n40C_1v40	0	0
ss_n40C_1v44	0	0
ss_n40C_1v76	0	0
tt_025C_1v80	0.09	5.2
```
Graph for Hold:

<img width="1085" alt="lib1" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0e9e722776d778f8ca831cab639a26ac34dd07e3/PD%23day14/hold_pvt_plot.PNG">

**Observation**
Hold violations are more prone in faster cells and setup is more prone in slower cells.
</details>

## DAY-15 Inception of EDA and PDK

<details>
<summary> Intro </summary>

An integrated circuit (IC), often referred to as simply an IC, is a comprehensive assembly of electronic circuits situated on a single, compact flat component—commonly recognized as a "chip." This chip primarily consists of semiconductor material, predominantly silicon. The customary arrangement involves mounting the integrated circuit onto a printed circuit board (PCB), thereby giving rise to a fully operational electronic system.

-->Core
A "core" in the context of integrated circuit (IC) design denotes a fundamental functional block or module. Cores are meticulously crafted to execute precise tasks or functions, and their integration with other cores and components allows for the creation of intricate ICs with diverse functionalities to serve various purposes.
-->Die
A "die" stands as a distinctive component within the context of silicon wafer intricacies, encapsulating an individual integrated circuit (IC) or chip. The silicon wafer undergoes meticulous division into multiple smaller sections, and within each of these sections resides a replicated version of the identical integrated circuit design. These segmented portions, aptly named "dies," represent miniature entities. It's noteworthy that each die, functioning as an independent entity, can operate autonomously once surgically separated from the wafer, embodying the essence of an individualized and self-sufficient chip.
-->Pads
Pads serve as the tangible external connections or terminals on the SoC. These crucial points act as the interface between the SoC and the external environment, encompassing input and output pins for linking with other electronic components, power supply pins, ground pins, and more. Positioned along the periphery of the die, pads facilitate soldering or wire connections to the SoC, playing a pivotal role in establishing and expanding the SoC's connectivity.<br>
     
*- Varieties of Pads* <br>

- Input Pads: <br>
These serve as conduits for external signals entering the IC. For instance, they might receive data inputs from sensors or user interfaces, facilitating the integration of external information.<br>

- Output Pads: <br>
Designed for transmitting signals generated within the IC to external devices or other segments of a circuit. An example includes the use of output pads to send data to a display or transmit information to another IC.<br>
- Power Pads: <br>
Essential for providing power to the IC, these pads are typically linked to the power supply voltage (VDD) and ground (GND), ensuring the energy requirements of the IC are met.<br>

- Ground Pads: <br>
Connected to the ground reference voltage (GND), ground pads play a critical role in maintaining proper functionality and reducing noise within the circuit.<br>

- No-Connect Pads: <br>
Some pads intentionally remain unconnected and are designated as "no-connect" to prevent unintended connections, ensuring the integrity and stability of the circuit.<br>

 <img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/I3.PNG"> <br>
 Contained within a QFN-48 package, denoting Quad Flat No Leads with 48 pins, this specific component boasts a dimension of 7mm by 7mm. Each of the 48 pins serves as a vital connection point, establishing interfaces with various components or packages integrated onto the design board. The central focal point within this package is typically occupied by a microchip. The pins situated on the periphery, commonly termed "outbounds," play a pivotal role in orchestrating the seamless exchange of data between the external world and the encapsulated chip, thus contributing significantly to the functionality of the entire package.
</details>


<details>
	<summary> RTL to GDS</summary>
	 <img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/RTL%20to%20GDS.PNG"> <br>
	
 **->Synthesis:-**
 synthesis is a critical step that involves the transformation of a high-level hardware description of a digital circuit, often articulated in a hardware description language (HDL) like VHDL or Verilog. This transformation leads to the creation of a netlist, a representation encompassing both the logical and physical components essential for shaping the actual integrated circuit.<br>

During this intricate process, standard cells emerge as fundamental building blocks. These cells boast a consistent layout, and each one is depicted in various perspectives, including electrical, HDL, and SPICE models. Notably, standard cells offer both abstract and detailed layout views. These versatile components play a pivotal role in the synthesis journey, contributing significantly to the construction of the final layout of the integrated circuit. Their regularity and adaptability make them indispensable in achieving optimal functionality and efficiency in the overall design. <br><br>

**->Floorplan:-**
Floor planning, a pivotal early-stage process in VLSI design, entails defining the physical layout and strategic placement of functional blocks, modules, and components within an integrated circuit (IC). This meticulous planning is crucial for optimizing various factors such as chip area, signal routing, power distribution, and thermal management.<br>

*Chip Floorplan:*<br>

The term "Chip Floorplan" specifically refers to the meticulously designed layout for an integrated circuit (IC) or semiconductor chip. This layout, presented as a diagram, intricately details the physical arrangement and placement of diverse components, functional blocks, and critical elements within the silicon area of the chip.<br><br>

*Macro Floorplan:*<br>

In semiconductor and integrated circuit (IC) design, a "Macro Floorplan" stands as a distinct type of floorplan. This is particularly utilized in the context of macros, which are predefined and pre-characterized functional blocks or modules within an IC, each performing a specific function. Macros can encompass anything from processor cores to memory blocks, representing complex building blocks strategically positioned within the IC.<br><br>

*Power Planning :*<br>

Power planning in VLSI design is a critical facet of semiconductor chip design, focusing on the management and distribution of electrical power within the IC. Effective power planning is indispensable for achieving reliable and efficient operation while minimizing power consumption. This aspect plays a crucial role in the overall success of the VLSI design by ensuring optimal power delivery and consumption throughout the integrated circuit.<br><br>

**->Placement:-**

Placement emerges as a pivotal step in the physical design process of crafting integrated circuits (ICs). This intricate phase revolves around strategically determining the optimal locations for each logical cell, commonly known as standard cells, within the silicon area of the chip. The effectiveness of this placement profoundly influences critical factors such as performance, power consumption, and chip area utilization.<br>

*Objectives of Placement:*

The primary goal of the placement process is to orchestrate standard cells in a configuration that achieves multiple objectives. These include minimizing the total wirelength, which refers to the aggregate length of wires connecting the cells. Additionally, effective placement aims to optimize chip area utilization and adhere to various design constraints, encompassing crucial aspects such as timing, power, and manufacturability.<br>

In summary, placement is a meticulous and strategic endeavor in the IC design journey, aiming to strike a delicate balance that enhances performance, reduces power consumption, optimizes chip area utilization, and meets stringent design constraints to ensure the overall success and efficiency of the integrated circuit.<br><br>


**-> Clock Tree Synthesis (CTS):-** 

CTS, an acronym for "Clock Tree Synthesis," holds a pivotal role in the intricate process of physically designing integrated circuits (ICs). It specifically focuses on the generation and optimization of the clock distribution network within the chip.<br>

*Primary Objective of CTS:* <br>
The primary goal of CTS is to ensure the efficient and reliable distribution of clock signals to all flip-flops and sequential elements within the IC. This involves minimizing clock skew, the variation in arrival times of clock signals at different points, and meeting the stringent timing constraints crucial for the synchronized operation of the chip.<br>

*Significance in VLSI Design:*<br>
Clock Tree Synthesis is deemed a critical step in VLSI design due to its profound impact on the overall performance, power consumption, and reliability of integrated circuits. A well-designed clock distribution network enhances the chip's efficiency and mitigates issues related to timing discrepancies.<br>

*Automation and Optimization:*<br>
To tackle the complexities of modern and high-performance ICs, advanced algorithms and tools are employed to automate and optimize the CTS process. These tools play a key role in achieving precision and efficiency in the distribution of clock signals, contributing to the success of the overall VLSI design.<br>

In essence, Clock Tree Synthesis stands as a fundamental and meticulous phase in VLSI design, ensuring that the heartbeat of the chip—the clock signals—is orchestrated with precision, impacting its performance, power efficiency, and reliability.<br><br>


**-> Routing:-**
Routing, within the context of Very Large Scale Integration (VLSI) design, stands as a foundational step in the intricate process of physically crafting integrated circuits (ICs). This critical phase involves the strategic generation of physical connections, employing metal traces or wires, that interlink the diverse components and logic elements situated on the chip.

*Efficient Signal and Power Routing:* <br>
The core objective of routing is to establish efficient pathways for the transmission of data signals, control signals, and power throughout the IC. This meticulous interconnection process ensures that the intricate web of signals and power distribution adheres to design constraints, such as timing, power consumption, and manufacturability.<br>

*Impact on IC Performance:* <br>
Routing's significance reverberates in its critical role in determining the overall performance of the IC. The efficiency of data transmission, the accuracy of control signal propagation, and the reliability of power distribution are all contingent on the effectiveness of the routing strategy implemented.<br>

*Key Determinants:* <br>
Routing, being a linchpin of the VLSI design process, significantly influences the power consumption, performance metrics, and overall functionality of the IC. The intricacies of the routing decisions made during this phase ripple through the entirety of the IC's design and functionality.<br>

In conclusion, routing in VLSI design is not merely the physical connection of components; it is a strategic and pivotal phase that intricately weaves the pathways for signals and power, shaping the backbone of an efficiently functioning integrated circuit.<br><br>


**-> Signoff:-**

Sign Off marks the conclusive stage in the design process just before the design is dispatched for fabrication or manufacturing. This pivotal phase involves an exhaustive set of checks, analyses, and validations to guarantee that the integrated circuit (IC) design aligns with all requisite criteria, constraints, and specifications before proceeding to the foundry for manufacturing. <br>

*Comprehensive Validation Process:* <br>
At Sign Off, the design undergoes a meticulous validation process encompassing checks for functionality, performance, and adherence to design constraints. This all-encompassing examination ensures that every facet of the IC design is thoroughly reviewed and approved before transitioning to the manufacturing phase. <br>

*Critical Nature of Sign Off:* <br>
The Sign Off stage assumes paramount importance as any undetected design errors or issues at this juncture can potentially lead to costly and time-consuming problems. These issues might manifest during subsequent phases of the manufacturing process or even after the ICs are in operation, underscoring the critical nature of a rigorous and comprehensive Sign Off. <br>

*Preventing Future Complications:* <br>
By addressing potential design discrepancies and ensuring alignment with specifications, Sign Off serves as a preventive measure. It aims to circumvent complications that could arise in the manufacturing process or during the operational life of the ICs, safeguarding against disruptions and optimizing the overall efficiency and reliability of the integrated circuits. <br>

In conclusion, Sign Off is not just a procedural formality; it is the last line of defense against design anomalies, offering assurance that the integrated circuit is ready for the next stages of manufacturing and operational deployment. <br><br>


**-> Pysical verification:-**

Physical Verification stands as a crucial phase in the design process of integrated circuits (ICs), involving a meticulous series of checks and analyses. Its primary objective is to confirm that the physical layout of the IC aligns with specified design rules, constraints, and manufacturing prerequisites. This scrutiny is essential for ensuring the manufacturability, functionality, and reliability of the IC design before it advances to the fabrication stage. <br>

*Design Rule Checking (DRC):* <br>

*Geometry Checks:* <br>
DRC meticulously validates that the layout strictly adheres to the design rules set by the foundry. This encompasses scrutinizing minimum feature sizes, spacing requirements, and the width and spacing of metal layers, along with other geometric constraints. <br>
*Layer-Specific Rules:* <br>
Different layers within the IC come with specific design rules. DRC conducts comprehensive checks to ensure compliance across all layers, including metal, polysilicon, diffusion, and more. <br><br>


*Electrical Rule Checking (ERC):* <br>
*Electrical Connectivity:* <br>
ERC ensures the absence of electrical shorts or opens in the layout, verifying that the actual connections align with the intended connectivity outlined in the schematic.<br>
*Antenna Checking:* <br>
ERC extends its scrutiny to charge buildup issues, known as antenna effects, which may arise during the manufacturing processes of deposition and etching. <br><br>


*Layout Versus Schematic (LVS) Verification:* <br>
*Netlist Consistency:* <br>
LVS performs a meticulous comparison between the layout netlist and the schematic netlist, ensuring their equivalence. Any disparities are flagged for resolution.<br>
*Parasitic Extraction:* <br>
Parasitic elements like capacitance and resistance are extracted from the layout and cross-referenced with the schematic to verify electrical equivalence.<br>
In summary, Physical Verification acts as the gatekeeper, validating the precision and compliance of the IC design with stringent rules and requirements. By addressing geometric, electrical, and schematic considerations, this phase plays a pivotal role in fortifying the IC's journey from design to fabrication.

</details>


<details> 
	<summary>LAB</summary>
	
**OpenLane :-**
OpenLane stands out as a trailblazing and open-source toolchain, empowering the creation of custom Application-Specific Integrated Circuits (ASICs). Widely recognized in the semiconductor realm, it's celebrated for making chip design accessible to all. OpenLane boasts a comprehensive suite of EDA (Electronic Design Automation) tools and scripts, smoothing the journey from RTL (Register Transfer Level) to GDSII (Graphic Design System II) in ASIC design. It's not just a tool—it's a movement, championing accessibility, collaboration, and personalized circuit creation. This tool gives developers, from hobbyists to seasoned pros, the keys to design and produce custom chips tailored to their unique specifications. OpenLane's transparent, community-driven ethos is a breath of fresh air, propelling ASIC design forward and breaking down the traditionally high barriers to entry in this field.<br>

--> Commands:- <br>

```ruby
/flow.tcl -interactive
package require openlane 0.9
prep -design picorv32a
run_synthesis
```
<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/1."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/2."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/3."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/4."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/5."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/6."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/7."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/8."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/9."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/9.b"> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/10."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/11."> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/12.png"> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/e9b787e91e6822ef6b2309a60409e738b1915e83/DAY-15/12."> <br>
-> before we run synthesis we can see runs is created here after setting up the design,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/8f17441d40f6e37b18b22a7ba532803dcabcb5a1/DAY-15/13%20before%20we%20run%20synthesis%20we%20can%20see%20runs%20is%20created%20here%20after%20setting%20up%20the%20design.png"> <br>
-> we can see in runs just now one file is created wrt to current time,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/8f17441d40f6e37b18b22a7ba532803dcabcb5a1/DAY-15/14%20we%20can%20see%20in%20runs%20just%20now%20one%20file%20is%20created%20wrt%20to%20current%20time.png"> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/8f17441d40f6e37b18b22a7ba532803dcabcb5a1/DAY-15/15.png"> <br>
-> by commanding less merged.lef we can see all the content which is about metal layer,vias,etc,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/8f17441d40f6e37b18b22a7ba532803dcabcb5a1/DAY-15/16.%20by%20commandinf%20less%20merged.lef%20we%20can%20see%20all%20the%20content%20which%20is%20about%20metal%20layer%2Cvias%2Cetc.png"> <br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/8f17441d40f6e37b18b22a7ba532803dcabcb5a1/DAY-15/16.png"> <br>
-->  since we havn't done synthesis yet so we can see every othere info is empty,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/8f17441d40f6e37b18b22a7ba532803dcabcb5a1/DAY-15/18.%20since%20we%20havn't%20done%20synthesis%20yet%20so%20we%20can%20every%20othere%20info%20is%20empty.png"> <br>
 --> we haven't done synthesis yet so we can see all the other result and stage reports and synthesis reports are empty,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/8f17441d40f6e37b18b22a7ba532803dcabcb5a1/DAY-15/19.%20we%20haven't%20done%20synthesis%20yet%20so%20we%20can%20all%20the%20other%20reports%20and%20synthesis%20reports%20are%20empty.png"> <br>
--> config.tcl,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/8f17441d40f6e37b18b22a7ba532803dcabcb5a1/DAY-15/20.%20config.tcl%20.png"> <br>
--> Giving the commands to run synthesis,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/32609b61099912cfe7897f3f52793314fc779b53/DAY-15/22.%20giving%20the%20command%20to%20run%20synthesis.png"> <br>
--> Can see, synthesis is done,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/32609b61099912cfe7897f3f52793314fc779b53/DAY-15/23.%20synthesis%20done.png"> <br>
--> From synthesis report, we can calculate flop ratio by the use of no. of DFF and total no. of cells,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/32609b61099912cfe7897f3f52793314fc779b53/DAY-15/24.%20from%20synthesis%20report%20calculate%20flop%20ratio%20by%20the%20use%20of%20no.%20of%20DFF%20and%20total%20no.%20of%20cells.png"> <br>
--> Earlier it was empty but now after synthesis we can see the netlist is generated,<br>
<img width="800"  alt="netlist" src="https://github.com/gohilnihar07/Samsungpdtraining/blob/32609b61099912cfe7897f3f52793314fc779b53/DAY-15/25.%20earlier%20it%20was%20empty%20but%20now%20after%20synthesis%20we%20can%20see%20the%20netlist%20is%20generated.png"> <br><br>

- The number of d flip flops = 1613 <br> 
- Total Number of cells = 14876 <br> 
- *D flip flop ratio* = 1613/14876 => **0.108429** or In percentage **10.8429%** <br> 


</details>

## DAY-16 Introduction to Library cells

<details>
 <summary>Chip Floorplanning Considerations </summary>
 
1. *Utilization Factor* - The utilization factor in floorplanning measures how efficiently the available chip area is occupied by functional blocks or logic elements in an integrated circuit design. Designers aim to maximize this factor while considering various constraints and trade-offs to achieve a well-balanced and high-quality chip layout. It is ratio of area occupied by the netlist and Total core area.
Practically 50% - 60% is core utilization. 

2. *Aspect Ratio* - The aspect ratio in floor planning defines the physical shape of an integrated circuit layout by specifying the ratio of Height of core and width of core. It is a critical parameter that influences chip design and is considered alongside various design requirements and constraints to achieve optimal results.
- If Aspect Ratio is 1 that signifies square chip other than 1 signifies rectangular chip.

3. *Preplaced cells* - Preplaced cells refer to a set of specific functional blocks or standard cells that are manually or automatically placed at predetermined locations within the chip layout. These cells are typically strategically positioned before the automated placement and routing processes are executed for the rest of the design.

4. *Decoupling Capacitors* - Decoupling capacitors are an integral part of chip design, providing a critical role in maintaining electrical stability and performance. Their proper selection, placement, and configuration are essential for achieving reliable and noise-free operation in integrated circuits. In complex chips, multiple decoupling capacitors of varying capacitance values are often used in parallel. This combination helps filter noise across a broader frequency spectrum.

5. *Tap cells* - Tap cells are a fundamental component of IC design, especially in CMOS technology, as they serve to prevent latch-up by isolating transistor regions and providing a safe path for unwanted substrate currents to flow. Their proper placement and configuration are critical to ensure the reliable and stable operation of integrated circuits.

6. *Power planning* - Power planning is a critical aspect of the ASIC (Application-Specific Integrated Circuit) design flow, focused on managing and distributing power throughout the chip to ensure reliable and efficient operation. Proper power planning is essential for controlling power consumption, minimizing voltage drops, and preventing potential issues such as overheating and electromigration.
    - Installing Decap to every element is not feasible so a Power supply is needed. Ground Bounce and Voltage droop may occur due to signal integrity issues.

7. *Ground bounce* -  Ground bounce is a transient voltage increase in the ground signal within an integrated circuit, primarily caused by the inductance and resistance of ground connections. It can lead to signal integrity issues and incorrect readings in digital circuits. Proper chip design techniques, including decoupling capacitors and careful power distribution network design, are essential to mitigate and control ground bounce.

8. *Voltage droop* - voltage droop is a temporary reduction in supply voltage that can occur due to rapid changes in current demand or parasitic elements in the power distribution network. It can have detrimental effects on chip operation and performance, so designers employ various techniques to mitigate and prevent voltage droop and ensure reliable and stable operation.

9. *Pin Placement* - Pin placement, also known as I/O (Input/Output) placement, is a critical step in the physical design process of creating integrated circuits (ICs). It involves determining the locations and assignments of input and output pins on the chip's package or footprint. Proper pin placement is crucial for ensuring signal integrity, ease of manufacturing, and compatibility with external interfaces. Designers use various software tools and simulations to aid in pin placement and signal routing.
    - It is a crucial step in the physical design process and requires careful consideration of signal integrity, I/O requirements, external interfaces, power distribution, thermal management, manufacturability, and compliance with standards. Proper pin placement is essential for the successful operation and performance of the integrated circuit.

Below screenshot shows the Pin Placement view.<br>
<img width="600" alt="pins" src="https://github.com/Sidv005/Samsung-PD-Training/blob/2d060ce5ce81b4cb85aa324fff33b40b47b55841/SamsungPD_training/day2_openlane/pins.PNG"><br>

- These pins are placed in random order.
- Clock pins are larger because they need to send the signals to all flip flops.
</details>

<details>
 <summary>Labs on Floorplan using Openlane </summary>
1. Below image shows the readme file prensent in openlane configuration. Here variables or switches need to be observed for every step.<br> 
<img width="600" alt="readme" src="https://github.com/Sidv005/Samsung-PD-Training/blob/4df9a2a4524c203e635bfd9a264ed4ccaee39fbf/SamsungPD_training/day2_openlane/readme.png"><br>
	
2. Below image shows the floorplan.tcl file which is prensent in openlane configuration. Here default values are set like FP_IO_MODE, VMETAL, HMETAL etc..<br> 
<img width="600" alt="fp_tcl" src="https://github.com/Sidv005/Samsung-PD-Training/blob/4df9a2a4524c203e635bfd9a264ed4ccaee39fbf/SamsungPD_training/day2_openlane/fp_tcl.png"><br>

3. Following screenshot displays the **run_floorplan**. Here observe that .def file is created after succesfull floorplan. <br>
<img width="600" alt="run_fp" src="https://github.com/Sidv005/Samsung-PD-Training/blob/4df9a2a4524c203e635bfd9a264ed4ccaee39fbf/SamsungPD_training/day2_openlane/run_fp.png"><br>

4. Following screenshot displays the config.tcl generated after floorplan. Here observe following parameters after succesfull floorplan.
   - HMETAL = 4
   - VMETAL = 3
   - CORE UTILIZATION = 35
   - ASPECT RATIO = 1 <br>
<img width="600" alt="fp_config_hmetal" src="https://github.com/Sidv005/Samsung-PD-Training/blob/4df9a2a4524c203e635bfd9a264ed4ccaee39fbf/SamsungPD_training/day2_openlane/fp_config_hmetal.png"><br>

5. Following screenshot displays the .def file generated where Die area needs to be observed which can be converted to micro meters.<br> 
<img width="600" alt="fp_picorv_def(area)" src="https://github.com/Sidv005/Samsung-PD-Training/blob/4df9a2a4524c203e635bfd9a264ed4ccaee39fbf/SamsungPD_training/day2_openlane/fp_picorv_def(area).png"><br>

6. Actual Layout of Floorplan can viewd using Magic Tool. Below image shows the layout obtained after floorplan.<br>
<img width="600" alt="fp_layout" src="https://github.com/Sidv005/Samsung-PD-Training/blob/4df9a2a4524c203e635bfd9a264ed4ccaee39fbf/SamsungPD_training/day2_openlane/fp_layout.png"><br>

7. Below image shows the tkcon 2.3 Main Window where metal layer can be observed. Other cells like DECAP and TAP cells can also be observed.<br>
<img width="600" alt="fp_layout_tckon" src="https://github.com/Sidv005/Samsung-PD-Training/blob/4df9a2a4524c203e635bfd9a264ed4ccaee39fbf/SamsungPD_training/day2_openlane/fp_layout_tckon.png"><br>

</details>

<details>
 <summary>Netlist Binding and intial place design </summary>

1. **Netlist binding** is the process of associating or "binding" logical cells from a high-level or gate-level representation (the logical netlist) of the design to physical locations on the chip. It essentially maps the functional blocks or gates of the design to specific locations on the chip's layout.
- Libraries have different flavors of cells of varying Height and width. According to applications netlist is binded with those particular cells.
-  Netlist binding takes into account timing constraints, ensuring that cells are placed to meet required signal propagation delays and clock requirements.
- An effective netlist binding strategy considers the routing requirements, aiming to minimize wirelengths and congestion while allowing for efficient interconnections between cells.

2. **Initial placement** is the process of positioning the logical cells or blocks on the chip's floorplan, considering their netlist bindings. It sets the initial positions of cells, providing a starting point for subsequent optimization steps like detailed placement and routing.
- Initial placement considers timing constraints and may optimize cell positions to meet critical timing requirements.
- Initial placement is often an iterative process that may require feedback from subsequent steps in the design flow. Designers may refine the placement based on feedback from routing and timing analysis.
- Automated placement tools are commonly used to perform initial placement based on design constraints and objectives.
</details>

<details>
 <summary>Final placement optimization </summary>

- Consider 4 circuits of different colors like orang, yellow, blue, green containing FF1 - 1 - 2 - FF2 cells with different Data in and out pins.
- Different inputs pins are Din1, Din2, Din3, Din4.
- Different output pins are Dout1, Dout2, Dout3, Dout4.
- These are initially placed in the following manner as shown in figure.<br> 
<img width="700" alt="ini_place" src="https://github.com/Sidv005/Samsung-PD-Training/blob/8bfdc1f95926ab565a2000317be796b778cb987d/SamsungPD_training/day2_openlane/ini_place.PNG"><br>

- But here it requires repeators to avoid signal integrity issues whle propogating the data through the path.
- Hence Buffers are used in between the paths to mitigate the issues.
- Below figure shows the optimized placement.<br>
<img width="700" alt="final_place" src="https://github.com/Sidv005/Samsung-PD-Training/blob/8841b8b03e9e0e49635d432c8ffa36e086c33d00/SamsungPD_training/day2_openlane/final_place.PNG"><br>
</details>

<details>
 <summary> Labs on Placement </summary>
	
- Below screenshot shows the execution of **run_placement** and displays the successfull placement of picorv32a design.<br>
<img width="600" alt="run_place" src="https://github.com/Sidv005/Samsung-PD-Training/blob/8841b8b03e9e0e49635d432c8ffa36e086c33d00/SamsungPD_training/day2_openlane/run_place.png"><br>

From above figure we can see that picorv32a.placement.def file is generated.

- Actual layout after placment process is seen in below figure.<br>
<img width="600" alt="place_layout" src="https://github.com/Sidv005/Samsung-PD-Training/blob/8841b8b03e9e0e49635d432c8ffa36e086c33d00/SamsungPD_training/day2_openlane/place_layout.png"><br>

- In Placement step all standard cells are placed after zooming in we can observe those standard cells placed in rows.
  
- Below figure shows the layout view after zooming in to display the standard cells.<br>
<img width="600" alt="place_layout2" src="https://github.com/Sidv005/Samsung-PD-Training/blob/8841b8b03e9e0e49635d432c8ffa36e086c33d00/SamsungPD_training/day2_openlane/place_layout2.png"><br>
</details>

## DAY-17 Design and Characterise Std Cell

<details>
 <summary>IO placer revised </summary>
 We can change the allignment of the Input/output pins by the changing the FP_IO_MODE. By Default it is set to 1. This can be changed by using the below command:
 ```ruby
 set ::env(FP_IO_MODE) 2
 ```
 Before changing the mode the layout in magic
 
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a2c63fc23a95a6da513314375dcf6e950291c53d/day17/fp_pin_uneven2.png">

After changing the mode 2


<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a2c63fc23a95a6da513314375dcf6e950291c53d/day17/fp_pin_uneven_zoom.png">
</details>

<details>
 <summary>Spice Simulation for CMOS Inverter </summary>

- The First task is to create a SPICE Deck file which contains the connectivity information of netlist ,inputs provided, tap points to view outputs.The SPICE is created by defining component connectivity, component values, identifying the nodes and naming them.
- A substrate is a component or pin that requires connectivity information and can be used to adjust the threshold voltages of NMOS and PMOS transistors. The orientation of the substrate pin differs between NMOS and PMOS symbols. Determining the value of output load capacitance involves extensive computational analysis.
- To define the component values for PMOS and NMOS, specifically the W/L ratios (e.g., 0.375μ/0.25μ), it is often assumed that they share the same values, even though PMOS should ideally be twice the size of NMOS. The specified output capacitance is typically 10fF, and the applied gate voltage is commonly a multiple of the channel length, such as 2.5V. A node is identified when a component is positioned between two nodes.

The defination of components f an CMOS Inverter is as below:
```
M1 out in vdd vdd pmos W=0.375u L=0.25u
M2 out in 0 0 nmos W=0.375u W=0.25u
cload out 0 10f
Vdd vdd 0 2.5
Vin in 0 2.5
```
- M1 component is the PMOS whose drain is connected to OUT , Gate is connected to IN , Substrate and Source are connected to vdd.It also contains the W/L ratio.
- M2 component is the NMOS whose drain is connected to OUT , Gate is connected to IN , Substrate and Source are connected to 0.It also contains the W/L ratio.
- The load capacitance is connected between out port and ground and the value is 10fF. Similarly, the supply voltages are connected between groud and respective nodes and the voltage is 2.5V.


The Simulation commands are as follows:
```
.op
.dc Vin 0 2.5 0.05
.LIB "tsmc_025um_model.mod" CMOS_MODELS
.end
```
This command implies that gate voltage is varied from 0 to 2.5V in steps of 0.05V. This is done to note the output characteristics with respect to input voltage. The model file must be described as follows that contains the complete model description of NMOS and PMOS of the length.

The layout of the CMOS inverter is as follows:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8d6281eb94f7a00dbf29eca8f6ab5fe148d1644c/day17/layout_inv.png">

Below image shows that poly is connected to PMOS and NMOS:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8d6281eb94f7a00dbf29eca8f6ab5fe148d1644c/day17/layout_tckon(n%2Cp).png">

Following commands are runned in tckon Main window:
```
extract all
ext2spice cthresh 0 rthresh 0
ext2spice
```
The spice netlist generated as shown below.
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8d6281eb94f7a00dbf29eca8f6ab5fe148d1644c/day17/spice_gen.png">
</details>

<details>
 <summary>16 Mask CMOS Fabricaion </summary>

 The manufacturing process involves several key steps:

1.Substrate Preparation: Commences with a silicon wafer as the initial material, which undergoes rigorous cleaning and pre-processing to prepare it for further stages.

2.Gate Oxide Formation (Mask 1): A thin layer of silicon dioxide (SiO2) is either grown or deposited onto the silicon wafer. This layer functions as the gate dielectric.

3.Polysilicon Gate Formation (Mask 2): Polysilicon is deposited and precisely patterned to create gate electrodes for both NMOS and PMOS transistors.

4.N-Well and P-Well Formation (Mask 3): The creation of regions for NMOS and PMOS transistors involves the use of n-type and p-type ion implantation processes.

5.Source and Drain Formation (Masks 4 and 5): Ion implantation, followed by annealing processes, is employed to define the source and drain regions of the transistors.

6.Gate Spacer and Silicidation (Masks 6 and 7): Insulating spacers are introduced around the gate structures, and metal silicide is formed on the source and drain regions to reduce contact resistance.

7.Interlayer Dielectric (ILD) Deposition (Mask 8): A layer of insulating material, typically silicon dioxide, is deposited and planarized to create a level surface for metal interconnections.

8.Contact and Via Formation (Masks 9 and 10): Etching processes create contact holes through the ILD, facilitating connections between metal interconnects and the underlying transistor nodes.

9.Metal Layer 1 (Mask 11): The formation of metal lines and interconnects allows for connections between different parts of the circuit.

10.Intermetal Dielectric (IMD) Deposition (Mask 12): Another insulating layer is deposited to provide separation between metal layers and isolation.

11.Metal Layer 2 (Mask 13): Additional layers of metal interconnects may be added as required.

13.Passivation Layer (Mask 14): A protective layer is deposited to shield the underlying layers and offer electrical insulation.

14.Pad Opening (Mask 15): Openings are created in the passivation layer to enable wire bonding or solder bump connections.

15.Testing and Packaging (Mask 16): Chips undergo rigorous testing for functionality and performance, followed by packaging to prepare them for their final use.

This comprehensive process forms the foundation of semiconductor device manufacturing, allowing for the creation of integrated circuits with intricate electronic functionalities.

*CMOS Inverter layout in Magic*

When we select nmos and pmos box in Magic and run what command in tckon window we obtain below image:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0bf8ca693816a80297bc88fc4881895936705762/day17/layout_tckon(n%2Cp).png">

The connection of Y to both the drain terminals of the PMOS and NMOS transistors is depicted as illustrated in the figure.
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0bf8ca693816a80297bc88fc4881895936705762/day17/layout_Y_con.png">

The connections of the PMOS source and NMOS source are established as follows:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0bf8ca693816a80297bc88fc4881895936705762/day17/layout_NMOS_source.png">
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0bf8ca693816a80297bc88fc4881895936705762/day17/layout_PMOS_source.png">

When we delete some layers we get drc errors same is illustrated in below image:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0bf8ca693816a80297bc88fc4881895936705762/day17/layout_Drc.png">

Below image is obtained after removing Drc Errors:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0bf8ca693816a80297bc88fc4881895936705762/day17/layout_inv.png">
</details>

<details>
 <summary>Labs on DRC </summary>
First we need to clone the open_pdks.git from RTimothyEdwards.
Initially, it is necessary to duplicate the 'open_pdks.git' repository from RTimothyEdwards. Now all the magic files is with us. We will look for mtal3.mag. So metal3.mag file now with us.

cif see VIA2 command is runned in tckon window to obtain metal 3 contacts.

When we see the layout of metal3.mag in Magic it is the same as shown below.
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f33836f754e4b52dc0a9d064fb76344655f8316b/day17/layout_metal3.png">

Now width and height of the box is shown in below image which determine distance between the metal contact and metal layer boundary.
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f33836f754e4b52dc0a9d064fb76344655f8316b/day17/layout_metal3_tckon.png">


Now poly.mag is loaded in Magic Following image shows the tckon window.
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f33836f754e4b52dc0a9d064fb76344655f8316b/day17/layout_poly_tckon.png">



Below image of tckon window shows the width box in poly.
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f33836f754e4b52dc0a9d064fb76344655f8316b/day17/layout_poly_tckon_box.png">

Now sky130A.tech file is edited by adding allpolynonres in poly.9. After editting we load the tech file and check drc using drc check in tckon window. This is shown in below image.

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/f33836f754e4b52dc0a9d064fb76344655f8316b/day17/tech_edit1_layout.png">
Here we can obsevre that no drc error is occuring. Hence we succesfully fixed poly.9 error.
</details>

## DAY-18 Pre-layout timing analysis and importance of good clock tree
<details>
<summary> Timing modelling using delay tables</summary>

<details>
 <summary>Lab 1: Lab steps to convert grid info to track info </summary>
Library Exchange Format (LEF)

A specification in which representing the physical layout of an integrated circuit in an ASCII format

It includes design rules and abstract information about the standard cells

LEF only has basic information required at that level to serve the purpose of the concerned CAD tool

Containing information on input, output, power and group port, does not consists logic path information

Objective: extract LEF file from .mag file and then plug the file into the picorv32a flow (previous is standard cell library)

Main guidelines:

The input and output ports must lie on the intersection of the vertical and horizontal tracks
The width of standard cell should be on the track pitch, and the height should be on the track vertical pitch.
```
~/Desktop/work/tools/openlane_working_dir/pdks/sky130A/libs.tech/openlane/sky130_fd_sc_hd

vim tracks.info

cd ~/Desktop/work/tools/openlane_working_dir/openlane/vsdstdcelldesign

magic -T sky130A.tech sky130_inv.mag
```
- Track information (using during routing stage) routes can go over the track/layer (metal traces)

- Set the grid based on the tracks.info (grid) converted the track into grid
- Ports are on the intersection of the horizontal and vertical tracks. It ensures that the routes can reach the ports from x and y direction.
- Verified that both input and output ports have fulfilled the guideline where input and output ports lies at the intersection of horizontal and vertical tracks
Note: press "g" to enable grid (zoom in to see the grid)

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a52910ad69aadb74856846c3c22e01d42bdf0450/PD%23day18/grid_old.png">

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a52910ad69aadb74856846c3c22e01d42bdf0450/PD%23day18/grid_new.png">
</details>

<details>
 <summary>Lab 2: Lab steps to convert magic layout to std cell LEF </summary>

 We need to only define layers, not ports in layout
- Ports definitions are required when we want to extract LEF file
- Ports will be defined as pins of a macro
How to define ports?

Select port --> edit --> Text --> fill those required information
Note: For A; and Y in locali while for VPWR and VGND in metal1

*Extract the LEF file*
```
In tkcon

save sky130A_prakhar_inv.mag
```
Checking saved file:
```
cd ~/Desktop/work/tools/openlane_working_dir/openlane/vsdstdcelldesign
ls
magic -T sky130A.tech sky130_prakhar_inv.mag
lef write
vim sky130_prakhar_inv.lef
```
Prakha_inv:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/3d630763a3110b04170c14b251f8753790a4c902/PD%23day18/inv_prakhar.png">

Lef file
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a52910ad69aadb74856846c3c22e01d42bdf0450/PD%23day18/after_lef_write.png">
</details>

<details>
 <summary>Lab 3: Introduction to timing libs and steps to include new cell in synthesis</summary>

```
cd ~/Desktop/work/tools/openlane_working_dir/openlane/vsdstdcelldesign
cp sky130A_vsdinv.lef ~/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/src
cd ~/Desktop/work/tools/openlane_working_dir/openlane/vsdstdcelldesign/libs
cp sky130_fd_sc_hd__* ~/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/src
cd ~/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/
vim config.tcl
```

Modifying config.tcl file
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a52910ad69aadb74856846c3c22e01d42bdf0450/PD%23day18/lines_added_in_config.png">

```
cd ~/Desktop/work/tools/openlane_working_dir/openlane
make mount
./flow.tcl -interactive
package require openlane 0.9
prep -design picorv32a -tag <run_name> -overwrite      (Check run date at ls ~/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/runs)
set lefs [glob $::env(DESIGN_DIR)/src/*.lef]
add_lefs -src $lefs
run_synthesis
```
Successfully invoke openlane and doing synthesis

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a52910ad69aadb74856846c3c22e01d42bdf0450/PD%23day18/synth_1.png">
</details>

 <details>
 <summary>Theory : Introduction to delay tables and its usage </summary>

*Introduction to delay tables*
- With the use of gates for clock nets, such as shown in the below figure, which is the method known as clock gating, we can ensure no dynamic switching and short circuit power consumed by the clock tree, during the time the clock gets gated.

- We need to look into the timing characteristics of the buffer, in the case where we want to swap out the buffer for a gate.
- For each level of buffering, we should have an identical buffer being used, and each node should be driving the same node.
- Keep in mind that the load at the output will be varying, and since the load of one buffer is varying, the input transition of the following buffer will also vary.
- This means that we will have a variety of delays.
- The delay table is characterized based on varying the input transition and output load of a cell, against the delay of that cell.
- Each cell will have its own delay table for different sizes and threshold tables.


*Delay table usage*

- Each type of cell will be having its own individual delay table, as the internal pmos and nmos width/length ratio gets varied, the resistance changes, then RC constant gets varied as well, meaning the delay of each cell gets varied.
- The values of delay which are not available in the table are extrapolated based on the given data.
- Similarly, the ways on how we have a delay table, we will also have a characterization table for input transition.
- The latency at the endpoints will be the sum of the delays of each individual cell in that path.
- The total skew value between two endpoints will be non-zero if the output load driven for a cell is varied, meaning different delay numbers are seen between endpoints, this is why it is preferred to have the nodes at each level driving the same load.
- Another case in which we can retain the skew to be zero in the presence of varied load, is by using a different buffer size at the same level that can achieve the same level of delay as the other buffer in same level based on its delay table.
- These are factors which should be looked into in the early stages of the clock tree design stage.
- Now we must look into power aware CTS, where we have to consider endpoints which are only active under certain conditions.
- In this case, we do not need to propagate the clock into those cells during the period of inactivity.
![214765256-2979c5c0-b2a9-41ab-b311-9e3cfb33a076](https://github.com/Luffy-7744/Samsung-PD-Training-/assets/142480553/9d2cd519-8241-4a38-a006-1c841689a2d6)
</details>

<details>
<summary>Lab 4: Lab steps to configure synthesis settings to fix slack and include prakhar_inv</summary>
	 
```
cd ~/Desktop/work/tools/openlane_working_dir/openlane/configuration
vim README.md
```
- SYNTH_STRATEGY: control the area and timing
- SYNTH_BUFFERING: control if we want to buffer high fanout net
- SYNTH_SIZING: control in cell sizing instead of buffering
- SYNTH_DRIVING_CELL: ensure more drive strength cell to drive input

In openlane terminal:
```
echo $::env(SYNTH_STRATEGY)
set ::env(SYNTH_STRATEGY) "DELAY 0"
echo $::env(SYNTH_STRATEGY)
echo $::env(SYNTH_BUFFERING)
echo $::env(SYNTH_SIZING)
set ::env(SYNTH_SIZING) 1
echo $::env(SYNTH_SIZING)
echo $::env(SYNTH_DRIVING_CELL)
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/3d630763a3110b04170c14b251f8753790a4c902/PD%23day18/set_env_synth.png">

With SYNTH_STRATEGY of Delay 0, the tool will focus more on optimizing/minimizing the delay, index can be 0 to 3 where 3 is the most optimized for timing (sacrificing more area).
SYNTH_BUFFERING of 1 ensures cell buffer will be used on high fanout cells to reduce delay due to high capacitance load.
SYNTH_SIZING of 1 will enable cell sizing where cell will be upsize or downsized as needed to meet timing.
SYNTH_DRIVING_CELL is the cell used to drive the input ports and is vital for cells with a lot of fan-outs since it needs higher drive strength (larger driving cell needed).

Synthesis Before Removing old file:

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/a52910ad69aadb74856846c3c22e01d42bdf0450/PD%23day18/synth_1.png">

Removing old result:
```
cd ~/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/runs/results/synthesis
rm -rf picorv32a.synthesis.v
```

In openlane terminal:
```
run_synthesis
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/3d630763a3110b04170c14b251f8753790a4c902/PD%23day18/synth_2_0tns.png">

Then we try to run floor plan then it throws and error:
- The solution for this error is found.

- basic_macro_placement command is failing since EXTRA_LEFS variable inside config.tcl is assumed as a macro which is not.

- The temporary solution is to comment call on basic_macro_placement inside the OpenLane/scripts/tcl_commands/floorplan.tcl (this is okay since we are not adding any macro to the design).

- After that run_placement, another error will occur relating to remove_buffers, the solution is to comment the call to remove_buffers_from_nets in OpenLane/scripts/tcl_commands/placement.tcl.

- After successfully running placement, runs/[date]/results/placement/picorv32.def will be created.

```
cd ~/Desktop/work/tools/openlane_working_dir/openlane/scripts/openroad
vim or_basic_mp.tcl
cd ~/Desktop/work/tools/openlane_working_dir/openlane/scripts/tcl_commands
vim floorplan.tcl
```
Modification in gvim
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/3d630763a3110b04170c14b251f8753790a4c902/PD%23day18/modifican_in_vim.PNG">

In openlane:
```
run_floorplan
run_placement
```
Floorplan
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/3d630763a3110b04170c14b251f8753790a4c902/PD%23day18/floorplan.png">

Placement
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/3d630763a3110b04170c14b251f8753790a4c902/PD%23day18/placement.png">

In terminal:
```
cd ~/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/runs/results/placement
magic -T ~/Desktop/work/tools/openlane_working_dir/pdks/sky130A/libs.tech/magic/sky130A.tech lef read ../../tmp/merged.lef def read picorv32a.placement.def
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/3d630763a3110b04170c14b251f8753790a4c902/PD%23day18/layout.png">

My cell in layout:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/5c258a93179a42ec7b71b81ae55b3ac4b4b6d6a3/PD%23day18/prakhar_inv_layout.png">

</details>

</details>

<details>
<summary>Timing analysis with ideal clocks using openSTA </summary>

<details>
<summary>Theory : Setup timing analysis, introduction to flip-flop setup time and clock jitter </summary>

*Setup timing analysis and introduction to flip-flop setup time*
- At the zero time stamp, there is one clock edge that reaches the launch flop.
- At T time stamp, the second rising edge reaches the capture flop. Any analysis that needs to be done is between 0 and T. For the combinational circuit to work, the combinational delay needs to be less than the period, T.
- Looking at more practical scenarios and how the flop works, there will be a delay within the internal flop circuitry, between mux 1 and mux 2.
- These internal delays will restrict the combinational delay requirements.
- This internal delay is known as the setup time, and this setup time needs to be subtracted away from the complete clock period T.
- Now the capture flop has enough time for it to compute the data within the flop and ensure the data is ready at Q by the time the second rise edge of clock reach.

*Introduction to clock jitter and uncertainty*
Jitter :Deviation of a clock edge from its ideal location

- Typically caused by clock generator circuitry, noise, power supply variations, interference from nearby circuitry etc. Jitter is a contributing factor to the design margin specified for timing closure

- The next practical scenario to take into consideration is jitter.

- The clock is expected to reach the clock pin at exactly 0s or at Ts, but in real scenarios, the clock signal may not be able to reach at the exact moment, as the clock source generation may have its own built-in variation.

-  This is known as jitter, the temporary variation of the clock period.

- The combinational delay will become more stringent as a result. Thus we change our combinational delay to factor in the uncertainty factor from the jitter.
</details>


<details>
<summary>Lab 1: steps to configure OpenSTA for post-synth timing analysis</summary>

```
cd ~/Desktop/work/tools/openlane_working_dir/openlane
gvim pre_sta.conf                                          (For pre-layout timing analysis)
```
pre_sta.conf file:

```ruby
set_cmd_units -time ns -capacitance pF -current mA -voltage V -resistance kOhm -distance um
read_liberty -min /home/vsduser/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/src/sky130_fd_sc_hd__slow.lib

read_liberty -max /home/vsduser/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/src/sky130_fd_sc_hd__fast.lib

read_verilog /home/vsduser/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/runs/06-10_11-41/results/synthesis/picorv32a.synthesis.v

link_design picorv32a

read_sdc /home/vsduser/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/src/my_base1.sdc
report_checks -path_delay min_max -fields {slew trans net cap input_pin}
report_tns
report_wns
```
my_base1.sdc file:
```

set ::env(CLOCK_PORT) clk 
set ::env(CLOCK_PERIOD) 12
set ::env(SYNTH_DRIVING_CELL) sky130_vsdinv 
set ::env(SYNTH_DRIVING_CELL_PIN) Y 
set ::env(SYNTH_CAP_LOAD) 17.65 
create_clock [get_ports $::env(CLOCK_PORT)] -name $::env(CLOCK_PORT) -period $::env(CLOCK_PERIOD)
set ::env(IO_PCT) 0.2
set input_delay_value [expr $::env(CLOCK_PERIOD) * $::env(IO_PCT)]
set output_delay_value [expr $::env(CLOCK_PERIOD) * $::env(IO_PCT)]
puts "\[INFO\]: Setting output delay to: $output_delay_value" 
puts "\[INFO\]: Setting input delay to: $input_delay_value"
 
## set max fanout S::env(SYNTH MAX FANOUT) (current design)
set clk_indx [lsearch [all_inputs] [get_port $::env(CLOCK_PORT)]]

#set rst indx [isearch (all inputs) Iget port resetn]]
set all_inputs_wo_clk [lreplace [all_inputs] $clk_indx $clk_indx]

#set all inputs wo clk rst (treplace sall inputs wo clk srst indx Srst indx] 
set all_inputs_wo_clk_rst $all_inputs_wo_clk

# correct resetn
set_input_delay $input_delay_value -clock [get_clocks $::env(CLOCK_PORT)] $all_inputs_wo_clk_rst

# set_input_delay 0.0 -clock [get clocks S::env(CLOCK PORT)] (resetn)
set_output_delay $output_delay_value -clock [get_clocks $::env(CLOCK_PORT)] [all_outputs]

# TODO set this as parameter
set_driving_cell -lib_cell $::env(SYNTH_DRIVING_CELL) -pin $::env(SYNTH_DRIVING_CELL_PIN) [all_inputs]
set cap_load [expr $::env(SYNTH_CAP_LOAD) / 1000.0] 
puts "\[INFO\]: Setting load to: $cap_load" 
set_load $cap_load [all_outputs]
```
Running STA:
```
cd ~/Desktop/work/tools/openlane_working_dir/openlane
sta pre_sta.conf
```


<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/0282f98c1933d34185f315c8c9a49baec14ce248/PD%23day18/violation_opensta.png">
</details>


<details>
<summary>Lab 2: Lab steps to optimize synthesis to reduce setup violations</summary>
In openlane :
```
cd ~/Desktop/work/tools/openlane_working_dir/openlane
echo $::env(SYNTH_MAX_FANOUT)
set ::env(SYNTH_MAX_FANOUT) 4
```
Remove old result:
```
cd ~/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/runs/13-01_14-09/results/synthesis
rm -rf picorv32a.synthesis.v
```
In openlane:
```
run_synthesis
```
```
cd ~/Desktop/work/tools/openlane_working_dir/openlane
sta pre_sta.conf
report_net -connections _18242_                           
replace_cell _41952_ sky130_fd_sc_hd__dfxtp_4             (Pick the highest fanout, cap, slew and replace the worst violations of the cell by increasing drive strength --> upsize cell from 2 to 4)
report_checks -fields {net cap dlew input pins} -digits 4
report_tns
report_wns
```

report_net:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/802d0661f44f62fc3a20b8b369f688374e83aef6/PD%23day18/report_nets.png">

```
replace_cell _38618_ sky130_fd_sc_hd__dfxtp_4
1
```

_38618_ same as dff in design.

Timing report :
```
 report_checks -fields {net cap dlew input pins} -digits 4
Startpoint: _38615_ (rising edge-triggered flip-flop clocked by clk)
Endpoint: _38545_ (rising edge-triggered flip-flop clocked by clk)
Path Group: clk
Path Type: max

Fanout       Cap     Delay      Time   Description
----------------------------------------------------------------------------
                    0.0000    0.0000   clock clk (rise edge)
                    0.0000    0.0000   clock network delay (ideal)
                    0.0000    0.0000 ^ _38615_/CLK (sky130_fd_sc_hd__dfxtp_2)
                    0.5970    0.5970 v _38615_/Q (sky130_fd_sc_hd__dfxtp_2)
     4    0.0101                       irq_state[0] (net)
                    0.0000    0.5970 v _18612_/A (sky130_fd_sc_hd__buf_1)
                    0.2379    0.8349 v _18612_/X (sky130_fd_sc_hd__buf_1)
     6    0.0120                       _15907_ (net)
                    0.0000    0.8349 v _18623_/A (sky130_fd_sc_hd__buf_1)
                    0.2740    1.1089 v _18623_/X (sky130_fd_sc_hd__buf_1)
     6    0.0119                       _15917_ (net)
                    0.0000    1.1089 v _21670_/B (sky130_fd_sc_hd__nor2_2)
                    1.4228    2.5317 ^ _21670_/Y (sky130_fd_sc_hd__nor2_2)
    32    0.1065                       _00292_ (net)
                    0.0000    2.5317 ^ _35809_/S (sky130_fd_sc_hd__mux2_1)
                    1.1908    3.7225 v _35809_/X (sky130_fd_sc_hd__mux2_1)
     4    0.0137                       _02560_ (net)
                    0.0000    3.7225 v _23131_/A (sky130_fd_sc_hd__xnor2_2)
                    0.3358    4.0583 v _23131_/Y (sky130_fd_sc_hd__xnor2_2)
     2    0.0096                       _18154_ (net)
                    0.0000    4.0583 v _23136_/A_N (sky130_fd_sc_hd__nand3b_2)
                    0.5066    4.5649 v _23136_/Y (sky130_fd_sc_hd__nand3b_2)
     2    0.0087                       _18156_ (net)
                    0.0000    4.5649 v _23143_/A2_N (sky130_fd_sc_hd__o2bb2ai_2)
                    0.2998    4.8647 v _23143_/Y (sky130_fd_sc_hd__o2bb2ai_2)
     2    0.0087                       _18161_ (net)
                    0.0000    4.8647 v _23151_/A2_N (sky130_fd_sc_hd__o2bb2ai_2)
                    0.2386    5.1033 v _23151_/Y (sky130_fd_sc_hd__o2bb2ai_2)
     1    0.0043                       _18167_ (net)
                    0.0000    5.1033 v _23152_/B1 (sky130_fd_sc_hd__o21ai_2)
                    0.1456    5.2489 ^ _23152_/Y (sky130_fd_sc_hd__o21ai_2)
     2    0.0131                       _18168_ (net)
                    0.0000    5.2489 ^ _23159_/B1 (sky130_fd_sc_hd__o21ai_2)
                    0.1911    5.4400 v _23159_/Y (sky130_fd_sc_hd__o21ai_2)
     1    0.0043                       _18173_ (net)
                    0.0000    5.4400 v _23160_/B1 (sky130_fd_sc_hd__o21ai_2)
                    0.1469    5.5869 ^ _23160_/Y (sky130_fd_sc_hd__o21ai_2)
     2    0.0110                       _18174_ (net)
                    0.0000    5.5869 ^ _23167_/A1 (sky130_fd_sc_hd__a21o_2)
                    0.3724    5.9593 ^ _23167_/X (sky130_fd_sc_hd__a21o_2)
     2    0.0131                       _18179_ (net)
                    0.0000    5.9593 ^ _23174_/A1 (sky130_fd_sc_hd__a21oi_2)
                    0.1696    6.1288 v _23174_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.0122                       _18184_ (net)
                    0.0000    6.1288 v _23182_/A2 (sky130_fd_sc_hd__o21bai_2)
                    0.3186    6.4475 ^ _23182_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.0131                       _18190_ (net)
                    0.0000    6.4475 ^ _23189_/A1 (sky130_fd_sc_hd__a21oi_2)
                    0.2411    6.6886 v _23189_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.0122                       _18195_ (net)
                    0.0000    6.6886 v _23196_/A2 (sky130_fd_sc_hd__o21bai_2)
                    0.3259    7.0145 ^ _23196_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.0131                       _18200_ (net)
                    0.0000    7.0145 ^ _23202_/A1 (sky130_fd_sc_hd__a21oi_2)
                    0.2411    7.2556 v _23202_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.0122                       _18204_ (net)
                    0.0000    7.2556 v _23208_/A2 (sky130_fd_sc_hd__o21bai_2)
                    0.3259    7.5815 ^ _23208_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.0131                       _18208_ (net)
                    0.0000    7.5815 ^ _23214_/A1 (sky130_fd_sc_hd__a21oi_2)
                    0.2411    7.8226 v _23214_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.0122                       _18212_ (net)
                    0.0000    7.8226 v _23220_/A2 (sky130_fd_sc_hd__o21bai_2)
                    0.3259    8.1485 ^ _23220_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.0131                       _18216_ (net)
                    0.0000    8.1485 ^ _23226_/A1 (sky130_fd_sc_hd__a21oi_2)
                    0.2411    8.3896 v _23226_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.0122                       _18220_ (net)
                    0.0000    8.3896 v _23232_/A2 (sky130_fd_sc_hd__o21bai_2)
                    0.3259    8.7155 ^ _23232_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.0131                       _18224_ (net)
                    0.0000    8.7155 ^ _23238_/A1 (sky130_fd_sc_hd__a21oi_2)
                    0.2411    8.9566 v _23238_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.0122                       _18228_ (net)
                    0.0000    8.9566 v _23245_/A2 (sky130_fd_sc_hd__o21bai_2)
                    0.3259    9.2825 ^ _23245_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.0131                       _18233_ (net)
                    0.0000    9.2825 ^ _23251_/A1 (sky130_fd_sc_hd__a21oi_2)
                    0.2411    9.5236 v _23251_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.0122                       _18237_ (net)
                    0.0000    9.5236 v _23258_/A2 (sky130_fd_sc_hd__o21bai_2)
                    0.3811    9.9047 ^ _23258_/Y (sky130_fd_sc_hd__o21bai_2)
     3    0.0176                       _18242_ (net)
                    0.0000    9.9047 ^ _23268_/A (sky130_fd_sc_hd__nand3_2)
                    0.2823   10.1870 v _23268_/Y (sky130_fd_sc_hd__nand3_2)
     3    0.0099                       _18248_ (net)
                    0.0000   10.1870 v _23284_/A2 (sky130_fd_sc_hd__o211ai_2)
                    0.4462   10.6332 ^ _23284_/Y (sky130_fd_sc_hd__o211ai_2)
     3    0.0176                       _18260_ (net)
                    0.0000   10.6332 ^ _23294_/A (sky130_fd_sc_hd__nand3_2)
                    0.2957   10.9289 v _23294_/Y (sky130_fd_sc_hd__nand3_2)
     3    0.0099                       _18266_ (net)
                    0.0000   10.9289 v _23310_/A2 (sky130_fd_sc_hd__o211ai_2)
                    0.4481   11.3771 ^ _23310_/Y (sky130_fd_sc_hd__o211ai_2)
     3    0.0175                       _18278_ (net)
                    0.0000   11.3771 ^ _23315_/A (sky130_fd_sc_hd__nand2_2)
                    0.1895   11.5666 v _23315_/Y (sky130_fd_sc_hd__nand2_2)
     1    0.0043                       _18281_ (net)
                    0.0000   11.5666 v _23318_/A (sky130_fd_sc_hd__nand2_2)
                    0.1319   11.6984 ^ _23318_/Y (sky130_fd_sc_hd__nand2_2)
     1    0.0085                       _18284_ (net)
                    0.0000   11.6984 ^ _23319_/B (sky130_fd_sc_hd__xor2_2)
                    0.1086   11.8071 v _23319_/X (sky130_fd_sc_hd__xor2_2)
     1    0.0018                       _01676_ (net)
                    0.0000   11.8071 v _36534_/A1 (sky130_fd_sc_hd__mux2_1)
                    0.6252   12.4323 v _36534_/X (sky130_fd_sc_hd__mux2_1)
     1    0.0013                       _01677_ (net)
                    0.0000   12.4323 v _36988_/A1 (sky130_fd_sc_hd__mux4_1)
                    1.0986   13.5309 v _36988_/X (sky130_fd_sc_hd__mux4_1)
     1    0.0015                       _01678_ (net)
                    0.0000   13.5309 v _36535_/A0 (sky130_fd_sc_hd__mux2_1)
                    0.6333   14.1642 v _36535_/X (sky130_fd_sc_hd__mux2_1)
     1    0.0016                       _02529_ (net)
                    0.0000   14.1642 v _18990_/A (sky130_fd_sc_hd__or2b_2)
                    0.6472   14.8114 v _18990_/X (sky130_fd_sc_hd__or2b_2)
     1    0.0024                       _16178_ (net)
                    0.0000   14.8114 v _18991_/C1 (sky130_fd_sc_hd__o211a_2)
                    0.2140   15.0254 v _18991_/X (sky130_fd_sc_hd__o211a_2)
     1    0.0016                       _03989_ (net)
                    0.0000   15.0254 v _38545_/D (sky130_fd_sc_hd__dfxtp_2)
                             15.0254   data arrival time

                   12.0000   12.0000   clock clk (rise edge)
                    0.0000   12.0000   clock network delay (ideal)
                    0.0000   12.0000   clock reconvergence pessimism
                             12.0000 ^ _38545_/CLK (sky130_fd_sc_hd__dfxtp_2)
                   -0.2909   11.7091   library setup time
                             11.7091   data required time
----------------------------------------------------------------------------
                             11.7091   data required time
                            -15.0254   data arrival time
----------------------------------------------------------------------------
                             -3.3164   slack (VIOLATED)

report_tns             
tns -311.63
report_wns  
wns -3.32

```
Tns and wns has improved for setup by increasing drive strength.

</details>
</details>

<details>
<summary>Clock tree synthesis TritonCTS and signal integrity</summary>

<details>	
<summary>Theory : Clock tree routing and buffering using H-Tree algorithm, Crosstalk and clock net shielding </summary>

*Clock tree routing and buffering using H-Tree algorithm*

    - Clock tree synthesis is done to propagate the clock signals to all the clock pins in the design.
    - However, a good clock tree needs to be designed to take into account the skew between the clock pins due to long routing.
    - Through the use of H-tree, which is a smarter implementation for a clock tree design, that is designed based on the distances between the clock pins in the design between the clock port.
    - This is to give a skew value as close to 0 as possible by having the clock signals reach all the cells at the same time.
    
    - The next step is to perform clock tree buffering.
    - The wires for the clock routes each will have resistances and huge number of capacitances, and with the long routing, there will be signal integrity issues.
    - Thus, to maintain the signal integrity, we need buffering on these nets.

*Crosstalk and clock net shielding*

    - Another topic to understand before moving to using real clocks is clock net shielding.
    - Clock nets are the critical nets in the design, we build the clock tree to ensure there is a minimum skew.
    - However, if there is any cross talk that happens and affect the clock signals, that will affect the design very badly.
    - By shielding, we are protecting the clock nets from the outside world, avoiding glitches and delta delays from occurring.
    - If a glitch occurs on the clock net, incorrect data in the memory will cause inaccurate functionality for the design.
    - The shield can be connected to ground or to Vdd, as long as there is no switching activity occurring.
    - Critical data nets are also necessary to be shielded.
</details>

<details>
<summary>Lab 1: Lab steps to run CTS using TritonCTS</summary>

In sta terminal:
```
write_verilog ~/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/runs/results/synthesis/picorv32a.synthesis.v
```
```
cd ~/Desktop/work/tools/openlane_working_dir/openlane/designs/picorv32a/runs/13-01_14-09/results/synthesis
ls -lrt picorv32a.synthesis.v
date
```
In openlane:
```
run_floorplan
run_placement
run_cts
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/431acb84d68c5f010d076308398d699b3b1c34cd/PD%23day18/cts_done.png">

picorv32a.synthesis_cts.v is generated.
</details>

<details>
<summary>Lab 2: Lab steps to verify CTS runs</summary>

```
cd ~/Desktop/work/tools/openlane_working_dir/openlane/scripts/tcl_commands
vim cts.tcl
```

In openlane:
```
echo $::env(LIB_TYPICAL)
echo $::env(CURRENT_DEF)
echo $::env(CTS_MAX_CAP)
echo $::env(CTS_CLK_BUFFER_LIST)
echo $::env(CTS_ROOT_BUFFER)
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/478b1c6bc3d3aaa7308622b757d7b899c0fc0e81/PD%23day18/echo_cts.png">

</details>
</details>

<details>
<summary>Timing analysis with real clocks using openSTA</summary>

<details>
<summary>Theory: Setup timing and Hold timing analysis using real clocks </summary>
	
**Setup timing analysis using real clocks**

    - After buffer has been added in, more clock network delay has been introduced and it will combining all the delays.
    - With real clocks, we will need to have buffers inserted into the clock path to ensure the clock signal integrity.
    - Because of the buffer introduction, the clock edge will reach the clock pin with consideration to the delays of the buffers inserted.
    - The clock network delay will also need to take into consideration the delays from the buffers inserted.
    - The window will become shifted as a result of the delays from the buffers inserted.
    - The skew for this design will now be the difference between the deltas.
    - If the data arrival time is higher than the data required time, then we will have negative slack on the path, meaning we have violations.

    - For hold timing analysis, where the capture edge is on the o clock rise edge, the combinational delay should be greater than the hold time of the flop.
    - Hold time refers to the second mux delay, which is the time required for the data to be sent after the clock edge within the flop.
    - So the data needs to be arrived after the hold time, so the new data can be captured into the flop, after existing data is launched out.

**Hold timing analysis using real clocks**

    - Introducing more real factors into our design for hold analysis will yield the below equation for hold timing.
    - Jitter for the launch clock and capture flop will not need to be taken into consideration as the design is on the 0 clock edge, and the arrival difference for the capture and launch flop will be the same.
    - So, the uncertainty should be kept low for the hold analysis.
    - The slack formula will be --> data arrival time – data required time
    - If data required time is higher, we will have negative slack, meaning the timing path for hold will be violated.
    - For the timing path setup for real clocks, we need to take into considerations the deltas that were mentioned earlier.
    - For delta1, will be launch clock network delay, while delta2, will be capture clock network delay.
</details>


<details>
<summary>Lab 1: Lab steps to analyze timing with real clocks using OpenSTA</summary>

In openlane:
```
openroad                                                                                                       (Invoking openroad)
read_lef /openLANE_flow/designs/picorv32a/runs/13-01_14-09/tmp/merged.lef
read_def /openLANE_flow/designs/picorv32a/runs/13-01_14-09/results/cts/picorv32a.cts.def
write_db pico_cts.db
read_db pico_cts.db
read_verilog /openLANE_flow/designs/picorv32a/runs/13-01_14-09/results/synthesis/picorv32a.synthesis_cts.v
read_liberty -max $::env(OPENLANE_ROOT)/designs/picorv32a/src/sky130_fd_sc_hd__slow.lib
read_liberty -min $::env(OPENLANE_ROOT)/designs/picorv32a/src/sky130_fd_sc_hd__fast.lib
set_propagated_clock [all_clocks]
read_sdc designs/picorv32a/src/my_base.sdc
report_checks -path_delay min_max -format full_clock_expanded -digits 4
```
This step is not practical, therefore it violated.

```

% report_checks -path_delay min_max -format full_clock_expanded -digits 4
Startpoint: _40725_ (rising edge-triggered flip-flop clocked by clk)
Endpoint: _40725_ (rising edge-triggered flip-flop clocked by clk)
Path Group: clk
Path Type: min

    Delay      Time   Description
-------------------------------------------------------------
   0.0000    0.0000   clock clk (rise edge)
   0.0000    0.0000   clock network delay (ideal)
   0.0000    0.0000 ^ _40725_/CLK (sky130_fd_sc_hd__dfxtp_1)
   0.1823    0.1823 ^ _40725_/Q (sky130_fd_sc_hd__dfxtp_1)
   0.0472    0.2295 ^ _23930_/X (sky130_fd_sc_hd__clkbuf_1)
   0.0000    0.2295 ^ _40725_/D (sky130_fd_sc_hd__dfxtp_1)
             0.2295   data arrival time

   0.0000    0.0000   clock clk (rise edge)
   0.0000    0.0000   clock network delay (ideal)
   0.0000    0.0000   clock reconvergence pessimism
             0.0000 ^ _40725_/CLK (sky130_fd_sc_hd__dfxtp_1)
  -0.0176   -0.0176   library hold time
            -0.0176   data required time
-------------------------------------------------------------
            -0.0176   data required time
            -0.2295   data arrival time
-------------------------------------------------------------
             0.2471   slack (MET)


Startpoint: _41952_ (rising edge-triggered flip-flop clocked by clk)
Endpoint: _41879_ (rising edge-triggered flip-flop clocked by clk)
Path Group: clk
Path Type: max

    Delay      Time   Description
-------------------------------------------------------------
   0.0000    0.0000   clock clk (rise edge)
   0.0000    0.0000   clock network delay (ideal)
   0.0000    0.0000 ^ _41952_/CLK (sky130_fd_sc_hd__dfxtp_4)
   0.9923    0.9923 ^ _41952_/Q (sky130_fd_sc_hd__dfxtp_4)
   0.8498    1.8421 v _39853_/X (sky130_fd_sc_hd__mux2_1)
   0.6464    2.4885 v _39852_/X (sky130_fd_sc_hd__mux2_1)
   0.3149    2.8034 v _25161_/X (sky130_fd_sc_hd__and2_1)
   0.6072    3.4106 v _39143_/X (sky130_fd_sc_hd__mux2_2)
   0.2837    3.6942 v _25583_/Y (sky130_fd_sc_hd__xnor2_1)
   0.4643    4.1586 v _25588_/Y (sky130_fd_sc_hd__nand3b_2)
   0.2835    4.4421 v _25595_/Y (sky130_fd_sc_hd__o2bb2ai_1)
   0.2387    4.6809 v _25603_/Y (sky130_fd_sc_hd__o2bb2ai_1)
   0.1845    4.8653 ^ _25604_/Y (sky130_fd_sc_hd__o21ai_1)
   0.2208    5.0861 v _25611_/Y (sky130_fd_sc_hd__o21ai_1)
   0.1325    5.2187 ^ _25612_/Y (sky130_fd_sc_hd__o21ai_2)
   0.3209    5.5395 ^ _25619_/X (sky130_fd_sc_hd__a21o_1)
   0.1551    5.6946 v _25626_/Y (sky130_fd_sc_hd__a21oi_2)
   0.3124    6.0071 ^ _25634_/Y (sky130_fd_sc_hd__o21bai_2)
   0.1891    6.1962 v _25641_/Y (sky130_fd_sc_hd__a21oi_4)
   0.2576    6.4538 ^ _25648_/Y (sky130_fd_sc_hd__o21bai_2)
   0.1952    6.6490 v _25654_/Y (sky130_fd_sc_hd__a21oi_2)
   0.3159    6.9649 ^ _25660_/Y (sky130_fd_sc_hd__o21bai_2)
   0.1891    7.1539 v _25666_/Y (sky130_fd_sc_hd__a21oi_4)
   0.2576    7.4115 ^ _25672_/Y (sky130_fd_sc_hd__o21bai_2)
   0.1952    7.6067 v _25678_/Y (sky130_fd_sc_hd__a21oi_2)
   0.3158    7.9225 ^ _25684_/Y (sky130_fd_sc_hd__o21bai_2)
   0.2038    8.1264 v _25690_/Y (sky130_fd_sc_hd__a21oi_4)
   0.2544    8.3808 ^ _25697_/Y (sky130_fd_sc_hd__o21bai_4)
   0.1776    8.5583 v _25704_/Y (sky130_fd_sc_hd__a21oi_4)
   0.2661    8.8244 ^ _25711_/Y (sky130_fd_sc_hd__o21bai_4)
   0.2044    9.0288 v _25721_/Y (sky130_fd_sc_hd__nand3_4)
   0.3568    9.3856 ^ _25737_/Y (sky130_fd_sc_hd__o211ai_4)
   0.2251    9.6107 v _25747_/Y (sky130_fd_sc_hd__nand3_4)
   0.3081    9.9188 ^ _25763_/Y (sky130_fd_sc_hd__o211ai_4)
   0.1550   10.0737 v _25768_/Y (sky130_fd_sc_hd__nand2_1)
   0.1149   10.1887 ^ _25771_/Y (sky130_fd_sc_hd__nand2_1)
   0.1165   10.3051 v _25772_/X (sky130_fd_sc_hd__xor2_1)
   0.6296   10.9347 v _39868_/X (sky130_fd_sc_hd__mux2_1)
   1.0986   12.0333 v _40322_/X (sky130_fd_sc_hd__mux4_1)
   0.6333   12.6665 v _39869_/X (sky130_fd_sc_hd__mux2_1)
   0.4839   13.1505 v _20796_/X (sky130_fd_sc_hd__or2b_1)
   0.1920   13.3424 v _20797_/X (sky130_fd_sc_hd__o211a_1)
   0.0000   13.3424 v _41879_/D (sky130_fd_sc_hd__dfxtp_1)
            13.3424   data arrival time

  12.0000   12.0000   clock clk (rise edge)
   0.0000   12.0000   clock network delay (ideal)
   0.0000   12.0000   clock reconvergence pessimism
            12.0000 ^ _41879_/CLK (sky130_fd_sc_hd__dfxtp_1)
  -0.2845   11.7155   library setup time
            11.7155   data required time
-------------------------------------------------------------
            11.7155   data required time
           -13.3424   data arrival time
-------------------------------------------------------------
            -1.6270   slack (VIOLATED)
```

</details>


<details>
<summary>Lab 2: Lab steps to execute OpenSTA with right timing libraries and CTS assignment</summary>

Continuing from previous lab:
```
exit        (Exit openroad)
openroad
read_db pico_cts.db
read_verilog /openLANE_flow/designs/picorv32a/runs/13-01_14-09/results/synthesis/picorv32a.synthesis_cts.v
read_liberty $::env(LIB_SYNTH_COMPLETE)
link_design picorv32a
read_sdc designs/picorv32a/src/my_base.sdc
set_propagated_clock [all_clocks]
report_checks -path_delay min_max -fields {slew trans net cap input pin} -format full_clock_expanded
echo $::env(CTS_CLK_BUFFER_LIST)                              (To see the list of buffers)
```

- Both timing are already met after post CTS
- The tool picked small cell first to meet the skew and area
  - skew values are within 10% of the max clock period
```
% report_checks -path_delay min_max -fields {slew trans net cap input pin} -format full_clock_expanded
Startpoint: _37166_ (rising edge-triggered flip-flop clocked by clk)
Endpoint: _37548_ (rising edge-triggered flip-flop clocked by clk)
Path Group: clk
Path Type: min

Fanout     Cap    Slew   Delay    Time   Description
-----------------------------------------------------------------------------
                          0.00    0.00   clock clk (rise edge)
                          0.00    0.00   clock source latency
                  0.00    0.00    0.00 ^ clk (in)
     1    0.01                           clk (net)
                  0.00    0.00    0.00 ^ clkbuf_0_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.09    0.09 ^ clkbuf_0_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_0_clk (net)
                  0.03    0.00    0.09 ^ clkbuf_1_1_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.04    0.07    0.16 ^ clkbuf_1_1_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     1    0.00                           clknet_1_1_0_clk (net)
                  0.04    0.00    0.16 ^ clkbuf_1_1_1_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.09    0.25 ^ clkbuf_1_1_1_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_1_1_1_clk (net)
                  0.06    0.00    0.25 ^ clkbuf_2_2_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.04    0.08    0.34 ^ clkbuf_2_2_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     1    0.00                           clknet_2_2_0_clk (net)
                  0.04    0.00    0.34 ^ clkbuf_2_2_1_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.09    0.43 ^ clkbuf_2_2_1_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_2_2_1_clk (net)
                  0.06    0.00    0.43 ^ clkbuf_3_4_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.10    0.53 ^ clkbuf_3_4_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_3_4_0_clk (net)
                  0.06    0.00    0.53 ^ clkbuf_4_8_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.10    0.62 ^ clkbuf_4_8_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_4_8_0_clk (net)
                  0.06    0.00    0.62 ^ clkbuf_5_17_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.47    0.38    1.00 ^ clkbuf_5_17_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     5    0.04                           clknet_5_17_0_clk (net)
                  0.47    0.00    1.00 ^ clkbuf_leaf_182_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.04    0.22    1.22 ^ clkbuf_leaf_182_clk/X (sky130_fd_sc_hd__clkbuf_16)
     5    0.01                           clknet_leaf_182_clk (net)
                  0.04    0.00    1.22 ^ _37166_/CLK (sky130_fd_sc_hd__dfxtp_1)
                  0.04    0.29    1.52 ^ _37166_/Q (sky130_fd_sc_hd__dfxtp_1)
     1    0.00                           alu_out_q[29] (net)
                  0.04    0.00    1.52 ^ _36370_/A1 (sky130_fd_sc_hd__mux2_1)
                  0.06    0.13    1.64 ^ _36370_/X (sky130_fd_sc_hd__mux2_1)
     2    0.00                           _01548_ (net)
                  0.06    0.00    1.64 ^ _24072_/B2 (sky130_fd_sc_hd__a221o_1)
                  0.04    0.13    1.77 ^ _24072_/X (sky130_fd_sc_hd__a221o_1)
     1    0.00                           _02128_ (net)
                  0.04    0.00    1.77 ^ _35742_/A0 (sky130_fd_sc_hd__mux2_4)
                  0.05    0.14    1.92 ^ _35742_/X (sky130_fd_sc_hd__mux2_4)
     4    0.01                           cpuregs_wrdata[29] (net)
                  0.05    0.00    1.92 ^ _21409_/A1 (sky130_fd_sc_hd__mux2_1)
                  0.03    0.11    2.03 ^ _21409_/X (sky130_fd_sc_hd__mux2_1)
     1    0.00                           _02992_ (net)
                  0.03    0.00    2.03 ^ _37548_/D (sky130_fd_sc_hd__dfxtp_1)
                                  2.03   data arrival time

                          0.00    0.00   clock clk (rise edge)
                          0.00    0.00   clock source latency
                  0.00    0.00    0.00 ^ clk (in)
     1    0.01                           clk (net)
                  0.00    0.00    0.00 ^ clkbuf_0_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.09    0.09 ^ clkbuf_0_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_0_clk (net)
                  0.03    0.00    0.09 ^ clkbuf_1_0_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.04    0.07    0.16 ^ clkbuf_1_0_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     1    0.00                           clknet_1_0_0_clk (net)
                  0.04    0.00    0.16 ^ clkbuf_1_0_1_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.09    0.25 ^ clkbuf_1_0_1_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_1_0_1_clk (net)
                  0.06    0.00    0.25 ^ clkbuf_2_0_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.04    0.08    0.34 ^ clkbuf_2_0_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     1    0.00                           clknet_2_0_0_clk (net)
                  0.04    0.00    0.34 ^ clkbuf_2_0_1_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.09    0.43 ^ clkbuf_2_0_1_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_2_0_1_clk (net)
                  0.06    0.00    0.43 ^ clkbuf_3_0_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.10    0.53 ^ clkbuf_3_0_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_3_0_0_clk (net)
                  0.06    0.00    0.53 ^ clkbuf_4_0_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.10    0.62 ^ clkbuf_4_0_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_4_0_0_clk (net)
                  0.06    0.00    0.62 ^ clkbuf_5_0_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  1.46    1.06    1.69 ^ clkbuf_5_0_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
    16    0.13                           clknet_5_0_0_clk (net)
                  1.46    0.00    1.69 ^ clkbuf_leaf_259_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.07    0.32    2.00 ^ clkbuf_leaf_259_clk/X (sky130_fd_sc_hd__clkbuf_16)
     5    0.01                           clknet_leaf_259_clk (net)
                  0.07    0.00    2.00 ^ _37548_/CLK (sky130_fd_sc_hd__dfxtp_1)
                          0.00    2.00   clock reconvergence pessimism
                         -0.03    1.98   library hold time
                                  1.98   data required time
-----------------------------------------------------------------------------
                                  1.98   data required time
                                 -2.03   data arrival time
-----------------------------------------------------------------------------
                                  0.05   slack (MET)


Startpoint: _38618_ (rising edge-triggered flip-flop clocked by clk)
Endpoint: _38545_ (rising edge-triggered flip-flop clocked by clk)
Path Group: clk
Path Type: max

Fanout     Cap    Slew   Delay    Time   Description
-----------------------------------------------------------------------------
                          0.00    0.00   clock clk (rise edge)
                          0.00    0.00   clock source latency
                  0.00    0.00    0.00 ^ clk (in)
     1    0.01                           clk (net)
                  0.00    0.00    0.00 ^ clkbuf_0_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.09    0.09 ^ clkbuf_0_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_0_clk (net)
                  0.03    0.00    0.09 ^ clkbuf_1_0_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.04    0.07    0.16 ^ clkbuf_1_0_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     1    0.00                           clknet_1_0_0_clk (net)
                  0.04    0.00    0.16 ^ clkbuf_1_0_1_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.09    0.25 ^ clkbuf_1_0_1_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_1_0_1_clk (net)
                  0.06    0.00    0.25 ^ clkbuf_2_1_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.04    0.08    0.34 ^ clkbuf_2_1_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     1    0.00                           clknet_2_1_0_clk (net)
                  0.04    0.00    0.34 ^ clkbuf_2_1_1_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.09    0.43 ^ clkbuf_2_1_1_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_2_1_1_clk (net)
                  0.06    0.00    0.43 ^ clkbuf_3_3_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.10    0.53 ^ clkbuf_3_3_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_3_3_0_clk (net)
                  0.06    0.00    0.53 ^ clkbuf_4_6_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.10    0.62 ^ clkbuf_4_6_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_4_6_0_clk (net)
                  0.06    0.00    0.62 ^ clkbuf_5_12_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.65    0.50    1.13 ^ clkbuf_5_12_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     7    0.06                           clknet_5_12_0_clk (net)
                  0.65    0.00    1.13 ^ clkbuf_leaf_212_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.04    0.25    1.37 ^ clkbuf_leaf_212_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_leaf_212_clk (net)
                  0.04    0.00    1.37 ^ _38618_/CLK (sky130_fd_sc_hd__dfxtp_4)
                  0.33    0.55    1.92 ^ _38618_/Q (sky130_fd_sc_hd__dfxtp_4)
    33    0.12                           latched_stalu (net)
                  0.33    0.00    1.92 ^ _36519_/S (sky130_fd_sc_hd__mux2_1)
                  0.06    0.37    2.29 v _36519_/X (sky130_fd_sc_hd__mux2_1)
     2    0.00                           _00293_ (net)
                  0.06    0.00    2.29 v _36518_/A1 (sky130_fd_sc_hd__mux2_1)
                  0.05    0.28    2.57 v _36518_/X (sky130_fd_sc_hd__mux2_1)
     1    0.00                           _00294_ (net)
                  0.05    0.00    2.57 v _22741_/B (sky130_fd_sc_hd__and2_1)
                  0.03    0.15    2.71 v _22741_/X (sky130_fd_sc_hd__and2_1)
     1    0.00                           _00295_ (net)
                  0.03    0.00    2.71 v _35809_/A0 (sky130_fd_sc_hd__mux2_2)
                  0.07    0.28    2.99 v _35809_/X (sky130_fd_sc_hd__mux2_2)
     4    0.01                           _02560_ (net)
                  0.07    0.00    2.99 v _23131_/A (sky130_fd_sc_hd__xnor2_1)
                  0.07    0.15    3.14 v _23131_/Y (sky130_fd_sc_hd__xnor2_1)
     2    0.01                           _18154_ (net)
                  0.07    0.00    3.14 v _23136_/A_N (sky130_fd_sc_hd__nand3b_2)
                  0.07    0.21    3.35 v _23136_/Y (sky130_fd_sc_hd__nand3b_2)
     2    0.00                           _18156_ (net)
                  0.07    0.00    3.35 v _23143_/A2_N (sky130_fd_sc_hd__o2bb2ai_1)
                  0.06    0.14    3.49 v _23143_/Y (sky130_fd_sc_hd__o2bb2ai_1)
     2    0.00                           _18161_ (net)
                  0.06    0.00    3.49 v _23151_/A2_N (sky130_fd_sc_hd__o2bb2ai_1)
                  0.05    0.13    3.62 v _23151_/Y (sky130_fd_sc_hd__o2bb2ai_1)
     1    0.00                           _18167_ (net)
                  0.05    0.00    3.62 v _23152_/B1 (sky130_fd_sc_hd__o21ai_2)
                  0.12    0.07    3.68 ^ _23152_/Y (sky130_fd_sc_hd__o21ai_2)
     2    0.01                           _18168_ (net)
                  0.12    0.00    3.68 ^ _23159_/B1 (sky130_fd_sc_hd__o21ai_1)
                  0.06    0.09    3.77 v _23159_/Y (sky130_fd_sc_hd__o21ai_1)
     1    0.00                           _18173_ (net)
                  0.06    0.00    3.77 v _23160_/B1 (sky130_fd_sc_hd__o21ai_2)
                  0.13    0.07    3.84 ^ _23160_/Y (sky130_fd_sc_hd__o21ai_2)
     2    0.01                           _18174_ (net)
                  0.13    0.00    3.84 ^ _23167_/A1 (sky130_fd_sc_hd__a21o_1)
                  0.13    0.19    4.03 ^ _23167_/X (sky130_fd_sc_hd__a21o_1)
     2    0.01                           _18179_ (net)
                  0.13    0.00    4.03 ^ _23174_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.05    0.07    4.10 v _23174_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18184_ (net)
                  0.05    0.00    4.10 v _23182_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.20    0.18    4.28 ^ _23182_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18190_ (net)
                  0.20    0.00    4.28 ^ _23189_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.06    0.08    4.37 v _23189_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18195_ (net)
                  0.06    0.00    4.37 v _23196_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.15    0.15    4.52 ^ _23196_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18200_ (net)
                  0.15    0.00    4.52 ^ _23202_/A1 (sky130_fd_sc_hd__a21oi_2)
                  0.06    0.09    4.61 v _23202_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.01                           _18204_ (net)
                  0.06    0.00    4.61 v _23208_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.20    0.19    4.79 ^ _23208_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18208_ (net)
                  0.20    0.00    4.79 ^ _23214_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.06    0.08    4.87 v _23214_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18212_ (net)
                  0.06    0.00    4.87 v _23220_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.20    0.18    5.06 ^ _23220_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18216_ (net)
                  0.20    0.00    5.06 ^ _23226_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.06    0.08    5.14 v _23226_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18220_ (net)
                  0.06    0.00    5.14 v _23232_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.15    0.15    5.29 ^ _23232_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18224_ (net)
                  0.15    0.00    5.29 ^ _23238_/A1 (sky130_fd_sc_hd__a21oi_2)
                  0.06    0.09    5.38 v _23238_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.01                           _18228_ (net)
                  0.06    0.00    5.38 v _23245_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.20    0.19    5.56 ^ _23245_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18233_ (net)
                  0.20    0.00    5.56 ^ _23251_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.07    0.09    5.65 v _23251_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18237_ (net)
                  0.07    0.00    5.65 v _23258_/A2 (sky130_fd_sc_hd__o21bai_4)
                  0.16    0.16    5.81 ^ _23258_/Y (sky130_fd_sc_hd__o21bai_4)
     3    0.02                           _18242_ (net)
                  0.16    0.00    5.81 ^ _23268_/A (sky130_fd_sc_hd__nand3_4)
                  0.08    0.10    5.91 v _23268_/Y (sky130_fd_sc_hd__nand3_4)
     3    0.01                           _18248_ (net)
                  0.08    0.00    5.91 v _23284_/A2 (sky130_fd_sc_hd__o211ai_4)
                  0.20    0.21    6.12 ^ _23284_/Y (sky130_fd_sc_hd__o211ai_4)
     3    0.02                           _18260_ (net)
                  0.20    0.00    6.12 ^ _23294_/A (sky130_fd_sc_hd__nand3_4)
                  0.09    0.10    6.23 v _23294_/Y (sky130_fd_sc_hd__nand3_4)
     3    0.01                           _18266_ (net)
                  0.09    0.00    6.23 v _23310_/A2 (sky130_fd_sc_hd__o211ai_4)
                  0.16    0.18    6.41 ^ _23310_/Y (sky130_fd_sc_hd__o211ai_4)
     3    0.01                           _18278_ (net)
                  0.16    0.00    6.41 ^ _23315_/A (sky130_fd_sc_hd__nand2_1)
                  0.05    0.06    6.47 v _23315_/Y (sky130_fd_sc_hd__nand2_1)
     1    0.00                           _18281_ (net)
                  0.05    0.00    6.47 v _23318_/A (sky130_fd_sc_hd__nand2_1)
                  0.06    0.07    6.54 ^ _23318_/Y (sky130_fd_sc_hd__nand2_1)
     1    0.00                           _18284_ (net)
                  0.06    0.00    6.54 ^ _23319_/B (sky130_fd_sc_hd__xor2_1)
                  0.05    0.05    6.59 v _23319_/X (sky130_fd_sc_hd__xor2_1)
     1    0.00                           _01676_ (net)
                  0.05    0.00    6.59 v _36534_/A1 (sky130_fd_sc_hd__mux2_1)
                  0.05    0.27    6.87 v _36534_/X (sky130_fd_sc_hd__mux2_1)
     1    0.00                           _01677_ (net)
                  0.05    0.00    6.87 v _36988_/A1 (sky130_fd_sc_hd__mux4_1)
                  0.08    0.48    7.34 v _36988_/X (sky130_fd_sc_hd__mux4_1)
     1    0.00                           _01678_ (net)
                  0.08    0.00    7.34 v _36535_/A0 (sky130_fd_sc_hd__mux2_1)
                  0.05    0.28    7.62 v _36535_/X (sky130_fd_sc_hd__mux2_1)
     1    0.00                           _02529_ (net)
                  0.05    0.00    7.62 v _18990_/A (sky130_fd_sc_hd__or2b_1)
                  0.04    0.21    7.83 v _18990_/X (sky130_fd_sc_hd__or2b_1)
     1    0.00                           _16178_ (net)
                  0.04    0.00    7.83 v _18991_/C1 (sky130_fd_sc_hd__o211a_1)
                  0.03    0.10    7.93 v _18991_/X (sky130_fd_sc_hd__o211a_1)
     1    0.00                           _03989_ (net)
                  0.03    0.00    7.93 v _38545_/D (sky130_fd_sc_hd__dfxtp_1)
                                  7.93   data arrival time

                         12.00   12.00   clock clk (rise edge)
                          0.00   12.00   clock source latency
                  0.00    0.00   12.00 ^ clk (in)
     1    0.01                           clk (net)
                  0.00    0.00   12.00 ^ clkbuf_0_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.09   12.09 ^ clkbuf_0_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_0_clk (net)
                  0.03    0.00   12.09 ^ clkbuf_1_1_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.04    0.07   12.16 ^ clkbuf_1_1_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     1    0.00                           clknet_1_1_0_clk (net)
                  0.04    0.00   12.16 ^ clkbuf_1_1_1_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.09   12.25 ^ clkbuf_1_1_1_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_1_1_1_clk (net)
                  0.06    0.00   12.25 ^ clkbuf_2_2_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.04    0.08   12.34 ^ clkbuf_2_2_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     1    0.00                           clknet_2_2_0_clk (net)
                  0.04    0.00   12.34 ^ clkbuf_2_2_1_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.09   12.43 ^ clkbuf_2_2_1_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_2_2_1_clk (net)
                  0.06    0.00   12.43 ^ clkbuf_3_4_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.10   12.53 ^ clkbuf_3_4_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_3_4_0_clk (net)
                  0.06    0.00   12.53 ^ clkbuf_4_8_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.06    0.10   12.62 ^ clkbuf_4_8_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     2    0.00                           clknet_4_8_0_clk (net)
                  0.06    0.00   12.62 ^ clkbuf_5_17_0_clk/A (sky130_fd_sc_hd__clkbuf_1)
                  0.47    0.38   13.00 ^ clkbuf_5_17_0_clk/X (sky130_fd_sc_hd__clkbuf_1)
     5    0.04                           clknet_5_17_0_clk (net)
                  0.47    0.00   13.00 ^ clkbuf_leaf_182_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.04    0.22   13.22 ^ clkbuf_leaf_182_clk/X (sky130_fd_sc_hd__clkbuf_16)
     5    0.01                           clknet_leaf_182_clk (net)
                  0.04    0.00   13.22 ^ _38545_/CLK (sky130_fd_sc_hd__dfxtp_1)
                          0.00   13.22   clock reconvergence pessimism
                         -0.11   13.12   library setup time
                                 13.12   data required time
-----------------------------------------------------------------------------
                                 13.12   data required time
                                 -7.93   data arrival time
-----------------------------------------------------------------------------
                                  5.19   slack (MET)

```




</details>

<details>
<summary>Lab 3: Lab steps to observe impact of bigger CTS buffers on setup and hold timing</summary>

In openlane:
```
exit 
echo $::env(CTS_CLK_BUFFER_LIST)
set ::env(CTS_CLK_BUFFER_LIST) [lreplace $::env(CTS_CLK_BUFFER_LIST) 0 0]
echo $::env(CURRENT_DEF)
set ::env(CURRENT_DEF) /openLANE_flow/designs/picorv32a/runs/13-01_14-09/results/placement/picorv32a.placement.def
run_cts
openroad
read_lef /openLANE_flow/designs/picorv32a/runs/13-01_14-09/tmp/merged.lef
read_def /openLANE_flow/designs/picorv32a/runs/13-01_14-09/results/cts/picorv32a.cts.def
write_db pico_cts1.db
read_db pico_cts1.db
read_verilog /openLANE_flow/designs/picorv32a/runs/13-01_14-09/results/synthesis/picorv32a.synthesis_cts.v
read_liberty $::env(LIB_SYNTH_COMPLETE)
link_design picorv32a
read_sdc designs/picorv32a/src/my_base.sdc
set_propagated_clock [all_clocks]
report_checks -path_delay min_max -fields {slew trans net cap input pin} -format full_clock_expanded
```

Report check : Both MIN and MAX slack
```

report_checks -path_delay min_max -fields {slew trans net cap input pin} -format full_clock_expanded
Startpoint: _37098_ (rising edge-triggered flip-flop clocked by clk)
Endpoint: _37103_ (rising edge-triggered flip-flop clocked by clk)
Path Group: clk
Path Type: min

Fanout     Cap    Slew   Delay    Time   Description
-----------------------------------------------------------------------------
                          0.00    0.00   clock clk (rise edge)
                          0.00    0.00   clock source latency
                  0.00    0.00    0.00 ^ clk (in)
     1    0.01                           clk (net)
                  0.00    0.00    0.00 ^ clkbuf_0_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.09    0.09 ^ clkbuf_0_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_0_clk (net)
                  0.03    0.00    0.09 ^ clkbuf_1_0_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.10    0.20 ^ clkbuf_1_0_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     1    0.00                           clknet_1_0_0_clk (net)
                  0.03    0.00    0.20 ^ clkbuf_1_0_1_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.31 ^ clkbuf_1_0_1_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_1_0_1_clk (net)
                  0.03    0.00    0.31 ^ clkbuf_2_1_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.42 ^ clkbuf_2_1_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     1    0.00                           clknet_2_1_0_clk (net)
                  0.03    0.00    0.42 ^ clkbuf_2_1_1_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.53 ^ clkbuf_2_1_1_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_2_1_1_clk (net)
                  0.03    0.00    0.53 ^ clkbuf_3_2_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.64 ^ clkbuf_3_2_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_3_2_0_clk (net)
                  0.03    0.00    0.64 ^ clkbuf_4_4_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.75 ^ clkbuf_4_4_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_4_4_0_clk (net)
                  0.03    0.00    0.75 ^ clkbuf_5_9_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.15    0.21    0.96 ^ clkbuf_5_9_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     6    0.05                           clknet_5_9_0_clk (net)
                  0.15    0.00    0.96 ^ clkbuf_leaf_219_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.15    1.11 ^ clkbuf_leaf_219_clk/X (sky130_fd_sc_hd__clkbuf_16)
     4    0.01                           clknet_leaf_219_clk (net)
                  0.03    0.00    1.11 ^ _37098_/CLK (sky130_fd_sc_hd__dfxtp_2)
                  0.07    0.33    1.44 ^ _37098_/Q (sky130_fd_sc_hd__dfxtp_2)
     6    0.01                           irq_pending[0] (net)
                  0.07    0.00    1.44 ^ _35948_/A1 (sky130_fd_sc_hd__mux2_1)
                  0.03    0.12    1.56 ^ _35948_/X (sky130_fd_sc_hd__mux2_1)
     1    0.00                           _18309_ (net)
                  0.03    0.00    1.56 ^ _37103_/D (sky130_fd_sc_hd__dfxtp_1)
                                  1.56   data arrival time

                          0.00    0.00   clock clk (rise edge)
                          0.00    0.00   clock source latency
                  0.00    0.00    0.00 ^ clk (in)
     1    0.01                           clk (net)
                  0.00    0.00    0.00 ^ clkbuf_0_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.09    0.09 ^ clkbuf_0_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_0_clk (net)
                  0.03    0.00    0.09 ^ clkbuf_1_1_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.10    0.20 ^ clkbuf_1_1_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     1    0.00                           clknet_1_1_0_clk (net)
                  0.03    0.00    0.20 ^ clkbuf_1_1_1_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.31 ^ clkbuf_1_1_1_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_1_1_1_clk (net)
                  0.03    0.00    0.31 ^ clkbuf_2_2_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.42 ^ clkbuf_2_2_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     1    0.00                           clknet_2_2_0_clk (net)
                  0.03    0.00    0.42 ^ clkbuf_2_2_1_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.53 ^ clkbuf_2_2_1_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_2_2_1_clk (net)
                  0.03    0.00    0.53 ^ clkbuf_3_5_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.64 ^ clkbuf_3_5_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_3_5_0_clk (net)
                  0.03    0.00    0.64 ^ clkbuf_4_10_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.75 ^ clkbuf_4_10_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_4_10_0_clk (net)
                  0.03    0.00    0.75 ^ clkbuf_5_20_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.17    0.22    0.98 ^ clkbuf_5_20_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     7    0.06                           clknet_5_20_0_clk (net)
                  0.17    0.00    0.98 ^ clkbuf_opt_5_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.16    1.14 ^ clkbuf_opt_5_clk/X (sky130_fd_sc_hd__clkbuf_16)
     1    0.01                           clknet_opt_5_clk (net)
                  0.03    0.00    1.14 ^ clkbuf_leaf_187_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.04    0.12    1.25 ^ clkbuf_leaf_187_clk/X (sky130_fd_sc_hd__clkbuf_16)
     8    0.02                           clknet_leaf_187_clk (net)
                  0.04    0.00    1.25 ^ _37103_/CLK (sky130_fd_sc_hd__dfxtp_1)
                          0.00    1.25   clock reconvergence pessimism
                         -0.03    1.22   library hold time
                                  1.22   data required time
-----------------------------------------------------------------------------
                                  1.22   data required time
                                 -1.56   data arrival time
-----------------------------------------------------------------------------
                                  0.34   slack (MET)


Startpoint: _38618_ (rising edge-triggered flip-flop clocked by clk)
Endpoint: _38545_ (rising edge-triggered flip-flop clocked by clk)
Path Group: clk
Path Type: max

Fanout     Cap    Slew   Delay    Time   Description
-----------------------------------------------------------------------------
                          0.00    0.00   clock clk (rise edge)
                          0.00    0.00   clock source latency
                  0.00    0.00    0.00 ^ clk (in)
     1    0.01                           clk (net)
                  0.00    0.00    0.00 ^ clkbuf_0_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.09    0.09 ^ clkbuf_0_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_0_clk (net)
                  0.03    0.00    0.09 ^ clkbuf_1_0_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.10    0.20 ^ clkbuf_1_0_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     1    0.00                           clknet_1_0_0_clk (net)
                  0.03    0.00    0.20 ^ clkbuf_1_0_1_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.31 ^ clkbuf_1_0_1_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_1_0_1_clk (net)
                  0.03    0.00    0.31 ^ clkbuf_2_1_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.42 ^ clkbuf_2_1_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     1    0.00                           clknet_2_1_0_clk (net)
                  0.03    0.00    0.42 ^ clkbuf_2_1_1_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.53 ^ clkbuf_2_1_1_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_2_1_1_clk (net)
                  0.03    0.00    0.53 ^ clkbuf_3_3_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.64 ^ clkbuf_3_3_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_3_3_0_clk (net)
                  0.03    0.00    0.64 ^ clkbuf_4_6_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11    0.75 ^ clkbuf_4_6_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_4_6_0_clk (net)
                  0.03    0.00    0.75 ^ clkbuf_5_12_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.17    0.22    0.98 ^ clkbuf_5_12_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     7    0.06                           clknet_5_12_0_clk (net)
                  0.17    0.00    0.98 ^ clkbuf_leaf_212_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.15    1.13 ^ clkbuf_leaf_212_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_leaf_212_clk (net)
                  0.03    0.00    1.13 ^ _38618_/CLK (sky130_fd_sc_hd__dfxtp_4)
                  0.33    0.54    1.67 ^ _38618_/Q (sky130_fd_sc_hd__dfxtp_4)
    33    0.12                           latched_stalu (net)
                  0.33    0.00    1.67 ^ _36519_/S (sky130_fd_sc_hd__mux2_1)
                  0.06    0.37    2.04 v _36519_/X (sky130_fd_sc_hd__mux2_1)
     2    0.00                           _00293_ (net)
                  0.06    0.00    2.04 v _36518_/A1 (sky130_fd_sc_hd__mux2_1)
                  0.05    0.28    2.32 v _36518_/X (sky130_fd_sc_hd__mux2_1)
     1    0.00                           _00294_ (net)
                  0.05    0.00    2.32 v _22741_/B (sky130_fd_sc_hd__and2_1)
                  0.03    0.15    2.47 v _22741_/X (sky130_fd_sc_hd__and2_1)
     1    0.00                           _00295_ (net)
                  0.03    0.00    2.47 v _35809_/A0 (sky130_fd_sc_hd__mux2_2)
                  0.07    0.28    2.75 v _35809_/X (sky130_fd_sc_hd__mux2_2)
     4    0.01                           _02560_ (net)
                  0.07    0.00    2.75 v _23131_/A (sky130_fd_sc_hd__xnor2_1)
                  0.07    0.15    2.89 v _23131_/Y (sky130_fd_sc_hd__xnor2_1)
     2    0.01                           _18154_ (net)
                  0.07    0.00    2.89 v _23136_/A_N (sky130_fd_sc_hd__nand3b_2)
                  0.07    0.21    3.10 v _23136_/Y (sky130_fd_sc_hd__nand3b_2)
     2    0.00                           _18156_ (net)
                  0.07    0.00    3.10 v _23143_/A2_N (sky130_fd_sc_hd__o2bb2ai_1)
                  0.06    0.14    3.24 v _23143_/Y (sky130_fd_sc_hd__o2bb2ai_1)
     2    0.00                           _18161_ (net)
                  0.06    0.00    3.24 v _23151_/A2_N (sky130_fd_sc_hd__o2bb2ai_1)
                  0.05    0.13    3.37 v _23151_/Y (sky130_fd_sc_hd__o2bb2ai_1)
     1    0.00                           _18167_ (net)
                  0.05    0.00    3.37 v _23152_/B1 (sky130_fd_sc_hd__o21ai_2)
                  0.12    0.07    3.44 ^ _23152_/Y (sky130_fd_sc_hd__o21ai_2)
     2    0.01                           _18168_ (net)
                  0.12    0.00    3.44 ^ _23159_/B1 (sky130_fd_sc_hd__o21ai_1)
                  0.06    0.09    3.53 v _23159_/Y (sky130_fd_sc_hd__o21ai_1)
     1    0.00                           _18173_ (net)
                  0.06    0.00    3.53 v _23160_/B1 (sky130_fd_sc_hd__o21ai_2)
                  0.13    0.07    3.60 ^ _23160_/Y (sky130_fd_sc_hd__o21ai_2)
     2    0.01                           _18174_ (net)
                  0.13    0.00    3.60 ^ _23167_/A1 (sky130_fd_sc_hd__a21o_1)
                  0.13    0.19    3.79 ^ _23167_/X (sky130_fd_sc_hd__a21o_1)
     2    0.01                           _18179_ (net)
                  0.13    0.00    3.79 ^ _23174_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.05    0.07    3.86 v _23174_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18184_ (net)
                  0.05    0.00    3.86 v _23182_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.20    0.18    4.04 ^ _23182_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18190_ (net)
                  0.20    0.00    4.04 ^ _23189_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.06    0.08    4.12 v _23189_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18195_ (net)
                  0.06    0.00    4.12 v _23196_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.15    0.15    4.27 ^ _23196_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18200_ (net)
                  0.15    0.00    4.27 ^ _23202_/A1 (sky130_fd_sc_hd__a21oi_2)
                  0.06    0.09    4.36 v _23202_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.01                           _18204_ (net)
                  0.06    0.00    4.36 v _23208_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.20    0.19    4.54 ^ _23208_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18208_ (net)
                  0.20    0.00    4.54 ^ _23214_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.06    0.08    4.63 v _23214_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18212_ (net)
                  0.06    0.00    4.63 v _23220_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.20    0.18    4.81 ^ _23220_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18216_ (net)
                  0.20    0.00    4.81 ^ _23226_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.06    0.08    4.89 v _23226_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18220_ (net)
                  0.06    0.00    4.89 v _23232_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.15    0.15    5.04 ^ _23232_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18224_ (net)
                  0.15    0.00    5.04 ^ _23238_/A1 (sky130_fd_sc_hd__a21oi_2)
                  0.06    0.09    5.13 v _23238_/Y (sky130_fd_sc_hd__a21oi_2)
     2    0.01                           _18228_ (net)
                  0.06    0.00    5.13 v _23245_/A2 (sky130_fd_sc_hd__o21bai_2)
                  0.20    0.19    5.32 ^ _23245_/Y (sky130_fd_sc_hd__o21bai_2)
     2    0.01                           _18233_ (net)
                  0.20    0.00    5.32 ^ _23251_/A1 (sky130_fd_sc_hd__a21oi_4)
                  0.07    0.09    5.41 v _23251_/Y (sky130_fd_sc_hd__a21oi_4)
     2    0.01                           _18237_ (net)
                  0.07    0.00    5.41 v _23258_/A2 (sky130_fd_sc_hd__o21bai_4)
                  0.16    0.16    5.57 ^ _23258_/Y (sky130_fd_sc_hd__o21bai_4)
     3    0.02                           _18242_ (net)
                  0.16    0.00    5.57 ^ _23268_/A (sky130_fd_sc_hd__nand3_4)
                  0.08    0.10    5.66 v _23268_/Y (sky130_fd_sc_hd__nand3_4)
     3    0.01                           _18248_ (net)
                  0.08    0.00    5.66 v _23284_/A2 (sky130_fd_sc_hd__o211ai_4)
                  0.20    0.21    5.87 ^ _23284_/Y (sky130_fd_sc_hd__o211ai_4)
     3    0.02                           _18260_ (net)
                  0.20    0.00    5.87 ^ _23294_/A (sky130_fd_sc_hd__nand3_4)
                  0.09    0.10    5.98 v _23294_/Y (sky130_fd_sc_hd__nand3_4)
     3    0.01                           _18266_ (net)
                  0.09    0.00    5.98 v _23310_/A2 (sky130_fd_sc_hd__o211ai_4)
                  0.16    0.18    6.16 ^ _23310_/Y (sky130_fd_sc_hd__o211ai_4)
     3    0.01                           _18278_ (net)
                  0.16    0.00    6.16 ^ _23315_/A (sky130_fd_sc_hd__nand2_1)
                  0.05    0.06    6.23 v _23315_/Y (sky130_fd_sc_hd__nand2_1)
     1    0.00                           _18281_ (net)
                  0.05    0.00    6.23 v _23318_/A (sky130_fd_sc_hd__nand2_1)
                  0.06    0.07    6.29 ^ _23318_/Y (sky130_fd_sc_hd__nand2_1)
     1    0.00                           _18284_ (net)
                  0.06    0.00    6.29 ^ _23319_/B (sky130_fd_sc_hd__xor2_1)
                  0.05    0.05    6.35 v _23319_/X (sky130_fd_sc_hd__xor2_1)
     1    0.00                           _01676_ (net)
                  0.05    0.00    6.35 v _36534_/A1 (sky130_fd_sc_hd__mux2_1)
                  0.05    0.27    6.62 v _36534_/X (sky130_fd_sc_hd__mux2_1)
     1    0.00                           _01677_ (net)
                  0.05    0.00    6.62 v _36988_/A1 (sky130_fd_sc_hd__mux4_1)
                  0.08    0.48    7.10 v _36988_/X (sky130_fd_sc_hd__mux4_1)
     1    0.00                           _01678_ (net)
                  0.08    0.00    7.10 v _36535_/A0 (sky130_fd_sc_hd__mux2_1)
                  0.05    0.28    7.37 v _36535_/X (sky130_fd_sc_hd__mux2_1)
     1    0.00                           _02529_ (net)
                  0.05    0.00    7.37 v _18990_/A (sky130_fd_sc_hd__or2b_1)
                  0.04    0.21    7.59 v _18990_/X (sky130_fd_sc_hd__or2b_1)
     1    0.00                           _16178_ (net)
                  0.04    0.00    7.59 v _18991_/C1 (sky130_fd_sc_hd__o211a_1)
                  0.03    0.10    7.68 v _18991_/X (sky130_fd_sc_hd__o211a_1)
     1    0.00                           _03989_ (net)
                  0.03    0.00    7.68 v _38545_/D (sky130_fd_sc_hd__dfxtp_1)
                                  7.68   data arrival time

                         12.00   12.00   clock clk (rise edge)
                          0.00   12.00   clock source latency
                  0.00    0.00   12.00 ^ clk (in)
     1    0.01                           clk (net)
                  0.00    0.00   12.00 ^ clkbuf_0_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.09   12.09 ^ clkbuf_0_clk/X (sky130_fd_sc_hd__clkbuf_16)
     2    0.00                           clknet_0_clk (net)
                  0.03    0.00   12.09 ^ clkbuf_1_1_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.10   12.20 ^ clkbuf_1_1_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     1    0.00                           clknet_1_1_0_clk (net)
                  0.03    0.00   12.20 ^ clkbuf_1_1_1_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11   12.31 ^ clkbuf_1_1_1_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_1_1_1_clk (net)
                  0.03    0.00   12.31 ^ clkbuf_2_2_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11   12.42 ^ clkbuf_2_2_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     1    0.00                           clknet_2_2_0_clk (net)
                  0.03    0.00   12.42 ^ clkbuf_2_2_1_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11   12.53 ^ clkbuf_2_2_1_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_2_2_1_clk (net)
                  0.03    0.00   12.53 ^ clkbuf_3_4_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11   12.64 ^ clkbuf_3_4_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_3_4_0_clk (net)
                  0.03    0.00   12.64 ^ clkbuf_4_8_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.03    0.11   12.75 ^ clkbuf_4_8_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     2    0.00                           clknet_4_8_0_clk (net)
                  0.03    0.00   12.75 ^ clkbuf_5_17_0_clk/A (sky130_fd_sc_hd__clkbuf_4)
                  0.13    0.19   12.95 ^ clkbuf_5_17_0_clk/X (sky130_fd_sc_hd__clkbuf_4)
     5    0.04                           clknet_5_17_0_clk (net)
                  0.13    0.00   12.95 ^ clkbuf_leaf_182_clk/A (sky130_fd_sc_hd__clkbuf_16)
                  0.03    0.15   13.09 ^ clkbuf_leaf_182_clk/X (sky130_fd_sc_hd__clkbuf_16)
     5    0.01                           clknet_leaf_182_clk (net)
                  0.03    0.00   13.09 ^ _38545_/CLK (sky130_fd_sc_hd__dfxtp_1)
                          0.00   13.09   clock reconvergence pessimism
                         -0.11   12.98   library setup time
                                 12.98   data required time
-----------------------------------------------------------------------------
                                 12.98   data required time
                                 -7.68   data arrival time
-----------------------------------------------------------------------------
                                  5.30   slack (MET)

```


```
report_clock_skew -hold
report_clock_skew -setup
set ::env(CTS_CLK_BUFFER_LIST) [linsert $::env(CTS_CLK_BUFFER_LIST) 0 sky130_fd_sc_hd__clkbuf_1]      (Adding back clkbuf1)
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/afb4cc6a934438bb6c510b5e831c9a65e21c0414/PD%23day18/clock_skew.png">
</details>
</details>

## Day-19-Topic: Final steps for RTL2GDS

<details>
<summary> Theory </summary>
	
**TritonRoute feature 1 - Honors pre-processed route guides**
OpenLane routing stage consists of two stages:

    - Global Routing: Form routing guides that can route all the nets. The tool used is FastRoute.
    - Detailed Routing: Uses the global routing's guide to connect the pins with the least amount of wire and bends. The tool used is TritonRoute.

Triton Route

    - In fast routing, a rough routing draft is created.

    - Fast routing is the engine which is used for global routing.

    - During global routing, the region is divided into grid cells, which acts as a route guide for the TritonRoute to be used for the detail routing, where an algorithm is used to find the best connectivity between the points.

    - It honours the preprocessed route guides (obtained after fast routes), wherein the tool attempts as much as possible to route within route guides.

    - The tool assumes route guides for each net satisfies inter-guide connectivity.

    - Triton route works on proposed MILP (Mixed integer liner programming) based panel routing scheme with intra-layer parallel and inter-layer sequential routing framework, to finds the best way to perform the routing.

    - Intra-layer refers to the routing within a layer, while inter-layer routing refers to routing between layers, through the uses of vias.
    
    
**TritonRoute method to handle connectivity**

    Inputs file needed for TritonRoute are the LEF file, DEF file, and the Preprocessed route guides.

    Outputs from the TritonRoute would be a detailed routing solution with optimized wire-length and via count.

    Constraints needed in TritonRoute are the route guide honouring, connectivity constraints and design rules.

TritonRoute method

    TritonRoute handles connectivity through 2 ways
        Access Point (AP)
        Access Point Cluster (APC)

    Access point: on-grid point on the metal layer of the route guide, and is used to connect to lower-layer segments, upper-layer segments, pins or IO ports.

    Access Point Cluster: a union of all Access Points derived from the same lower-layer segment, upper-layer guide, a pin or an IO port.

    Access point refers to the point where the via can be placed to allow connectivity between layers.

    The objective of the Mixed Integer Liner Programming (MILP) is to connect one access point to another optimally.
        Choose one of the access points where the via should be dropped
        Determining how the first access point will be connected to the next access point.
</details>

<details>
<summary> LAB </summary>
	
IN openlane:
	
```
package require openlane 0.9
prep -design picorv32a
echo $::env(CURRENT_DEF)    (Ensure current_def is on the CTS stage)
gen_pdn                     (To generate power distribution network)

echo $::env(CURRENT_DEF)            (Ensure the def file of pdn has been created)
echo $::env(ROUTING_STRATEGY)
run_routing
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/6d03dff2457176598202594cc690baf27ce5a7bb/PD%23Day19/routing.png">
</details>

## Day-20-Topic: Floorplanning and power planning labs

<details>
<summary> LABS </summary>

gitclone:
```
git clone https://github.com/manili/VSDBabySoC.git
git clone https://github.com/Devipriya1921/VSDBabySoC_ICC2.git
git clone https://github.com/bharath19-gs/synopsys_ICC2flow_130nm.git
git clone https://github.com/kunalg123/icc2_workshop_collaterals.git
git clone https://github.com/google/skywater-pdk-libs-sky130_fd_sc_hd.git
git clone https://github.com/kunalg123/sky130RTLDesignAndSynthesisWorkshop.git
```

open vsdbabysoc.tcl and make changes:
```ruby
set target_library [list /home/prakhar.g2/Samsung-PD-Training-/day20/libs/sky130_fd_sc_hd__tt_025C_1v80.db /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsdpll.db /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsddac.db]
set link_library [list /home/prakhar.g2/Samsung-PD-Training-/day20/libs/sky130_fd_sc_hd__tt_025C_1v80.db /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsdpll.db /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsddac.db] 
set symbol_library ""

read_file -format verilog {/home/prakhar.g2/Samsung-PD-Training-/day20/VSDBabySoC_ICC2/vsdbabysoc.v}
read_verilog /home/prakhar.g2/Samsung-PD-Training-/day20/VSDBabySoC_ICC2/rvmyth.v
read_verilog /home/prakhar.g2/Samsung-PD-Training-/day20/VSDBabySoC_ICC2/clk_gate.v

 read_lib /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsdpll.lib
 read_lib /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsddac.lib
read_lib /home/prakhar.g2/Samsung-PD-Training-/day20/libs/sky130_fd_sc_hd__tt_025C_1v80.lib
set current_design {vsdbabysoc_1}

analyze -library WORK -format verilog {/home/prakhar.g2/Samsung-PD-Training-/day20/VSDBabySoC_ICC2/vsdbabysoc.v}
elaborate vsdbabysoc -architecture verilog -library WORK
analyze {}

set_units -time ns
create_clock [get_pins {pll/CLK}] -name clk -period 10
set_max_area 8000;
set_max_fanout 5 vsdbabysoc;
set_max_transition 10 vsdbabysoc
#set_min_delay -max 10 -clock[get_clk myclk] [get_ports OUT]
set_max_delay 10 -from dac/OUT -to [get_ports OUT]


#set_input_delay[expr 0.34][all_inputs]



set_clock_latency -source 2 [get_clocks clk];
set_clock_latency 1 [get_clocks clk];
set_clock_uncertainty -setup 0.5 [get_clocks clk];
set_clock_uncertainty -hold 0.5 [get_clocks clk];

set_input_delay -max 4 -clock [get_clocks clk] [get_ports VCO_IN];
set_input_delay -max 4 -clock [get_clocks clk] [get_ports ENb_CP];
set_input_delay -min 1 -clock [get_clocks clk] [get_ports VCO_IN];
set_input_delay -min 1 -clock [get_clocks clk] [get_ports ENb_CP];

set_input_transition -max 0.4 [get_ports ENb_CP];
set_input_transition -max 0.4 [get_ports VCO_IN];
set_input_transition -min 0.1 [get_ports ENb_CP];
set_input_transition -min 0.1 [get_ports VCO_IN];





set_load -max 0.5 [get_ports OUT];
set_load -min 0.5 [get_ports OUT];

check_design

compile_ultra

file mkdir /home/prakhar.g2/Samsung-PD-Training-/day20/reports
write -hierarchy -format verilog -output /home/prakhar.g2/Samsung-PD-Training-/day20/reports/vsdbabysoc_gtlvl.v
write_sdc -nosplit -version 2.0  /home/prakhar.g2/Samsung-PD-Training-/day20/reports/vsdbabysoc.sdc
report_area -hierarchy > /home/prakhar.g2/Samsung-PD-Training-/day20/reports/vsdbabysoc.area
report_timing > /home/prakhar.g2/Samsung-PD-Training-/day20/reports/vsdbabysoc.timing
report_power -hierarchy > /home/prakhar.g2/Samsung-PD-Training-/day20/reports/vsdbabysoc.power

gui_start

```
Making Changes in avsdpll.lib and delete unwanted section.

Then source vsdbabysoc.tcl file.

**Reports**
Report area:
```
****************************************
Report : area
Design : vsdbabysoc_1
Version: T-2022.03-SP5-1
Date   : Tue Oct 17 11:59:04 2023
****************************************

Information: Updating design information... (UID-85)
Library(s) Used:

    sky130_fd_sc_hd__tt_025C_1v80 (File: /home/prakhar.g2/Samsung-PD-Training-/day20/libs/sky130_fd_sc_hd__tt_025C_1v80.db)
    avsddac (File: /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsddac.db)
    avsdpll (File: /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsdpll.db)

Number of ports:                           19
Number of nets:                          2775
Number of cells:                         2745
Number of combinational cells:           2066
Number of sequential cells:               676
Number of macros/black boxes:               2
Number of buf/inv:                        575
Number of references:                       4

Combinational area:              11415.948637
Buf/Inv area:                     2158.319932
Noncombinational area:           13532.978775
Macro/Black Box area:                0.000000
Net Interconnect area:      undefined  (No wire load specified)

Total cell area:                 24948.927412
Total area:                 undefined

Hierarchical area distribution
------------------------------

                                  Global cell area            Local cell area
                                  -------------------  ------------------------------ 
Hierarchical cell                 Absolute    Percent  Combi-      Noncombi-   Black-
                                  Total       Total    national    national    boxes   Design
--------------------------------  ----------  -------  ----------  ----------  ------  ---------
vsdbabysoc_1                      24948.9274    100.0      3.7536      0.0000  0.0000  vsdbabysoc_1
core1                             24945.1738    100.0  11412.1950  13532.9788  0.0000  rvmyth
--------------------------------  ----------  -------  ----------  ----------  ------  ---------
Total                                                  11415.9486  13532.9788  0.0000

1
```
Report Power:
```
 
****************************************
Report : power
        -hier
        -analysis_effort low
Design : vsdbabysoc_1
Version: T-2022.03-SP5-1
Date   : Tue Oct 17 11:59:04 2023
****************************************


Library(s) Used:

    sky130_fd_sc_hd__tt_025C_1v80 (File: /home/prakhar.g2/Samsung-PD-Training-/day20/libs/sky130_fd_sc_hd__tt_025C_1v80.db)
    avsddac (File: /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsddac.db)
    avsdpll (File: /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsdpll.db)


Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top


Global Operating Voltage = 1.8  
Power-specific unit information :
    Voltage Units = 1V
    Capacitance Units = 1.000000pf
    Time Units = 1ns
    Dynamic Power Units = 1mW    (derived from V,C,T units)
    Leakage Power Units = 1nW


--------------------------------------------------------------------------------
                                       Switch   Int      Leak     Total
Hierarchy                              Power    Power    Power    Power    %
--------------------------------------------------------------------------------
vsdbabysoc_1                              0.556    2.850    8.077    3.406 100.0
  dac (avsddac)                        8.10e-03    0.000    0.000 8.10e-03   0.2
  pll (avsdpll)                           0.411    0.000    0.000    0.411  12.1
  core1 (rvmyth)                          0.137    2.850    8.074    2.987  87.7
1
```


Report Timing:

```
 
****************************************
Report : timing
        -path full
        -delay max
        -max_paths 1
Design : vsdbabysoc_1
Version: T-2022.03-SP5-1
Date   : Tue Oct 17 11:59:04 2023
****************************************

Operating Conditions: tt_025C_1v80   Library: sky130_fd_sc_hd__tt_025C_1v80
Wire Load Model Mode: top

  Startpoint: core1/CPU_is_addi_a3_reg
              (rising edge-triggered flip-flop clocked by clk)
  Endpoint: core1/CPU_Xreg_value_a4_reg[27][30]
            (rising edge-triggered flip-flop clocked by clk)
  Path Group: clk
  Path Type: max

  Point                                                   Incr       Path
  --------------------------------------------------------------------------
  clock clk (rise edge)                                   0.00       0.00
  clock network delay (ideal)                             0.00       0.00
  core1/CPU_is_addi_a3_reg/CLK (sky130_fd_sc_hd__dfxtp_1)
                                                          0.00       0.00 r
  core1/CPU_is_addi_a3_reg/Q (sky130_fd_sc_hd__dfxtp_1)
                                                          0.81       0.81 r
  core1/U464/Y (sky130_fd_sc_hd__nor2_1)                  0.13       0.94 f
  core1/U467/Y (sky130_fd_sc_hd__nand2_1)                 0.13       1.07 r
  core1/U320/Y (sky130_fd_sc_hd__nand2_2)                 0.25       1.32 f
  core1/U469/X (sky130_fd_sc_hd__a22o_1)                  0.29       1.61 f
  core1/U554/X (sky130_fd_sc_hd__xor2_1)                  0.16       1.77 f
  core1/U132/X (sky130_fd_sc_hd__or2_0)                   0.22       1.99 f
  core1/U555/Y (sky130_fd_sc_hd__a21oi_1)                 0.18       2.17 r
  core1/U557/Y (sky130_fd_sc_hd__o21ai_1)                 0.11       2.28 f
  core1/U560/Y (sky130_fd_sc_hd__a21oi_1)                 0.19       2.47 r
  core1/U562/Y (sky130_fd_sc_hd__o21ai_1)                 0.11       2.58 f
  core1/U566/Y (sky130_fd_sc_hd__a21oi_1)                 0.19       2.78 r
  core1/U568/Y (sky130_fd_sc_hd__o21ai_1)                 0.11       2.88 f
  core1/U572/Y (sky130_fd_sc_hd__a21oi_1)                 0.19       3.08 r
  core1/U574/Y (sky130_fd_sc_hd__o21ai_1)                 0.11       3.19 f
  core1/U578/Y (sky130_fd_sc_hd__a21oi_1)                 0.19       3.38 r
  core1/U580/Y (sky130_fd_sc_hd__o21ai_1)                 0.11       3.49 f
  core1/U584/Y (sky130_fd_sc_hd__a21oi_1)                 0.19       3.68 r
  core1/U586/Y (sky130_fd_sc_hd__o21ai_1)                 0.11       3.79 f
  core1/U590/Y (sky130_fd_sc_hd__a21oi_1)                 0.19       3.98 r
  core1/U592/Y (sky130_fd_sc_hd__o21ai_1)                 0.11       4.09 f
  core1/U596/Y (sky130_fd_sc_hd__a21oi_1)                 0.19       4.28 r
  core1/U598/Y (sky130_fd_sc_hd__o21ai_1)                 0.11       4.39 f
  core1/U602/Y (sky130_fd_sc_hd__a21oi_1)                 0.19       4.58 r
  core1/U604/Y (sky130_fd_sc_hd__o21ai_1)                 0.11       4.69 f
  core1/U99/X (sky130_fd_sc_hd__a21o_1)                   0.17       4.86 f
  core1/U336/COUT (sky130_fd_sc_hd__fa_1)                 0.37       5.23 f
  core1/U4/COUT (sky130_fd_sc_hd__fa_1)                   0.40       5.63 f
  core1/U94/Y (sky130_fd_sc_hd__clkinv_1)                 0.06       5.69 r
  core1/U609/Y (sky130_fd_sc_hd__o21ai_1)                 0.06       5.75 f
  core1/U847/COUT (sky130_fd_sc_hd__fa_2)                 0.34       6.09 f
  core1/U3/COUT (sky130_fd_sc_hd__fa_1)                   0.37       6.46 f
  core1/U340/COUT (sky130_fd_sc_hd__fa_1)                 0.38       6.85 f
  core1/U89/COUT (sky130_fd_sc_hd__fa_2)                  0.35       7.20 f
  core1/U87/X (sky130_fd_sc_hd__a21o_1)                   0.17       7.37 f
  core1/U32/COUT (sky130_fd_sc_hd__fa_1)                  0.37       7.74 f
  core1/U85/COUT (sky130_fd_sc_hd__fa_1)                  0.38       8.12 f
  core1/U82/COUT (sky130_fd_sc_hd__fa_1)                  0.38       8.50 f
  core1/U339/SUM (sky130_fd_sc_hd__fa_1)                  0.45       8.95 f
  core1/U207/Y (sky130_fd_sc_hd__nand2_1)                 0.29       9.24 r
  core1/U676/Y (sky130_fd_sc_hd__o22ai_1)                 0.10       9.34 f
  core1/CPU_Xreg_value_a4_reg[27][30]/D (sky130_fd_sc_hd__dfxtp_1)
                                                          0.00       9.34 f
  data arrival time                                                  9.34

  clock clk (rise edge)                                  10.00      10.00
  clock network delay (ideal)                             0.00      10.00
  clock uncertainty                                      -0.50       9.50
  core1/CPU_Xreg_value_a4_reg[27][30]/CLK (sky130_fd_sc_hd__dfxtp_1)
                                                          0.00       9.50 r
  library setup time                                     -0.16       9.34
  data required time                                                 9.34
  --------------------------------------------------------------------------
  data required time                                                 9.34
  data arrival time                                                 -9.34
  --------------------------------------------------------------------------
  slack (MET)                                                        0.00


  Startpoint: dac/OUT (internal path startpoint)
  Endpoint: OUT (output port)
  Path Group: default
  Path Type: max

  Point                                    Incr       Path
  -----------------------------------------------------------
  input external delay                     0.00       0.00 r
  dac/OUT (avsddac)                        0.00       0.00 r
  OUT (out)                                0.00       0.00 r
  data arrival time                                   0.00

  max_delay                               10.00      10.00
  output external delay                    0.00      10.00
  data required time                                 10.00
  -----------------------------------------------------------
  data required time                                 10.00
  data arrival time                                   0.00
  -----------------------------------------------------------
  slack (MET)                                        10.00


1
```


Report Constraints:
```
# Created by write_sdc on Tue Oct 17 11:59:04 2023

###################################################################
set sdc_version 2.0

set_units -time ns
set_max_area 8000
set_load -pin_load 0.5 [get_ports OUT]
set_load -min -pin_load 0.5 [get_ports OUT]
create_clock [get_pins pll/CLK]  -name clk  -period 10  -waveform {0 5}
set_clock_uncertainty 0.5  [get_clocks clk]
set_max_delay 10  -from [get_pins dac/OUT]  -to [get_ports OUT]
set_input_delay -clock clk  -max 4  [get_ports VCO_IN]
set_input_delay -clock clk  -min 1  [get_ports VCO_IN]
set_input_delay -clock clk  -max 4  [get_ports ENb_CP]
set_input_delay -clock clk  -min 1  [get_ports ENb_CP]
set_input_transition -max 0.4  [get_ports VCO_IN]
set_input_transition -min 0.1  [get_ports VCO_IN]
set_input_transition -max 0.4  [get_ports ENb_CP]
set_input_transition -min 0.1  [get_ports ENb_CP]
```

**Output Schematic** :

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/d492fa538638c62f08e973c92817549033b2346f/PD%23Day20/vsdbabysoc_1.png">

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/d492fa538638c62f08e973c92817549033b2346f/PD%23Day20/vsdbabysoc_2.png">

rvmyth core:

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/vsdbabysoc_3.png">

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/vsdbabysoc_4.png">

**Performing physical design**
We make the required changes in following files : top.tcl , icc2_common_setup.tcl, icc2_dp_setup.tcl, init_design.read_parasitic_tech_example.tcl, init_design.mcmm_example.auto_expanded.tcl, pns_example.tcl.

*Output Layout*:
Invoking icc2_shell
```
source top.tcl
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/pnr_run.png">

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/Screenshot%20from%202023-10-17%2011-22-51.png">
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/pnr_zoom.png">


In icc2_shell:
```
set_propagated_clock [all_clocks]             (Converting clock object from ideal clock to propagated clock)
report_timing
estimate_timing
report_constraints -all_violators -nosplit -verbose -significant_digits 4
```

Report_timing:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/report_timing.png">

Estimate_timing:

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/estiomate_timingt.png">
estimate_timing report could not be generated since there is no estimate timing rules detected on nets

violators.rpt

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/no_of_violations.png">

**Observing for 40% of utilization**
Make changes in top.tcl at core utilization of 0.4 ( earlier it was just 7%) then source the top.tcl in icc2.

Output layout:
The core of DAC now seems to be bigger in size as compared to previous run where core utilization was 7%
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/layout_40uti.png">

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/layout_40uti_zoom.png">

Slack:

The slack seems to be decreased from the previous run

Report_timing:

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/report_timing_40uti.png">

Violation.rpt


<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/12e424de5462e0a9f4f345c138e0b14a6dd641e4/PD%23Day20/no_of_VIOLATION_40uti.png">

</details>

## Day-21-Topic: Placement and CTS labs

<details>
<summary> Theory </summary>

**Placement**

    Pre-placement sanity check: floating pins in netlist, unconstrained pins, timing, pin direction mismatch, and etc.
     

What is placement?

    - Standard cell
    - Placement stages including:
         Global placement
         Legalization
         Detailed placement

Placement objectives

    - Congestion
    - Performance
    - Timing
    - Routability
    - Runtime
    
**Clock Tree Synthesis (CTS)**

Inputs of CTS

    - Placement DB
    - CTS Spec file

- CTS Steps

    - Clustering
    - DRV Fixing
    - Insertion Delay Reduction
    - Power reduction
    - Balancing
    - Post-conditioning

- CTS Quality Checks

    - Skew
    - Pulse width
    - Duty cycle
    - Latency
    - Clock tree power
    - Signal integrity and Crosstalk
    - Timing analysis and fixing

Source: notes were taken from lecture slides
</details>


<details>
<summary> LABs </summary>
	
**Placement, CTS and Routing**

Observing for 40% of utilization :

Modifying constraints:
```
gvim /home/prakhar.g2/Samsung-PD-Training-/day20/VSDBabySoC_ICC2
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ab874fdf5d216d7abb4a83d39cfd19bf5eecfab/PD%23day21/modifying_constraints.png">

Rerun the script in dc_shell and generate reports.

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ab874fdf5d216d7abb4a83d39cfd19bf5eecfab/PD%23day21/Modified_constraint_2.png">

Using core utilization = 40% in top.tcl

Script in top.tcl


    - create_placement is used to create placement for the design. floorplan option is selected to make the design planning styled as placement.
    - Pin Placement is done by sourcing pns.tcl to sync with the current technology file regarding power grid creation.
    
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ab874fdf5d216d7abb4a83d39cfd19bf5eecfab/PD%23day21/create_placement.png">

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ab874fdf5d216d7abb4a83d39cfd19bf5eecfab/PD%23day21/create_placemnet_2.png">

**Reports that were generated from the run**
```
gvim /home/prakhar.g2/Samsung-PD-Training-/day20/VSDBabySoC_ICC2/standaloneFlow/rpts_icc2/place_pins/check_design.pre_pin_placement
```

There are 3 warnings in total for pre-placement while checking the design.


```
 Report : check_design 
 Options: { dp_pre_pin_placement }
 Design : vsdbabysoc_1
 Version: T-2022.03
 Date   : Wed Sep 14 02:05:30 2022
****************************************

Running atomic-check 'dp_pre_pin_placement'

  *** EMS Message summary ***
  ----------------------------------------------------------------------------------------------------
  Total 0 EMS messages : 0 errors, 0 warnings, 0 info.
  ----------------------------------------------------------------------------------------------------

  *** Non-EMS message summary ***
  ----------------------------------------------------------------------------------------------------
  Rule         Type   Count      Message
  ----------------------------------------------------------------------------------------------------
  DPPA-268            3          Didn't find any enabled planning block for %s.
  DPPA-475            1          Detected dimension mismatch between the boundary and bbox, for b...
  ----------------------------------------------------------------------------------------------------
  Total 4 non-EMS messages : 0 errors, 4 warnings, 0 info.
  ----------------------------------------------------------------------------------------------------
Information: Non-EMS messages are saved into file 'check_design2022Sep14020530.log'.
1
```

report_port_placement.rpt

```
Report : report_pin_placement
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Tue Oct 17 12:02:20 2023
****************************************
block vsdbabysoc_1 pin OUT layer met3 side 3 offset 712.64
block vsdbabysoc_1 pin reset layer met1 side 1 offset 773.84
block vsdbabysoc_1 pin VCO_IN layer met2 side 4 offset 1204.28
block vsdbabysoc_1 pin ENb_CP layer met2 side 4 offset 1236.02
block vsdbabysoc_1 pin ENb_VCO layer met2 side 4 offset 1235.1
block vsdbabysoc_1 pin REF layer met2 side 4 offset 1228.66
block vsdbabysoc_1 pin VREFH layer met1 side 1 offset 607.24
```

icc2_output.txt

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ab874fdf5d216d7abb4a83d39cfd19bf5eecfab/PD%23day21/icc2_output.png">

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ab874fdf5d216d7abb4a83d39cfd19bf5eecfab/PD%23day21/icc2_output_2.png">

vsdbabysoc.post_estimated_timing.rpt

Post estimated timing report for the design shows the slack has met with the value of 0.69.
```
****************************************
Report : timing
        -path_type full
        -delay_type max
        -max_paths 1
        -report_by design
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Tue Oct 17 12:02:21 2023
****************************************

  Startpoint: core1/CPU_is_add_a3_reg (rising edge-triggered flip-flop clocked by clk)
  Endpoint: core1/CPU_Xreg_value_a4_reg[18][31] (rising edge-triggered flip-flop clocked by clk)
  Mode: func1
  Corner: estimated_corner
  Scenario: func1::estimated_corner
  Path Group: clk
  Path Type: max

  Point                                            Incr      Path       Delta Incr     Analysis
  ----------------------------------------------------------------------------------------------------
  clock clk (rise edge)                            0.00      0.00
  clock network delay (ideal)                      0.00      0.00

  core1/CPU_is_add_a3_reg/CLK (sky130_fd_sc_hd__dfxtp_1)
                                                   0.00      0.00 r      0.00
  core1/CPU_is_add_a3_reg/Q (sky130_fd_sc_hd__dfxtp_1)
                                                   0.45      0.45 r ~    0.14        Size: None
  core1/U464/Y (sky130_fd_sc_hd__nor2_1)           0.06 e    0.51 f ~    0.00        Size: sky130_fd_sc_hd__nor2_8
  core1/U467/Y (sky130_fd_sc_hd__nand2_1)          0.11 e    0.62 r ~   -0.05        Size: sky130_fd_sc_hd__nand2_8
  core1/U320/Y (sky130_fd_sc_hd__nand2_2)          0.16 e    0.78 f ~   -0.18        Size: sky130_fd_sc_hd__nand2_8
  core1/U469/X (sky130_fd_sc_hd__a22o_1)           0.24 e    1.02 f ~   -0.11        Size: sky130_fd_sc_hd__a22o_4
  core1/U554/X (sky130_fd_sc_hd__xor2_1)           0.18      1.20 f ~    0.08        Size: None
  core1/U132/X (sky130_fd_sc_hd__or2_0)            0.26      1.46 f ~    0.02        Size: None
  core1/U555/Y (sky130_fd_sc_hd__a21oi_1)          0.19 e    1.65 r ~   -0.04        Size: sky130_fd_sc_hd__a21oi_4
  core1/U557/Y (sky130_fd_sc_hd__o21ai_1)          0.07 e    1.72 f ~   -0.06        Size: sky130_fd_sc_hd__o21ai_4
  core1/U560/Y (sky130_fd_sc_hd__a21oi_1)          0.18 e    1.90 r ~   -0.05        Size: sky130_fd_sc_hd__a21oi_4
  core1/U562/Y (sky130_fd_sc_hd__o21ai_1)          0.07 e    1.98 f ~   -0.06        Size: sky130_fd_sc_hd__o21ai_4
  core1/U566/Y (sky130_fd_sc_hd__a21oi_1)          0.18 e    2.16 r ~   -0.05        Size: sky130_fd_sc_hd__a21oi_4
  core1/U568/Y (sky130_fd_sc_hd__o21ai_1)          0.11 e    2.27 f ~   -0.13        Size: sky130_fd_sc_hd__o21ai_4
  core1/U572/Y (sky130_fd_sc_hd__a21oi_1)          0.18 e    2.45 r ~   -0.10        Size: sky130_fd_sc_hd__a21oi_4
  core1/U574/Y (sky130_fd_sc_hd__o21ai_1)          0.08 e    2.53 f ~   -0.06        Size: sky130_fd_sc_hd__o21ai_4
  core1/U578/Y (sky130_fd_sc_hd__a21oi_1)          0.18 e    2.71 r ~   -0.05        Size: sky130_fd_sc_hd__a21oi_4
  core1/U580/Y (sky130_fd_sc_hd__o21ai_1)          0.08 e    2.78 f ~   -0.07        Size: sky130_fd_sc_hd__o21ai_4
  core1/U584/Y (sky130_fd_sc_hd__a21oi_1)          0.19 e    2.97 r ~   -0.06        Size: sky130_fd_sc_hd__a21oi_4
  core1/U586/Y (sky130_fd_sc_hd__o21ai_1)          0.07 e    3.04 f ~   -0.06        Size: sky130_fd_sc_hd__o21ai_4
  core1/U590/Y (sky130_fd_sc_hd__a21oi_1)          0.19 e    3.23 r ~   -0.05        Size: sky130_fd_sc_hd__a21oi_4
  core1/U592/Y (sky130_fd_sc_hd__o21ai_1)          0.08 e    3.31 f ~   -0.08        Size: sky130_fd_sc_hd__o21ai_4
  core1/U596/Y (sky130_fd_sc_hd__a21oi_1)          0.18 e    3.49 r ~   -0.06        Size: sky130_fd_sc_hd__a21oi_4
  core1/U598/Y (sky130_fd_sc_hd__o21ai_1)          0.07 e    3.56 f ~   -0.06        Size: sky130_fd_sc_hd__o21ai_4
  core1/U602/Y (sky130_fd_sc_hd__a21oi_1)          0.18 e    3.74 r ~   -0.05        Size: sky130_fd_sc_hd__a21oi_4
  core1/U604/Y (sky130_fd_sc_hd__o21ai_1)          0.06 e    3.80 f ~   -0.07        Size: sky130_fd_sc_hd__o21ai_4
  core1/U99/X (sky130_fd_sc_hd__a21o_1)            0.18 e    3.99 f ~   -0.00        Size: None
  core1/U336/COUT (sky130_fd_sc_hd__fa_1)          0.40      4.39 f ~    0.00        Size: None
  core1/U4/COUT (sky130_fd_sc_hd__fa_1)            0.44      4.82 f ~    0.01        Size: None
  core1/U94/Y (sky130_fd_sc_hd__clkinv_1)          0.07 e    4.89 r ~   -0.00        Size: sky130_fd_sc_hd__inv_2
  core1/U609/Y (sky130_fd_sc_hd__o21ai_1)          0.06 e    4.95 f ~   -0.01        Size: sky130_fd_sc_hd__o21ai_2
  core1/U847/COUT (sky130_fd_sc_hd__fa_2)          0.27 e    5.22 f ~   -0.07        Size: sky130_fd_sc_hd__fah_1
  core1/U3/COUT (sky130_fd_sc_hd__fa_1)            0.39      5.61 f ~    0.00        Size: None
  core1/U340/COUT (sky130_fd_sc_hd__fa_1)          0.39      6.00 f ~   -0.00        Size: None
  core1/U89/COUT (sky130_fd_sc_hd__fa_2)           0.36      6.36 f ~   -0.00        Size: None
  core1/U87/X (sky130_fd_sc_hd__a21o_1)            0.18      6.54 f ~   -0.00        Size: None
  core1/U32/COUT (sky130_fd_sc_hd__fa_1)           0.37      6.92 f ~    0.00        Size: None
  core1/U85/COUT (sky130_fd_sc_hd__fa_1)           0.39      7.31 f ~   -0.00        Size: None
  core1/U82/COUT (sky130_fd_sc_hd__fa_1)           0.39      7.70 f ~   -0.00        Size: None
  core1/U339/COUT (sky130_fd_sc_hd__fa_1)          0.38      8.08 f ~    0.00        Size: None
  core1/U613/X (sky130_fd_sc_hd__xor2_1)           0.42      8.50 r ~    0.17        Size: None
  core1/U304/Y (sky130_fd_sc_hd__nand2_2)          0.13 e    8.63 f ~   -0.14        Size: sky130_fd_sc_hd__nand2_8
  core1/U650/Y (sky130_fd_sc_hd__o22ai_1)          0.10 e    8.74 r ~   -0.13        Size: sky130_fd_sc_hd__o22ai_2
  core1/CPU_Xreg_value_a4_reg[18][31]/D (sky130_fd_sc_hd__dfxtp_1)
                                                   0.00 e    8.74 r      0.00        Buff: Short net
  data arrival time                                          8.74       -1.42        Delta arrival

  clock clk (rise edge)                           10.00     10.00
  clock network delay (ideal)                      0.00     10.00
  core1/CPU_Xreg_value_a4_reg[18][31]/CLK (sky130_fd_sc_hd__dfxtp_1)
                                                   0.00     10.00 r      0.00
  clock uncertainty                               -0.50      9.50
  library setup time                              -0.07      9.43
  data required time                                         9.43
  ----------------------------------------------------------------------------------------------------
  data required time                                         9.43
  data arrival time                                         -8.74
  ----------------------------------------------------------------------------------------------------
  slack (MET)                                                0.69

```

vsdbabysoc.post_estimated_timing.qor

- Post estimated timing qor shows there is no violating path reported with 34 nets with violations, 13 max trans violations, and 33 max cap violations.
```
****************************************
Report : qor
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Tue Oct 17 12:02:21 2023
****************************************


Scenario           'func1::estimated_corner'
Timing Path Group  'default'
----------------------------------------
Levels of Logic:                      1
Critical Path Length:              0.05
Critical Path Slack:               9.95
Critical Path Clk Period:            --
Total Negative Slack:              0.00
No. of Violating Paths:               0
----------------------------------------

Scenario           'func1::estimated_corner'
Timing Path Group  'clk'
----------------------------------------
Levels of Logic:                     41
Critical Path Length:              8.74
Critical Path Slack:               0.69
Critical Path Clk Period:         10.00
Total Negative Slack:              0.00
No. of Violating Paths:               0
----------------------------------------


Cell Count
----------------------------------------
Hierarchical Cell Count:              1
Hierarchical Port Count:             14
Leaf Cell Count:                   2744
Buf/Inv Cell Count:                 575
Buf Cell Count:                       2
Inv Cell Count:                     573
CT Buf/Inv Cell Count:                0
Combinational Cell Count:          2068
   Single-bit Isolation Cell Count:                        0
   Multi-bit Isolation Cell Count:                         0
   Isolation Cell Banking Ratio:                           0.00%
   Single-bit Level Shifter Cell Count:                    0
   Multi-bit Level Shifter Cell Count:                     0
   Level Shifter Cell Banking Ratio:                       0.00%
   Single-bit ELS Cell Count:                              0
   Multi-bit ELS Cell Count:                               0
   ELS Cell Banking Ratio:                                 0.00%
Sequential Cell Count:              676
   Integrated Clock-Gating Cell Count:                     0
   Sequential Macro Cell Count:                            0
   Single-bit Sequential Cell Count:                       676
   Multi-bit Sequential Cell Count:                        0
   Sequential Cell Banking Ratio:                          0.00%
   BitsPerflop:                                            1.00
Macro Count:                          2
----------------------------------------


Area
----------------------------------------
Combinational Area:            11415.95
Noncombinational Area:         13532.98
Buf/Inv Area:                   2158.32
Total Buffer Area:                 7.51
Total Inverter Area:            2150.81
Macro/Black Box Area:         671652.37
Net Area:                             0
Net XLength:                   36957.30
Net YLength:                   40469.98
----------------------------------------
Cell Area (netlist):                         696601.30
Cell Area (netlist and physical only):       696601.30
Net Length:                    77427.28


Design Rules
----------------------------------------
Total Number of Nets:              2993
Nets with Violations:                34
Max Trans Violations:                13
Max Cap Violations:                  33
----------------------------------------

1
```

vsdbabysoc.post_estimated_timing.qor.sum
  - Summary of Post estimated timing qor

```
****************************************
Report : qor
        -summary
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Tue Oct 17 12:02:21 2023
****************************************

Timing
---------------------------------------------------------------------------
Context                                 WNS            TNS            NVE
---------------------------------------------------------------------------
func1::estimated_corner
                   (Setup)             0.69           0.00              0
func1              (Setup)            -1.74        -105.25            115
Design             (Setup)            -1.74        -105.25            115

func1              (Hold)             -0.19         -18.98            460
Design             (Hold)             -0.19         -18.98            460
---------------------------------------------------------------------------

Miscellaneous
---------------------------------------------------------------------------
Cell Area (netlist):                         696601.30
Cell Area (netlist and physical only):       696601.30
Nets with DRC Violations:       34
1
```
**CTS schematic design**

Note: before CTS, the clock would be ideal, while after CTS, the clock will be propagated
CTS Schematic block level :
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ab874fdf5d216d7abb4a83d39cfd19bf5eecfab/PD%23day21/cts_0.png">

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ab874fdf5d216d7abb4a83d39cfd19bf5eecfab/PD%23day21/cts_1.png">

CTS Schematic layout view:
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/8ab874fdf5d216d7abb4a83d39cfd19bf5eecfab/PD%23day21/cts_3.png">
</details>



## Day-22-Topic: CTS Analysis labs


<details>
	
<summary> Theory </summary>

**What is CTS?**

    - Clock Tree Synthesis
    - A technique for distributing the clock equally among all sequential parts of VLSI design
    - It will balancing the delays to all clock input pins when the clock is distributed equally
    - The goal of CTS is to minimize skew and insertion delay
Various algo’s used for CTS:

  H-tree algorithm

    - Find out all the flops present
    - Find out the center of all the flops
    - Trace clock port ot the center point
    - Divide the core into two parts, trace both the parts and reach to each center
    - From the center, again, divide the area into two and again trace till center at both the end
    - Repeat this algo till the time we reach the flop clock pin.

Various CTS checks
    - Skew check
    - Pulse width check
    - Duty cycle check
    - Latency check
    - Power check
    - Crosstalk Quality check
    - Delta Delay Quality check
    - Glitch Quality check

Some useful commands

    This command checks and reports issues that can lead to bad QoR:
        Clock tree structure
        Constraints
        Clock tree exceptions
```
check_clock_tree
```
    This command checks the design whether the placement done input is perfect or not

    If it is legal, it is well and good
    
```
check_legality
```
Else, use below command:

```
legalize_placement
```
- IC Compiler uses the CTS design rule constraints for all optimization phases, as well as for CTS.
- We can use ICC2 with debug mode by using below command
  
```
-set cts_use_debug_mode true
```
The main command we need to do is as below command:

```
compile_clock_tree
```

**CTS results analysis**

We can use the report for the tree that has been built using below command:

```
report_clock_tree
-summary 
-settings
```
Other reports to see

    - Reports Max global skew
    - Late/Early insertion delay
    - Number of levels in clock tree
    - Number of clock tree references (Buffers)
    - Clock DRC violations

Also, another report related to clock timing report for paths that are related

    - Reports actual
    - Relevant skew
    - Latency
    - Interclock latency
    
```
report_clock_timing  –type skew
```



After observing the reports, if we see the clock tree could be better, perform CTS and incremental physical optimization as command below

This process results in a timing optimized design with fully implemented clock trees

The command below does the following:
        Performs clock tree power optimization
        Synthesizes(Re-Synthesizes) the clock trees
        Optimizes the clock trees
        Adjusts the I/O timing
        Performs RC extraction of the clock nets and computes accurate clock arrival times
        Performs placement and timing optimization
	
```
clock_opt
```


Sometimes, there will be some unrouted clock trees

To remove them, perform the command below:

```
remove_clock_tree
```
**After CTS, we do synthesis**
Before we synthesize the clock trees, use below command to verify that the clock trees are properly defined:

```
check_clock_tree 
icc2_shell> check_clock_tree -clocks my_clk
```

</details>

<details>
<summary> Labs </summary>
	
In icc2 terminal:

```
check_clock_tree                        (Checking the issues that can lead to bad QoR)
check_legality                          (Checking the legality of the current placement and report out the violation statistics)
report_clock_timing -type summary   
report_clock_timing -type skew
report_clock_timing -type latency
report_clock_timing -type transition
```

Now, we can see that there is 1 warning which states that there are some clock cells that does not have LEQ cells for resizing. LEQ cells are level Equivalence cells which are used to create logic gates or elements that have equivalent feature of different complexity. As a result the sizes of the cells can be easily resized by using a cell of differnt complexity.

CTS-015 : It is a warning which comes up when we set_max_delay or set_min_delay constraints are defined in the clock network.

CTS-918 : It is a warning which comes up when Volatage area are blocked for buffering through app option. It can be removed by resetting the value of app option "opt.com- mon.blocked_vas" to empty string.

In our case we got only one warning that was of CTS 904.

1. **Check_clock_tree**

```
   Information: CTS will work on the following scenarios. (CTS-101)
   func1	(Mode: func1; Corner: func1)
Information: CTS will work on all clocks in active scenarios, including 1 master clocks and 0 generated clocks. (CTS-107)
Output units used in this log:
   Time        : 1.00ns
   Resistance  : 1.00kOhm
   Capacitance : 1.00pF
   Power       : 1.00nW
   Length      : 1.00um
Information: Clock derating is disabled

CTS related app options set by user:
   No CTS related app option is set.

****************************************
Report : check_clock_tree
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 18 14:35:47 2023
****************************************

=================================================
Summary
=================================================

Tag           Count     Solution  Description
--------------------------------------------------------------------------------

---------------------------------------------
       Clock Definitions & Propagation
---------------------------------------------
CTS-002       0         None      There are active CTS scenarios with no clock definition.
CTS-004       0         None      There are generated clocks that cannot be reached by their master clock.
CTS-005       0         None      Generated clocks defined on bidirectional pins
CTS-019       0         None      Clocks propagate to output ports
CTS-905       0         None      There are clocks with no sinks
CTS-906       0         None      There are sinks with no clock
CTS-907       0         None      There are disabled timing arcs in the clock network

---------------------------------------------
               Reference Cells
---------------------------------------------
CTS-007       0         None      Failed to specify any clock buffers or inverters for CTS
CTS-008       0         None      Clock reference cells have dont_touch or dont_use
CTS-903       0         None      Cells instantiated in the clock network are not in the clock reference list
CTS-904       1         None      Some clock reference cells have no LEQ cell specified for resizing

---------------------------------------------
               Skew Balancing
---------------------------------------------
CTS-006       0         None      Balancing conflicts exist between different clocks
CTS-009       0         None      Cell instances in the clock tree have multiple conditional delay arcs between the same pins
CTS-908       0         None      Large phase delay in abstracted sub-blocks
CTS-910       0         None      Balance point constraints are defined downstream of another balance point or ignore point constraint
CTS-911       0         None      Clock pins downstream of a balance point or ignore point have been added to a skew group
CTS-913       0         None      Explicit ignore points have been added to a skew group, and will not be balanced
CTS-917       0         None      Implicit ignore points have been added to a skew group, and will be balanced
CTS-967       0         None      %s is sink for generated clock %s but pass through for master clock.

---------------------------------------------
                Multi-Voltage
---------------------------------------------
CTS-901       0         None      Clock nets have MV violations
CTS-902       0         None      No AON (always-on) buffers or inverters available for CTS
CTS-918       0         None      Voltage area blocked for buffering.

---------------------------------------------
    Capacitance & Transition Constraints
---------------------------------------------
CTS-909       0         None      set_load constraints detected in the clock tree
CTS-912       0         Non************************

running check_legality

Warning: Routing direction of metal layer li1 is neither "horizontal" nor "vertical".  PDC checks will not be performed on this layer. (PDC-003)
Warning: Routing direction of metal layer fieldpoly is neither "horizontal" nor "vertical".  PDC checks will not be performed on this layer. (PDC-003)
PDC app_options settings =========
	place.legalize.enable_prerouted_net_check: 1
	place.legalize.num_tracks_for_access_check: 1
	place.legalize.use_eol_spacing_for_access_check: 0
	place.legalize.allow_touch_track_for_access_check: 1
	place.legalize.reduce_conservatism_in_eol_check: 0
	place.legalize.preroute_shape_merge_distance: 0.0
	place.legalize.enable_non_preferred_direction_span_check: 0

Layer met1: cached 207 shapes out of 9120 total shapes.
Layer met2: cached 0 shapes out of 9013 total shapes.
Cached 19649 vias out of 56707 total vias.

check_legality for block design vsdbabysoc_1 ... 
Information: Initializing classic cellmap without advanced rules enabled and without PDC enabled
Information: The following app options are used in cellmap
        place.legalize.enable_color_aware_placement : false
        place.legalize.use_nll_query_cm : false
        place.legalize.enable_advanced_legalizer : false
        place.legalize.enable_prerouted_net_check : true
        place.legalize.enable_advanced_prerouted_net_check : false
        place.legalize.always_continue : true
        place.legalize.limit_legality_checks : false
        place.common.pnet_aware_density : 1.0000
        place.common.pnet_aware_min_width : 0.0000
        place.common.pnet_aware_layers : {}
        place.common.use_placement_model : false
        place.common.enable_advanced_placement_model : true
        cts.placement.cell_spacing_rule_style : maximum
Total 0.0900 seconds to build cellmap data
Information: Creating classic rule checker.
Warning: Routing direction of metal layer li1 is neither "horizontal" nor "vertical".  PDC checks will not be performed on this layer. (PDC-003)
Warning: Routing direction of metal layer fieldpoly is neither "horizontal" nor "vertical".  PDC checks will not be performed on this layer. (PDC-003)
=====> Processed 43 ref cells (4 fillers) from library
Design has no advanced rules
Checking legality
Checking cell legality:
0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%
Sorting rows.
Checking spacing rule legality.
0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%
Checking packing rule legality.


****************************************
  Report : Legality
****************************************

VIOLATIONS BY CATEGORY:
   MOVABLE  APP-FIXED USER-FIXED  DESCRIPTION
         0          0          0  Two objects overlap.
         0          0          0  A cell violates a pnet.
         0          0          0  A cell is illegal at a site.
         0          0          0  A cell is not aligned with a site.
         0          0          0  A cell has an illegal orientation.
         0          0          0  A cell spacing rule is violated.
         0          0          0  A layer rule is violated.
         0          0          0  A cell is in the wrong region.
         0          0          0  Two cells violate cts margins.
         0          0          0  Two cells violate coloring.

         0          0          0  TOTAL

TOTAL 0 Violations.

VIOLATIONS BY SUBCATEGORY:
     MOVABLE  APP-FIXED USER-FIXED  DESCRIPTION

         0          0          0    Two objects overlap.
           0          0          0    Two cells overlap.
           0          0          0    Two cells have overlapping keepout margins.
           0          0          0    A cell overlaps a blockage.
           0          0          0    A cell keepout margin overlaps a blockage.

         0          0          0    A cell violates a pnet.

         0          0          0    A cell is illegal at a site.
           0          0          0    A cell violates pin-track alignment rules.
           0          0          0    A cell is illegal at a site.
           0          0          0    A cell violates legal index rule.
           0          0          0    A cell has the wrong variant for its location.

         0          0          0    A cell is not aligned with a site.
           0          0          0    A cell is not aligned with the base site.
           0          0          0    A cell is not aligned with an overlaid site.

         0          0          0    A cell has an illegal orientation.

         0          0          0    A cell spacing rule is violated.
           0          0          0    A spacing rule is violated in a row.
           0          0          0    A spacing rule is violated between adjacent rows.
           0          0          0    A cell violates vertical abutment rule.
           0          0          0    A cell violates metal spacing rule.

         0          0          0    A layer rule is violated.
           0          0          0    A layer VTH rule is violated.
           0          0          0    A layer OD rule is violated.
           0          0          0    A layer OD max-width rule is violated.
           0          0          0    A layer ALL_OD corner rule is violated.
           0          0          0    A layer max-vertical-length rule is violated.
           0          0          0    A layer TPO rule is violated.
           0          0          0    Filler cell insertion cannot satisfy layer rules.

         0          0          0    A cell is in the wrong region.
           0          0          0    A cell is outside its hard bound.
           0          0          0    A cell is in the wrong voltage area.
           0          0          0    A cell violates an exclusive movebound.

         0          0          0    Two cells violate cts margins.

         0          0          0    Two cells violate coloring.


check_legality for block design vsdbabysoc_1 succeeded!


check_legality succeeded.

**************************

1
e      set_load constraints on output clock ports exceed the max capacitance limit
CTS-914       0         None      set_input_transition on clock ports exceeds the max transition limit
CTS-915       0         None      Excessively small max capacitance constraints in the clock network
CTS-916       0         None      Excessively small max transition constraints in the clock network

---------------------------------------------
                Other issues
---------------------------------------------
CTS-012       0         None      Nets in the clock network have a dont_touch constraint
CTS-013       0         None      Cells in the clock network have a dont_touch constraint
CTS-015       0         None      set_max_delay or set_min_delay constraints are defined in the clock network
CTS-900       0         None      Clock routing rules are outside of allowable layers
=================================================
                     Details
=================================================

---------------------------------------------------------------------------------------
Warning: Some clock reference cells have no LEQ cell specified for resizing (CTS-904)
---------------------------------------------------------------------------------------
Check         Lib cell                                                 Example Instance
---------------------------------------------------------------------------------------
CTS-904       EXPLORE_macros|avsdpll/avsdpll                           pll
1
```
2. **check_legality:**  

```
************************

running check_legality

Warning: Routing direction of metal layer li1 is neither "horizontal" nor "vertical".  PDC checks will not be performed on this layer. (PDC-003)
Warning: Routing direction of metal layer fieldpoly is neither "horizontal" nor "vertical".  PDC checks will not be performed on this layer. (PDC-003)
PDC app_options settings =========
	place.legalize.enable_prerouted_net_check: 1
	place.legalize.num_tracks_for_access_check: 1
	place.legalize.use_eol_spacing_for_access_check: 0
	place.legalize.allow_touch_track_for_access_check: 1
	place.legalize.reduce_conservatism_in_eol_check: 0
	place.legalize.preroute_shape_merge_distance: 0.0
	place.legalize.enable_non_preferred_direction_span_check: 0

Layer met1: cached 207 shapes out of 9120 total shapes.
Layer met2: cached 0 shapes out of 9013 total shapes.
Cached 19649 vias out of 56707 total vias.

check_legality for block design vsdbabysoc_1 ... 
Information: Initializing classic cellmap without advanced rules enabled and without PDC enabled
Information: The following app options are used in cellmap
        place.legalize.enable_color_aware_placement : false
        place.legalize.use_nll_query_cm : false
        place.legalize.enable_advanced_legalizer : false
        place.legalize.enable_prerouted_net_check : true
        place.legalize.enable_advanced_prerouted_net_check : false
        place.legalize.always_continue : true
        place.legalize.limit_legality_checks : false
        place.common.pnet_aware_density : 1.0000
        place.common.pnet_aware_min_width : 0.0000
        place.common.pnet_aware_layers : {}
        place.common.use_placement_model : false
        place.common.enable_advanced_placement_model : true
        cts.placement.cell_spacing_rule_style : maximum
Total 0.0900 seconds to build cellmap data
Information: Creating classic rule checker.
Warning: Routing direction of metal layer li1 is neither "horizontal" nor "vertical".  PDC checks will not be performed on this layer. (PDC-003)
Warning: Routing direction of metal layer fieldpoly is neither "horizontal" nor "vertical".  PDC checks will not be performed on this layer. (PDC-003)
=====> Processed 43 ref cells (4 fillers) from library
Design has no advanced rules
Checking legality
Checking cell legality:
0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%
Sorting rows.
Checking spacing rule legality.
0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%
Checking packing rule legality.


****************************************
  Report : Legality
****************************************

VIOLATIONS BY CATEGORY:
   MOVABLE  APP-FIXED USER-FIXED  DESCRIPTION
         0          0          0  Two objects overlap.
         0          0          0  A cell violates a pnet.
         0          0          0  A cell is illegal at a site.
         0          0          0  A cell is not aligned with a site.
         0          0          0  A cell has an illegal orientation.
         0          0          0  A cell spacing rule is violated.
         0          0          0  A layer rule is violated.
         0          0          0  A cell is in the wrong region.
         0          0          0  Two cells violate cts margins.
         0          0          0  Two cells violate coloring.

         0          0          0  TOTAL

TOTAL 0 Violations.

VIOLATIONS BY SUBCATEGORY:
     MOVABLE  APP-FIXED USER-FIXED  DESCRIPTION

         0          0          0    Two objects overlap.
           0          0          0    Two cells overlap.
           0          0          0    Two cells have overlapping keepout margins.
           0          0          0    A cell overlaps a blockage.
           0          0          0    A cell keepout margin overlaps a blockage.

         0          0          0    A cell violates a pnet.

         0          0          0    A cell is illegal at a site.
           0          0          0    A cell violates pin-track alignment rules.
           0          0          0    A cell is illegal at a site.
           0          0          0    A cell violates legal index rule.
           0          0          0    A cell has the wrong variant for its location.

         0          0          0    A cell is not aligned with a site.
           0          0          0    A cell is not aligned with the base site.
           0          0          0    A cell is not aligned with an overlaid site.

         0          0          0    A cell has an illegal orientation.

         0          0          0    A cell spacing rule is violated.
           0          0          0    A spacing rule is violated in a row.
           0          0          0    A spacing rule is violated between adjacent rows.
           0          0          0    A cell violates vertical abutment rule.
           0          0          0    A cell violates metal spacing rule.

         0          0          0    A layer rule is violated.
           0          0          0    A layer VTH rule is violated.
           0          0          0    A layer OD rule is violated.
           0          0          0    A layer OD max-width rule is violated.
           0          0          0    A layer ALL_OD corner rule is violated.
           0          0          0    A layer max-vertical-length rule is violated.
           0          0          0    A layer TPO rule is violated.
           0          0          0    Filler cell insertion cannot satisfy layer rules.

         0          0          0    A cell is in the wrong region.
           0          0          0    A cell is outside its hard bound.
           0          0          0    A cell is in the wrong voltage area.
           0          0          0    A cell violates an exclusive movebound.

         0          0          0    Two cells violate cts margins.

         0          0          0    Two cells violate coloring.


check_legality for block design vsdbabysoc_1 succeeded!


check_legality succeeded.

**************************

1
```
3. **report_clock_timing -type summary**   

```
****************************************
Report : clock timing
        -type summary
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 18 14:51:26 2023
****************************************

  Mode: func1
  Clock: clk
                                                                                 Corner
---------------------------------------------------------------------------------------------------
  Maximum setup launch latency:
      core1/CPU_br_tgt_pc_a3_reg[5]/CLK                        0.00       r-+       func1

  Minimum setup capture latency:
      core1/CPU_br_tgt_pc_a3_reg[5]/CLK                        0.00       r-+       func1

  Minimum hold launch latency:
      core1/CPU_br_tgt_pc_a3_reg[5]/CLK                        0.00       r-+       func1

  Maximum hold capture latency:
      core1/CPU_br_tgt_pc_a3_reg[5]/CLK                        0.00       r-+       func1

  Maximum active transition:
      core1/CPU_br_tgt_pc_a3_reg[5]/CLK                        0.00       r-+       func1

  Minimum active transition:
      core1/CPU_br_tgt_pc_a3_reg[5]/CLK                        0.00       r-+       func1

  Maximum setup skew:
      core1/CPU_inc_pc_a2_reg[1]/CLK                                      r-+       func1
      core1/CPU_br_tgt_pc_a3_reg[5]/CLK                        0.00       r-+       func1

  Maximum hold skew:
      core1/CPU_inc_pc_a2_reg[1]/CLK                                      r-+       func1
      core1/CPU_br_tgt_pc_a3_reg[5]/CLK                        0.00       r-+       func1


1
```

4. **report_clock_timing -type skew**

```
****************************************
Report : clock timing
        -type skew
        -nworst 1
        -setup
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 18 14:52:56 2023
****************************************

  Mode: func1
  Clock: clk

  Clock Pin                                          Latency      Skew             Corner
---------------------------------------------------------------------------------------------------
  core1/CPU_src1_value_a3_reg[0]/CLK                    0.00              r-+       func1
  core1/CPU_Xreg_value_a4_reg[2][14]/CLK                0.00      0.00    r-+       func1

---------------------------------------------------------------------------------------------------
1
```



5. **report_clock_timing -type latency**

```
****************************************
Report : clock timing
        -type latency
        -launch
        -nworst 1
        -setup
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 18 14:54:25 2023
****************************************

  Mode: func1
  Clock: clk

                                                 --- Latency ---
  Clock Pin                             Trans   Source   Offset  Network    Total            Corner
---------------------------------------------------------------------------------------------------
  core1/CPU_Xreg_value_a4_reg[2][14]/CLK
                                         0.00     0.00       --     0.00     0.00 r-+         func1
---------------------------------------------------------------------------------------------------
1

```

6. **report_clock_timing -type transition**

```
****************************************
Report : clock timing
        -type transition
        -launch
        -nworst 1
        -setup
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 18 14:57:35 2023
****************************************

  Mode: func1
  Clock: clk

                                            --- Latency ---
  Clock Pin                            Source  Network    Total    Trans           Corner
---------------------------------------------------------------------------------------------------
  core1/CPU_Xreg_value_a4_reg[2][14]/CLK
                                         0.00     0.00     0.00     0.00  r-+       func1
---------------------------------------------------------------------------------------------------
1
```
The Explanitation of report_clock_timing is in next repo.

</details>



## Day-23-Topic: Clock Gating 


<details>
	
<summary> Theory </summary>

 - Advanced H-Tree for million flop clock end-points randomly placed

    - When CTS is performed, power consumption also needs to be taken care of, especially when designing a large number of clocks where the design might induce a larger power, as well as a larger power usage

    - A digital circuit with a lot of clocks would be so huge with many buffers etc when designing its clock tree

    - In order to fix that, the whole chip is sectioned into smaller versions where each section will have its own clock tree, and managed to get a complete routed tree

    - Therefore, Clock Gating (CG) technique is introduced

**Introduction to Clock Gating technique**

- What is Clock Gating (CG)?

It is used to reduce the clock power consumption by cutting off the idle clock cycles

- Where/when clock gating is applied?

It is being inserted in synthesis stage and being optimized in the implementation stage (Physical Design stage)

- Types of clock gating

    AND gate
    OR gate
    Universal AND gate


</details>


<details>
	
<summary> Labs </summary>

Clock and signal routing:
- place_opt: The place_opt command in ICC2 (Integrated Circuit Compiler 2) is used to perform placement optimization for digital integrated circuit design. It is a part of the Cadence Design Systems suite of EDA (Electronic Design Automation) tools and is typically used for ASIC (Application-Specific Integrated Circuit) and FPGA (Field-Programmable Gate Array) design. The primary purpose of the place_opt command is to improve the physical layout of the design, which can impact factors such as performance, power, and area utilization.

- clock_opt: The clock_opt command in Cadence's ICC2 (Integrated Circuit Compiler 2) is used for clock tree synthesis and optimization in digital integrated circuit design. Clock tree synthesis is a critical step in the design process to ensure that the clock signal is efficiently distributed to various parts of the chip, while meeting timing, power, and skew constraints.

- route_auto The route_auto command in Cadence's ICC2 (Integrated Circuit Compiler 2) is used for automatic routing in digital integrated circuit design. This command allows the tool to automatically generate the routing for the connections between different components in your design, based on the netlist and constraints.

- set_lib_cell_purpose: The set_lib_cell_purpose command in Cadence's ICC2 (Integrated Circuit Compiler 2) is used to specify the usage purpose of standard cells from technology libraries in your digital integrated circuit design. This command is helpful for providing guidance to the tool regarding the intended purpose of each standard cell, such as whether a cell is meant for combinational logic, flip-flops, latches, or other purposes.
  
Clock buffer cells and the ICG cells of the design are shown below: 
```

Buffer/Inverter reference list for clock tree synthesis:
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__buf_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__buf_12
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__buf_16
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__buf_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__buf_4
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__buf_6
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__buf_8
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__bufbuf_16
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__bufbuf_8
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkbuf_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkbuf_16
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkbuf_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkbuf_4
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkbuf_8
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkdlybuf4s15_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkdlybuf4s15_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkdlybuf4s18_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkdlybuf4s18_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkdlybuf4s25_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkdlybuf4s25_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkdlybuf4s50_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkdlybuf4s50_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlygate4sd1_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlygate4sd2_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlygate4sd3_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlymetal6s2s_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlymetal6s4s_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlymetal6s6s_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__probe_p_8
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__probec_p_8
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkbufkapwr_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkbufkapwr_16
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkbufkapwr_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkbufkapwr_4
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkbufkapwr_8
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__bufinv_16
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__bufinv_8
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkinv_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkinv_16
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkinv_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkinv_4
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkinv_8
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkinvlp_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__clkinvlp_4
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__inv_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__inv_12
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__inv_16
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__inv_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__inv_4
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__inv_6
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__inv_8
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkinvkapwr_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkinvkapwr_16
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkinvkapwr_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkinvkapwr_4
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__lpflow_clkinvkapwr_8

ICG reference list:
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlclkp_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlclkp_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__dlclkp_4
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdlclkp_1
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdlclkp_2
   sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__sdlclkp_4
```
Now we will see the clock sink cells in the gui: 
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/edec917b48754b577b95ae7ff72160c02fc692fb/day17/clock_sink_cell.png">

Now we will see the Buffer cells in the gui: 

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/edec917b48754b577b95ae7ff72160c02fc692fb/day17/buffer_gui.png">


Report_clock_timing:
```
icc2_shell> report_clock_timing -type summary 
****************************************
Report : clock timing
        -type summary
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Thu Oct 26 12:08:32 2023
****************************************

  Mode: func1
  Clock: clk
                                                                                 Corner
---------------------------------------------------------------------------------------------------
  Maximum setup launch latency:
      core1/CPU_imm_a2_reg[28]/CLK                             0.40       rp-+      func1

  Minimum setup capture latency:
      core1/CPU_Xreg_value_a4_reg[1][7]/CLK                    0.00       rp-+      func1

  Minimum hold launch latency:
      core1/CPU_Xreg_value_a4_reg[1][7]/CLK                    0.00       rp-+      func1

  Maximum hold capture latency:
      core1/CPU_imm_a2_reg[28]/CLK                             0.40       rp-+      func1

  Maximum active transition:
      core1/CPU_Xreg_value_a4_reg[16][24]/CLK                  0.40       rp-+      func1

  Minimum active transition:
      core1/CPU_Xreg_value_a4_reg[1][7]/CLK                    0.00       rp-+      func1

  Maximum setup skew:
      core1/CPU_Xreg_value_a4_reg[26][5]/CLK                              rp-+      func1
      core1/CPU_src1_value_a3_reg[5]/CLK                       0.26       rp-+      func1

  Maximum hold skew:
      core1/CPU_imm_a3_reg[7]/CLK                                         rp-+      func1
      core1/CPU_Xreg_value_a4_reg[1][28]/CLK                   0.39       rp-+      func1


1
```
 Maximum setup launch latency is 0.4, that is setup at launch flop can be delayed by 0.4 but while capture it should be delayed vice versa for hold. maximum  active transition represent the maximum transition possible in clock pin which is 0.4. rp-+ representing rising positive edge for for the clock pin.
 
Script in routing stage:

P/G routing
```
gvim pns_example.tcl
```

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/40d0884776db679e4a64980cc532357101ac58b8/PD%23day21/pns_example.png">


*Clock and signal routing*

- place_opt is used to place and optimize the current design

- clock_opt is used to synthesize and route the clocks, and then further optimize the design based on the propagated clock latencies

- route_auto is used to run global routing, trace assignment, and detailed routing at once/automatically
```
gvim top.tcl
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/40d0884776db679e4a64980cc532357101ac58b8/PD%23day21/top_tcl.png">

Report_global_timing:
```
****************************************
Report : global timing
        -format { narrow }
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Mon Oct 23 15:36:11 2023
****************************************

Setup violations
--------------------------------------------------------------
          Total   reg->reg    in->reg   reg->out    in->out
--------------------------------------------------------------
WNS       -1.94      -1.94       0.00       0.00       0.00
TNS     -125.80    -125.80       0.00       0.00       0.00
NUM         115        115          0          0          0
--------------------------------------------------------------

Hold violations
--------------------------------------------------------------
          Total   reg->reg    in->reg   reg->out    in->out
--------------------------------------------------------------
WNS       -0.19      -0.19       0.00       0.00       0.00
TNS      -17.03     -17.03       0.00       0.00       0.00
NUM         417        417          0          0          0
--------------------------------------------------------------

1

```
After increasing voltage from 1.1 to 1.8, we make changes in top.tcl:
```
set_lib_cell_purpose -include cts {sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__buf_*}
synthesize_clock_trees
set_propagated_clock [all_clocks]
```
i.e. we add buffers in design.
report_global_timing:
```
****************************************
Report : global timing
        -format { narrow }
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Mon Oct 23 15:52:08 2023
****************************************

Setup violations
--------------------------------------------------------------
          Total   reg->reg    in->reg   reg->out    in->out
--------------------------------------------------------------
WNS       -0.06      -0.06       0.00       0.00       0.00
TNS       -0.43      -0.43       0.00       0.00       0.00
NUM          15         15          0          0          0
--------------------------------------------------------------

No hold violations found.


1
```
After doing cell_sizing in data path we got the no violations.
report_global_timing:
```
****************************************
Report : global timing
        -format { narrow }
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Mon Oct 23 16:00:51 2023
****************************************

No setup violations found.


No hold violations found.


1
```
</details>


## Day-24-Topic: Timing violations and ECO 


<details>
	
<summary> Theory </summary>

**Introduction to Engineering Change Order (ECO)**

- Basically, ECO is the way on how we incorporate last minute changes in our design

- Typically, ECO has been done on the gate level netlist, but designer needs to edit the gate-level netlist and perform the same changes in RTL

- Then, all the verifications must be passed before it is being passed onto the layout and ensure that the ECO is passing a formal and functional verification before we start editing the layout

- In this stage, all the violations are fixed and all the sign-off checks that were not done during the PD flow are sealed.
  

*Steps to perform ECO*

    - Investigate the problem using the recent database
    - ECO generation to address the problem
    - ECO implementation with the recent database
    - After implementing and fixing the problem, save it in the database for future


</details>

<details>
	
<summary> LABs </summary>

Checking for Violations in VSDBabySoc:
1. Report_timing
   
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/11ec81ae16229e0d6aaa610e80cafbbef60565ee/day24/report_timing_before_fix.png">

Here we can see nand gate output net have high fanout and capacitance so we can icrease its drive strength.

2. Report_global_timing
   
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/11ec81ae16229e0d6aaa610e80cafbbef60565ee/day24/report_global_timing_before_fix.png">

As we can see here only setup is violated , it can fixed by decreasing delay of data path.

3. Report_power

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/11ec81ae16229e0d6aaa610e80cafbbef60565ee/day24/report_power_before_fix.png">


4. Report_qor
```
icc2_shell> report_qor
****************************************
Report : qor
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 25 12:52:16 2023
****************************************


Scenario           'func1'
Timing Path Group  'default'
----------------------------------------
Levels of Logic:                      1
Critical Path Length:              0.02
Critical Path Slack:               9.98
Critical Path Clk Period:            --
Total Negative Slack:              0.00
No. of Violating Paths:               0
----------------------------------------

Scenario           'func1'
Timing Path Group  'clk'
----------------------------------------
Levels of Logic:                     42
Critical Path Length:              9.53
Critical Path Slack:              -0.06
Critical Path Clk Period:         10.00
Total Negative Slack:             -0.43
No. of Violating Paths:              15
Worst Hold Violation:              0.00
Total Hold Violation:              0.00
No. of Hold Violations:               0
----------------------------------------


Cell Count
----------------------------------------
Hierarchical Cell Count:              1
Hierarchical Port Count:             14
Leaf Cell Count:                   2822
Buf/Inv Cell Count:                 650
Buf Cell Count:                     105
Inv Cell Count:                     545
CT Buf/Inv Cell Count:                0
Combinational Cell Count:          2146
   Single-bit Isolation Cell Count:                        0
   Multi-bit Isolation Cell Count:                         0
   Isolation Cell Banking Ratio:                           0.00%
   Single-bit Level Shifter Cell Count:                    0
   Multi-bit Level Shifter Cell Count:                     0
   Level Shifter Cell Banking Ratio:                       0.00%
   Single-bit ELS Cell Count:                              0
   Multi-bit ELS Cell Count:                               0
   ELS Cell Banking Ratio:                                 0.00%
Sequential Cell Count:              676
   Integrated Clock-Gating Cell Count:                     0
   Sequential Macro Cell Count:                            0
   Single-bit Sequential Cell Count:                       676
   Multi-bit Sequential Cell Count:                        0
   Sequential Cell Banking Ratio:                          0.00%
   BitsPerflop:                                            1.00
Macro Count:                          2
----------------------------------------


Area
----------------------------------------
Combinational Area:            12740.97
Noncombinational Area:         15951.55
Buf/Inv Area:                   3417.03
Total Buffer Area:               857.07
Total Inverter Area:            2559.96
Macro/Black Box Area:         671652.37
Net Area:                             0
Net XLength:                   45586.48
Net YLength:                   48257.44
----------------------------------------
Cell Area (netlist):                         700344.89
Cell Area (netlist and physical only):      1735477.67
Net Length:                    93843.92


Design Rules
----------------------------------------
Total Number of Nets:              2843
Nets with Violations:                 1
Max Trans Violations:                 1
Max Cap Violations:                   1
----------------------------------------

1
```

5. Gui

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/11ec81ae16229e0d6aaa610e80cafbbef60565ee/day24/gui_before_fix.png">

Worst Path :

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/11ec81ae16229e0d6aaa610e80cafbbef60565ee/day24/worst_case_path_before_fix.png">

Fixing Violation : To fix violation we do dfferent eco's.
```
size_cell core1/ZBUF_2032_inst_368 sky130_fd_sc_hd__buf_16
size_cell core1/ZBUF_2156_inst_364 sky130_fd_sc_hd__clkbuf_16
size_cell core1/U304 sky130_fd_sc_hd__nand2_4
```
The nets which offer high capacitance, its driving cell is upsized.

After Fixing Violations :
1. Report_timing
   
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/11ec81ae16229e0d6aaa610e80cafbbef60565ee/day24/report_timing_after_fix.png">

2. Report_global_timing
   
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/11ec81ae16229e0d6aaa610e80cafbbef60565ee/day24/report_global_after_fix.png">

3. Report_power

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/11ec81ae16229e0d6aaa610e80cafbbef60565ee/day24/report_power_after_fix.png">


4. Report_qor
```
icc2_shell> report_qor
****************************************
Report : qor
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 25 16:04:27 2023
****************************************


Scenario           'func1'
Timing Path Group  'default'
----------------------------------------
Levels of Logic:                      1
Critical Path Length:              0.02
Critical Path Slack:               9.98
Critical Path Clk Period:            --
Total Negative Slack:              0.00
No. of Violating Paths:               0
----------------------------------------

Scenario           'func1'
Timing Path Group  'clk'
----------------------------------------
Levels of Logic:                     43
Critical Path Length:              9.30
Critical Path Slack:               0.17
Critical Path Clk Period:         10.00
Total Negative Slack:              0.00
No. of Violating Paths:               0
Worst Hold Violation:              0.00
Total Hold Violation:              0.00
No. of Hold Violations:               0
----------------------------------------


Cell Count
----------------------------------------
Hierarchical Cell Count:              1
Hierarchical Port Count:             14
Leaf Cell Count:                   2822
Buf/Inv Cell Count:                 650
Buf Cell Count:                     105
Inv Cell Count:                     545
CT Buf/Inv Cell Count:                0
Combinational Cell Count:          2146
   Single-bit Isolation Cell Count:                        0
   Multi-bit Isolation Cell Count:                         0
   Isolation Cell Banking Ratio:                           0.00%
   Single-bit Level Shifter Cell Count:                    0
   Multi-bit Level Shifter Cell Count:                     0
   Level Shifter Cell Banking Ratio:                       0.00%
   Single-bit ELS Cell Count:                              0
   Multi-bit ELS Cell Count:                               0
   ELS Cell Banking Ratio:                                 0.00%
Sequential Cell Count:              676
   Integrated Clock-Gating Cell Count:                     0
   Sequential Macro Cell Count:                            0
   Single-bit Sequential Cell Count:                       676
   Multi-bit Sequential Cell Count:                        0
   Sequential Cell Banking Ratio:                          0.00%
   BitsPerflop:                                            1.00
Macro Count:                          2
----------------------------------------


Area
----------------------------------------
Combinational Area:            12811.04
Noncombinational Area:         15951.55
Buf/Inv Area:                   3472.08
Total Buffer Area:               912.12
Total Inverter Area:            2559.96
Macro/Black Box Area:         671652.37
Net Area:                             0
Net XLength:                   45586.48
Net YLength:                   48257.44
----------------------------------------
Cell Area (netlist):                         700414.96
Cell Area (netlist and physical only):      1735547.74
Net Length:                    93843.92


Design Rules
----------------------------------------
Total Number of Nets:              2843
Nets with Violations:                 1
Max Trans Violations:                 1
Max Cap Violations:                   1
----------------------------------------

1
```
Fixing max Trans:

report_constraint
```
icc2_shell> report_constraints -max_transition -all_violators 
****************************************
Report : constraint
        -all_violators
        -max_transition
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 25 16:07:06 2023
****************************************



   Mode: func1 Corner: func1
   Scenario: func1
   max_transition                                                              
                             Required        Actual                            
   Net                      Transition     Transition        Slack  Violation  
  ---------------------------------------------------------------------------
   core1/n1493                  1.50           1.51          -0.02  (VIOLATED) 
     PIN : core1/U628/Y         1.50           1.51          -0.02  (VIOLATED) 
     PIN : core1/U630/B1        1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1479/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1595/A1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1596/A1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1608/A1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1609/A1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U680/B1        1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1440/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1401/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1427/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U761/B1        1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1530/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1518/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1492/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U734/B1        1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U707/B1        1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1303/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1414/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1388/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1360/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1333/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1977/B2       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1555/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1466/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1505/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1453/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1323/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1975/B2       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1979/B2       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1542/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U629/A         1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1375/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1344/B1       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1981/B2       1.50           1.51          -0.01  (VIOLATED) 
     PIN : core1/U1313/B1       1.50           1.51          -0.01  (VIOLATED) 

  ---------------------------------------------------------------------------
   Number of max_transition violation(s): 1

   Total number of violation(s): 1
1
```
To fix it we size cell:
```
size_cell core1/U628 sky130_fd_sc_hd__tt_025C_1v80/sky130_fd_sc_hd__nand2_4
```
report_constraint:
```
icc2_shell> report_constraints -max_transition -all_violators
****************************************
Report : constraint
        -all_violators
        -max_transition
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 25 16:09:37 2023
****************************************



   Mode: func1 Corner: func1
   Scenario: func1
  ---------------------------------------------------------------------------
   Number of max_transition violation(s): 0

   Total number of violation(s): 0
1
```

Report Qor:

```
icc2_shell> report_qor
****************************************
Report : qor
Design : vsdbabysoc_1
Version: T-2022.03-SP3-VAL
Date   : Wed Oct 25 16:16:13 2023
****************************************


Scenario           'func1'
Timing Path Group  'default'
----------------------------------------
Levels of Logic:                      1
Critical Path Length:              0.02
Critical Path Slack:               9.98
Critical Path Clk Period:            --
Total Negative Slack:              0.00
No. of Violating Paths:               0
----------------------------------------

Scenario           'func1'
Timing Path Group  'clk'
----------------------------------------
Levels of Logic:                     43
Critical Path Length:              9.30
Critical Path Slack:               0.17
Critical Path Clk Period:         10.00
Total Negative Slack:              0.00
No. of Violating Paths:               0
Worst Hold Violation:              0.00
Total Hold Violation:              0.00
No. of Hold Violations:               0
----------------------------------------


Cell Count
----------------------------------------
Hierarchical Cell Count:              1
Hierarchical Port Count:             14
Leaf Cell Count:                   2822
Buf/Inv Cell Count:                 650
Buf Cell Count:                     105
Inv Cell Count:                     545
CT Buf/Inv Cell Count:                0
Combinational Cell Count:          2146
   Single-bit Isolation Cell Count:                        0
   Multi-bit Isolation Cell Count:                         0
   Isolation Cell Banking Ratio:                           0.00%
   Single-bit Level Shifter Cell Count:                    0
   Multi-bit Level Shifter Cell Count:                     0
   Level Shifter Cell Banking Ratio:                       0.00%
   Single-bit ELS Cell Count:                              0
   Multi-bit ELS Cell Count:                               0
   ELS Cell Banking Ratio:                                 0.00%
Sequential Cell Count:              676
   Integrated Clock-Gating Cell Count:               
   Total number of violation(s): 1
1      0
   Sequential Macro Cell Count:                            0
   Single-bit Sequential Cell Count:                       676
   Multi-bit Sequential Cell Count:                        0
   Sequential Cell Banking Ratio:                          0.00%
   BitsPerflop:                                            1.00
Macro Count:                          2
----------------------------------------


Area
----------------------------------------
Combinational Area:            12818.54
Noncombinational Area:         15951.55
Buf/Inv Area:                   3472.08
Total Buffer Area:               912.12
Total Inverter Area:            2559.96
Macro/Black Box Area:         671652.37
Net Area:                             0
Net XLength:                   45586.48
Net YLength:                   48257.44
----------------------------------------
Cell Area (netlist):                         700422.47
Cell Area (netlist and physical only):      1735555.24
Net Length:                    93843.92


Design Rules
----------------------------------------
Total Number of Nets:              2843
Nets with Violations:                 0
Max Trans Violations:                 0
Max Cap Violations:                   0
----------------------------------------

1
```
Now all violation are fixed.


GUI:
Critical Path:

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/7445eae3001659d42c3a48bd5eafc80e4e2c9581/day24/worst_path_after_fix_new.png">

Timing Path:

<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/11ec81ae16229e0d6aaa610e80cafbbef60565ee/day24/timing_path_after_fix.png">

Summary: 

Report_Qor:
Timing Perspective:
Overall Timing was improved after fixing setup and hold violations.
```
Before fixing:                                                                 
 Scenario           'func1'
Timing Path Group  'clk'
----------------------------------------
Levels of Logic:                     42
Critical Path Length:              9.53
Critical Path Slack:              -0.06
Critical Path Clk Period:         10.00
Total Negative Slack:             -0.43
No. of Violating Paths:              15
Worst Hold Violation:              0.00
Total Hold Violation:              0.00
No. of Hold Violations:               0
----------------------------------------

After Fixing:

Scenario           'func1'
Timing Path Group  'default'
----------------------------------------
Levels of Logic:                      1
Critical Path Length:              0.02
Critical Path Slack:               9.98
Critical Path Clk Period:            --
Total Negative Slack:              0.00
No. of Violating Paths:               0
----------------------------------------
```

Area Perspective:
Area has been increased as cell are upsized.
As we can total combinational area and buffer area is increased.
```
Before Fix:
Area
----------------------------------------
Combinational Area:            12740.97
Noncombinational Area:         15951.55
Buf/Inv Area:                   3417.03
Total Buffer Area:               857.07
Total Inverter Area:            2559.96
Macro/Black Box Area:         671652.37
Net Area:                             0
Net XLength:                   45586.48
Net YLength:                   48257.44
----------------------------------------
Cell Area (netlist):                         700344.89
Cell Area (netlist and physical only):      1735477.67
Net Length:                    93843.92


After Fix:
Area
----------------------------------------
Combinational Area:            12818.54
Noncombinational Area:         15951.55
Buf/Inv Area:                   3472.08
Total Buffer Area:               912.12
Total Inverter Area:            2559.96
Macro/Black Box Area:         671652.37
Net Area:                             0
Net XLength:                   45586.48
Net YLength:                   48257.44
----------------------------------------
Cell Area (netlist):                         700422.47
Cell Area (netlist and physical only):      1735555.24
Net Length:                    93843.92
```

Power : Theoretically, total power usage will increase since the area has increased due to upsizing cell. However, the power usage for both pre and post CTS are the same since the total area increased is not that much.

</details>

## Day-26-Topic: Introduction to Mix signal design in vsdbabysoc



<details>
	
<summary> Theory </summary>

**Understanding mixed signal design**

--> What is mixed signal design?

    - What is electronic signals?

Electronic signal is a message/information encoded by changing the voltage of an electric current and it is used to communicate within several devices

    - Types of electronic signals

Analog and digital signals

    - What kind of signal that is most available in the nature?

Analog signals since every process produced analog signals instead of digital signals. Digital signals are usually being converted from the analog signals.

    - Which signal does microcontrollers/microprocessors understand/speak?

Digital signals where those electronic devices only understand the signals digitally by using 1's and 0's

    - Since microprocessors/microcontrollers speak in digital form, but we need to get or take in analog signals, what to do?

Convert the digital signals to analog signals or vice versa using ADC/DAC

    Mixed-signal chips are those that at least partially deal with input signals whose precise values matter
        i. This broad class includes RF, Analog, Analog-to-Digital and Digital-to-Analog conversion
        ii. More recently, a large number of Mixed-Signal chips where at least part of the chip design needs to measure signals with high precision
        iii. These chips have very different Design and Process Technology demands than normal Digital circuits

**Exploring the example of VSDBabySoC**

    RVMYTH processor --> digital block
    PLL --> analog block
    DAC --> analog block (for digital to analog conversion)
    
*Introduction to various files*

   -  LEF (Library Exchange Format) file: physical properties such as width, height etc regarding the standard cells
        tf (technology file) or tlef (technology lef) --> contains same information
        Cell tf

   -  LIBerty file --> contains timing information of the cells

   -  gdsII and OASIS file --> GDSII is a file format similar to JPEG, DOCX, XLSX etc to enable a layout design to be transferred from one place to another (IP owner handoff to PD team, PD team to foundry for fabrication), to be viewed/used for verifications like Physical verification checks by EDA tools.

Discovering IP cores

 *What are IP cores?*

    - An IP core consists of a block of logic or data that is used in a semiconductor chip.

    - It is usually the intellectual property of a particular person or company. IP cores are used when making a fieldprogrammable gate array (FPGA) or application-specific integrated circuit (ASIC).

    - IP cores are created throughout the design process and can be turned into components for reuse.

    - There are different categories for IP cores including hard IP cores and soft IP cores.

    - The soft IP core , can be customized during the physical design phase and mapped to any process technology.

    - A hard IP core is one that has the logic implementation and the physical implementation. In other words, the physicallayout of a hard macro-IP is finished and fixed in a particular process technology.


</details>


## Day-27-Topic: Introduction to Crosstalk -Glitch and delta delay


<details>
	
<summary> Theory </summary>

**Introduction to crosstalk**

- What happens when we go through a chip design cycle?

    - When we go through a design, there are three things that we try to achieve on a chip.
        Power: focusing on the lowest power consumption.
        Performance: focusing on the performance, process and speed of the device.
        Area: preferable a smaller device.

      
- High routing density and large number of standard cells

    - 0.25 um and 0.1 um are the channel/gate length.

    - Looking through 0.25 um and above process, there are quite some spaces and routes between each other.

    - Quick way to reduce the size of the MOSFET is to reduce the channel length. When we reduce the channel length, the overall size of the MOSFET shrinks the overall size of the combinational logic, resulting the cell inside shrinks too. That way, we achieved a smaller size of the MOSFET.

    - If smaller size has been achieved, resulting the cells inside shrank, the complete circuit accomodates in a smaller area. Therefore, we can have multiple instances of the circuits or similar kind of circuits which are getting made to get back into the area.

    - For example, the circuit is used for sending and receiving messages. The circuit could have just instantiated in nine times. Some section can be sending and receiving messages, another section can be sending and receiving calls, some can be processing, some can reading other applications and so on.

    - As we can see, before reducing the MOSFET size, we only have one or two applications running in the same area, but after reducing the size, now we have nine applications running in the same area of the chip.

    - However, there is issue in interference when we reduce the size. Basically, referring to 0.1 um and below process in the figure below, there is some amount of interference in their functioning that is happening between the two nets/wires that is being placed very close to each other when we reduce the size. This is the major reason in crosstalk.

    - Initially, there are 20 number of standard cells. After reducing the size, the number of standard cell has increased 9 times where the standard cell has to be connected to each other and as a result of that, the number of routes has increased and the routing has becomes very close to each other.

    - Hence, we will started to see some failures in the design, where there was some functionality failure is happening which we can called it as crosstalk.

**Crosstalk Noise Reasons and Definition**

- Increase in number of metal layers resulting in increase in lateral capacitance

   -  Basically, there are 2 kinds of capacitance.
        Interlayer capacitance: capacitors that is placed between 2 consecutive different layers.
        Lateral capacitance: capacitors that is placed between 2 wires at the same level and metal layer.

    - The second reason of increasing the crosstalk noise is increase in the lateral capacitance because it is increasing the metal layer.

**Crosstalk Noise Reasons and Definition**

- Lower supply voltage leading to lesser noise margin

    - In a basic inverter functioning, if we provide low-level input into an inverter, we will get high-level output and vice versa.

    - onverting the concept into a graphical method, when Vin = low, Vout = high. whereas, when Vin = high, Vout = low.

    - The behaviour of an inverter happens when the half of the voltage (Vdd/2), we will see the behavior of switch is happening.

    - When the input is zero, the output is VDD. Then, we move the input from zero and keep increasing the input towards VDD. As gradually we increase the input voltage, the output voltage will start to decrease. And finally, the output voltage will be completely zero.

**Noise margin summary**

    - Anything that lies between VOL and VIL will be considered as logic 0.

    - Any voltage that lies between VIL and VIH will be considered as undefined region.

    - Undefined region -> the logic can either moved from logic 1 to logic 0 or from the interception point of (b) to logic 0. Undefined region is a danger case.

    - Whenever the voltage lies between VIH and VOH, it will always being treated as 1V or logic 1.

    - Therefore, we have to ensure that the voltage didn't enter in undefined region since it cannot be identified whether the voltage might be in logic 1 or not.

    - That is the problem when we are having a large physical distance from the main power supply to the circuit.

    - Noise margin defines the input voltage range and the output voltage. Basically it varies the input voltage. --> Noise margin: Any voltage in between the range of VOH and VIH will be detected as logic 1. It should be put under the inputs/outputs of the circuit.

    - Any voltage level in NML range will be detected as logic 0.

    - Noise could be easily eliminated or can be ignored at this margin.
    - Lower Supply Voltage leading to lesser noise margin.
    - When the supply voltage is reduced, the noise margin will also be reduced.

**Introduction to Signal Integrity and Glitch**

    - Signal Integrity and Crosstalk are the Quality checks of the clock routes.

    - Signal integrity: the ability of an electrical signal to carry information reliably and resist the effects of high-frequency electromagnetic interference from nearby signals.

    - Crosstalk: the undesirable electrical interaction between two or more physically adjacent nets due to capacitive cross-coupling. It is a type of noise signal that corrupts the actual signal while transmission through the communication medium.

*Aggressor and Victim Nets*

    - A net that receives undesirable cross-coupling effects from a nearby net is called a victim net.

    - A net that causes these effects in a victim net is called an aggressor net.

- Crosstalk-Glitch

    When one net is switching, and another net is constant then switching signal may cause spikes on other net because of which coupling capacitance (Cc) occurs between two nets, this is called as crosstalk noise.

    Types of Glitches --> Rise, Fall, Overshoot, Undershoot

  **Performing analysis and report commands**

1. Enable PrimeTime SI --> set_app_varsi_enable_analysistrue
2. Back-annotate the design with cross-coupling capacitance information in a SPEF or GPD file --> read_parasitics-keep_capacitive_couplingfile_name.spf

3. Using check_timing:
   
```
no_driving_cell
ideal_clocks
partial_input_delay
unexpandable_clocks
```
4. Timing reports
```
report_timing
-crosstalk_delta
report_si_bottleneck
report_delay_calculation –crosstalk
report_si_double_switching
report_noise
report_timing -transition_time-crosstalk_delta \ -input_pins-significant_digits 4   (Viewing the Crosstalk Analysis Report)
```
5. Bottleneck Reports
```
report_si_bottleneck
report_bottleneck
delta_delay
delta_delay_ratio
total_victim_delay_bump
delay_bump_per_aggressor
  
report_si_bottleneck-cost_typedelta_delay\-slack_lesser_than 2.0    (To get a list of all the victim nets with a delay violation or within 2.0 time units of a violation, listed in order of delta delay)

report_delay_calculation –crosstalk
size_cell
set_coupling_separation
-include_clock_nets
minimum_active_aggressor

report_si_bottleneck-cost_type delta_delay \ -minimum_active_aggressors 3   (bottleneck command reports nets where three or more active aggressors are affecting the net)
```

6. Crosstalk Net Delay Calculation:
```
report_delay_calculation-crosstalk \ -from [get_pinsg1/Z] -to [get_pins g2/A]
```
7. Reporting Crosstalk Settings
```
report_si_delay_analysis
report_si_noise_analysis
report_si_aggressor_exclusion
```
</details>

<details>
	
<summary> LABs </summary>

In icc2_shell:
```
source top.tcl
update_timing
write_parasitics -format spef -output vsdbabysoc_spef

```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/e0bdcfef4400102228518588886262e1caa3ec22/PD%23day27/write_para.png">

```
gzip -d vsdbabysoc.pt.v.gz
```
In pt_shell:
```
set target_library "/home/prakhar.g2/Samsung-PD-Training-/day20/libs/sky130_fd_sc_hd__tt_025C_1v80.db /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsdpll.db /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsddac.db"
set link_library [list /home/prakhar.g2/Samsung-PD-Training-/day20/libs/sky130_fd_sc_hd__tt_025C_1v80.db /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsdpll.db /home/prakhar.g2/Samsung-PD-Training-/day20/libs/avsddac.db] 
read_verilog vsdbabysoc.pt.v
link_design
current_design
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/e0bdcfef4400102228518588886262e1caa3ec22/PD%23day27/current_design.png">

```
read_sdc func1_old.sdc
set_app_var si_enable_analysis true
read_parasitics -keep_capacitive_coupling vsdbabysoc_spef.temp1_25.spef
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/e0bdcfef4400102228518588886262e1caa3ec22/PD%23day27/read_para.png">

```
check_timing
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/e0bdcfef4400102228518588886262e1caa3ec22/PD%23day27/report_bottleneck.png">

```
report_si_bottleneck              (Report of the nets that have the largest crosstalk effects)
report_bottleneck                 (Report of multiple min/max delay violation)
report_si_delay_analysis
report_si_aggressor_exclusion
report_si_noise_analysis
```
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/e0bdcfef4400102228518588886262e1caa3ec22/PD%23day27/aggerasor.png">
<img width="600" alt="place_layout2" src="https://github.com/Luffy-7744/Samsung-PD-Training-/blob/e0bdcfef4400102228518588886262e1caa3ec22/PD%23day27/anoted_para.png">



</details>


## Day-28- Topic: Introduction to DRC/LVS

<details>
 <summary> Introduction to SkyWater SKY130 </summary>

  <summary> Theory: Introduction to SkyWater PDKs and opensource EDA tools </summary>

  **Introduction to Skywater PDK**

    SkyWater Open Source PDK is a joint project between Google and SkyWater Technology Foundry, where it provides a fully open source Process Design Kit (PDK), and its related resources.

    SkyWater open PDK public repository contains:
        Documentation: https://skywater-pdk.readthedocs.io/en/main/
        PDK Library and files: https://github.com/google/skywater-pdk
        Community: https://invite.skywater.tools/
130" in SKY130 stands for the feature size, which is the length of smallest transistor that can be manufactured in the process.

**Open-Source EDA Tools**

    Open_PDKs is a Makefile based installer that takes files from the SkyWater PDKs and reformats them for a number of open source EDA tools.

    Tools that is supported by open_pdks:
        Magic
        Klayout
        Openlane
        Xschem
        Netgen
        Ngspice
        IVerilog
        qflow
        IRSIM
        xcircuit

    The libraries supported by open_pdks are:
        Digital standard cells i.e. sky130_fd_sc_hd
        Primitive devices/analog i.e. sky130_fd_pr
        I/O cells i.e. sky130_fd_io
        3rd party libraries i.e. sky130_ml_xx_hd

    Open_PDKs uses a common installed file system structure, where SkyWater PDKs are under /usr/share/pdk/sky130A/ directory.

    There are 2 subdirectories under the main SKY130 PDK's directory.
        libs.tech
        libs.ref

    libs.tech --> containing all subdirectories for the open source tool setup.

    libs.ref --> containing the reference libraries in various formats.

    project_root/ --> project directory that is containing subdirectories for each tool or flow needed.

    ### Physical Verification and Design Flow
  
* Physical verification is perfomed to check whether we have a mask layout that matches what we think the circuit should be.
  
* There are 2 major steps in physical verification.
  + **Design Rule Checking (DRC)** --> to ensure that the layout matches all the rules provided by the foundy for the specific process.
  + **Layout Vs. Schematic (LVS)** --> to ensure that the layout netlist matches the schematic netlist.
 
</details>

<details>
  <summary>Lab: Tool installations and basic DRC/LVS design flow tools</summary>
  
### Opensource EDA Tools: Check Tool Installations
  
**Magic**
  
* Command ```magic``` in the command prompt to invoke magic interface. 
  
* A layout window and a console window that is used to run commands for layout and actions will be popped out.
  
* Tcl interpreter can be invoked in the terminal instead of seperate console window by using the option ```magic -noconsole```.
  
* Magic can also be run without graphics layout window using the option ```magic -dnull - noconsole```, and should be called as such when running from a script. 
  
* Command ```magic -dnull -noconsole filename.tcl``` is used to run magic in batch mode.
  
**Netgen**
  
* Command ```netgen``` in the terminal to invoke Netgen. It is completely command driven and has no graphics interface. The console window is a stock tcl interpreter as in Magic.
  
* Tcl interpreter can be invoked in the terminal instead of seperate console window by using the option ```netgen -noconsole```.
  
* Command ```netgen -batch source filename.tcl``` is used to run Netgen in batch mode.
  
* Netgen provides GUI window written in python that can be accessed using ```usr/local/lib/netgen/pyhton/lvs_manager.py```, though this interface hides many useful options that cannot be accessed with just this window itself.
  
**Xschem**
  
* Command ```xschem``` in the terminal to invoke Xschem. This should bring up a schematics window.
  
* Xschem has no seperate console window and uses native command line terminal for tcl commands, unlike Netgen and Magic.
  
* Command ```xschem --tcl filename.tcl -q``` is used to run Xschem in batch mode.
  
**Ngspice**
  
* Command ```ngspice``` in the terminal to invoke Ngspice in Linux.
  
* Ngspice has its own prompt and runs its own set of interpreter commands that aren't based on tcl. 
  
* Command ```ngspice -b``` is used to run Ngspice in batch mode.
  
### Creating Sky130 Device Layout In Magic
  
```
mkdir inverter
cd inverter
mkdir xschem
mkdir mag
mkdir netgen
cd xschem
ln -s xschemrc
ln -s spinit .spiceinit
ln -s sky130A.magicrc .magicrc
ln -s sky130A_setup.tcl setup.tcl
```
**xscheme**

```
cd inverter/xschem/
xschem
```
* This brings up a display for xschem with a lot of example schematics, SKY130 devices are shown in xschem as below.
  
*Note: Examples can be accessed by clicking the relevant rectangle and pressing the "E" key on the keyboard. We can return to the menu by pressing "CTRL+E". The "F" key resizes the schematic to fit the window.*
  
![image](https://user-images.githubusercontent.com/118953917/220499949-67b0a991-0082-4f97-bf3e-77e2a148c0e2.png)

  **magic**

```
cd ../mag/
magic
magic -d XR     (To invoke a cairo graphics package that uses 3D acceleration to get better rendering than the default graphics)
magic -d -OGL   (An OpenGL based graphics package)
```
  
* This brings up 2 magic windows, with the layout window displaying "Technology: sky130A", along with many colors and icons displaying the available layers in this technology, as shown below.

![image](https://user-images.githubusercontent.com/118953917/220500607-d3316a91-8339-4df7-9475-3768d9f360cf.png)
  
* Useful Magic Shortcuts:
  + Left and right mouse buttons --> to adjust the cursor box
  + Shift+Z --> to zoom out
  + Middle mouse button/P --> to select a layer (also known as painting)
  + Key E --> to erase whatever is present in the cursor box (can also be done by clicking the middle mouse button on an empty part of the layout)
  + Key V --> to view the entire layout
  + CTRL+P --> opens up the parameter options for the selected device
  + S key --> to select layers
  + Typing "what" command in the magic console --> gives information on the selected layer
  + ";" key --> to type commands in the magic console without moving between windows, until the Enter key is pressed
  + I key --> to select a device
  + M key --> to move the selected device

* To edit Devices drop down buttons: Click on Devices 1 -> nmos (MOSFET)
  
* Select nmos (MOSFET) under "Devices 1" and set the width to 2 um, length to 0.5 um and fingers to 3.
  
![image](https://user-images.githubusercontent.com/118953917/220506020-3aa752a5-9940-49a8-adad-a79f115b651c.png)
  
![image](https://user-images.githubusercontent.com/118953917/220509577-9870bcde-5ec6-4b83-9f44-74a042da6952.png)

* Changing the device type to sky130_fd_pr__nfet_g5v0d10v5
  
![image](https://user-images.githubusercontent.com/118953917/220510768-6080b79d-b78e-49ac-a7ed-1a9c9aaaec1b.png)

### Creating Simple Schematic In Xschem
  
```
cd ../xschem/
xschem
```
  
* Press "Insert" key to pop out Choose symbol window. Select the SkyWater library directory path to access SkyWater components and choose the fd_pr library. To create an inverter, a basic nfet and pfet are needed. Therefore, select nfet and pfet device from the insert window and place it anywhere in the schematic.
  
![image](https://user-images.githubusercontent.com/118953917/220518340-6c1f52c3-21a1-4bf7-8043-3f5bbba34cb4.png)
  
* As pins are not PDK specific, they can be found under the xschem library in the insert window. These are named as ipin.sym, opin.sym and iopin.sym. 
  
* Place the pins and use M key to move the components around on the schematic window. Use C key to copy the components and Del key to erase components. Make use of W key to insert wires between components and make connections. 
  
* Rename each pin to something sensible using the Q key to bring up the parameter window.
  
* Select the components by clicking on them and click Q key to bring up the parameter windows to configure the properties of the devices. 
  
* For **nfet**, change the length to 0.18 as the default value of 0.15 is restricted to sram devices only. Set the number of fingers to 3, and the width of each finger to 1.5. 
  
* Since we have 3 fingers now, the total width in the parameter window must be set to 3 times of the finger width, which is 4.5. 
  
* Similarly, for **pfet**, adjust the parameters to 3 fingers, width of 1 per finger, and a length of 0.18. We must specify the body to be connected to the Vdd pin as it is a 3 pin pfet.
  
![image](https://user-images.githubusercontent.com/118953917/220520320-0af30699-82b8-4369-9d89-fb68fa3e0fce.png)

* Save the design by clicking tab File --> save as --> inverter.sch

### Creating Symbol And Exporting Schematic In Xschem
  
* To functionally validate the schematic, testbench that is separated from the schematic must be created. 
  
 * Firstly, create a symbol for the schematic as the schematic will appear as a symbol in the testbench. To do this, click on the Symbol menu and select "Make symbol from schematic". Then, create a testbench schematic using new schematic option and insert the generated symbol from the local directory using the Insert key.
  
* Select new schematic in File tab and choose inverter.sch under home directory and paste it on the schematic window.
  
* The testbench will be very simple where we will generate a ramp input and observe the output response after connecting the power supplies. To do this, insert 2 voltage sources from the default xschem library, one for the input and one for the supply. Connect these and add a GND node to the supply connections. Create "ipins" and "opins" for the input and output signals to observe in Ngspice. 
  
* Supply voltage is set to 1.8 V. For the input voltage, we must set the supply to a piece-wise linear function to get ramp. PWL function has voltage and time values stated that the supply will start at 0v, then start to ramp up from 20 ns till it reaches its final value at 900 ns of 1.8 V. 
  
* Next, place two more statements for ngspice, but as these aren't specific to any component, they must be placed in text boxes. To place a text box, select the code_shown.sym component under the xschem library.
  
* The first text box will specify the location of the device models used in the device schematic, where it is using a .lib statement that selects a top level file that tells ngspice where to find all the models and also specifying a simulation corner for all the models. The first block specifying the typical corner with ```value = ".lib /usr/share/pdk/sky130A/libs.tech/ngspice/sky130.lib.spice tt"```. 
  
* For the second block, it specifies;
```
value = ".control
tran 1n 1u
plot V(in) V(out)
.endc"
```
  
* This will tell ngspice to run a transient simulation for 1 ns and monitor voltages for the in and out pins. Therefore, a complete testbench schematic is shown as below, and save this as inverter_tb.sch
  
![image](https://user-images.githubusercontent.com/118953917/220539048-6f9c5a5c-10f7-45e0-be88-52af87624eb3.png)

* To generate the netlist, click on the Netlist button, then simulate it in Ngspice by clicking the Simulate button. 
  
* The waveform confirms that the schematic behaves as an inverter as shown below.
  
![image](https://user-images.githubusercontent.com/118953917/220541463-5897304d-d91e-4325-99ae-97bd59da2003.png)

* After verified the schematic, create a layout for it. To do this, go back to the inverter schematic. 
  
* Firstly, click on the Simulation menu and select "LVS netlist: Top Lvel is a .subckt" option. 
  
* Wait a few seconds and go back to the Simulation menu to check whether a tick mark appears beside the aforementioned option. This verifies if we have properly defined a sub circuit for creating a layout cell with pins in the layout. 
* Finally, generate a netlist for the schematic by clicking the Netlist button and exit Xschem.

### Importing Schematic To Layout And Inverter Layout Steps
  
```
cd ../mag/
magic -d XR
```  
  
* Import the schematic to the layout in Magic by running the magic, then click on File -> Import SPICE and then select the inverter.spice file from the xschem directory. If done correctly, the following layout has been opened up in magic.
  
![image](https://user-images.githubusercontent.com/118953917/220548501-d5759edd-b58c-4149-8490-f560e0906740.png)
![image](https://user-images.githubusercontent.com/118953917/220548959-0d23c844-8ca0-4112-a574-6a7e900f7516.png)

* Referring to the layout generated above, the schematic import does not know how to do analog placing and routing as it is very complicated. Therefore, We must place them in the best positions and wire them up manually. 
  
* Firstly, place the pfet device above the nfet and adjust the placement of the input, output and supply pins. Refer below figure.
  
![image](https://user-images.githubusercontent.com/118953917/220553775-6486d0f0-3144-48c1-815f-cae9f2dfb513.png)

* Next, set some parameters that are only adjustable in the layout which will make it more convenient to wire the whole layout up. 
  
* To pop out the parameter editing section, use S key and press I key to select the object, then use CTRL+P to open up the parameter options for the selected device.
  
* Set the "Top guard ring via coverage" to 100. This will put a local interconnect to metal1 via ta the top of the guard ring. Next, for "Source via coverage", put +40 and for "Drain via coverage", put -40. This will split the source drain contacts, making it easy to connect them with a wire. 
  
* For nfet, set the "Bottom guard ring via coverage" to 100, while the source and drain via coverages are set to +40 and -40, respectively, like the pfet.
  
* Start to paint the wires using metal1 layers by connecting the source of the pfet to Vdd and source of the nfet to Vss. Next, connect the drains of both mosfets to the output. Finally, connect the input to all the poly contacts of the gate. 
  
![image](https://user-images.githubusercontent.com/118953917/220634394-2cc70484-4070-42d7-af1d-c534af076da4.png)

* Save the file and select the autowrite option. 
	
* Run the following commands in the magic console.
  
```
extract do local    (Ensuring that magic writes all results to the local directory)
extract all         (Performing the actual extraction)
ext2spice lvs       (Simulating and setting up the netlist to hierarchical spice output in ngspice format with no parasitic components)
ext2spice           (Generating the spice netlist)
```
  
![image](https://user-images.githubusercontent.com/118953917/220818458-c1c66460-eeb1-4730-8c2b-a3ac764171a0.png)
  
```
rm *.ext                                          (Clear any unwanted files -> .ext files are just intermediate results from the extraction)
/usr/share/pdk/bin/cleanup_unref.py -remove .     (Clean up extra .mag files -> files containing paramaterised cells that were created and saved but not used in the design)
netgen -batch lvs "../mag/inverter.spice inverter" "../xschem/inverter.spice inverter"    (Run LVS by entering the netgen subdirectory)
```
  
* Remember to always use the layout netlist first and schematic netlist second in the netgen command as in side by side, resulting the layout is on the left and the schematic is on the right. 
  
* Each netlist is represented by a pair of keywords in quotes, where the first is the location of the netlist file and the second is the name of the subcircuit to compare. 
  
* As we can see from the result below, there was an issue in the wiring and the netlists do not match. This is due to wiring errors in the layout.

**Debugging errors in netlist, rerun and save layout**
  
```
extract do local
extract all
ext2spice lvs
ext2spice cthresh 0     (Tells magic to add all the parasitic capacitances to the spice netlist)
ext2spice
```

* Referring to the netlist file below, there are multiple lines beginning with C, which detail the parasitic capacitances.
  
```
vim inverter.spice 
```
  
![image](https://user-images.githubusercontent.com/118953917/220836829-6b35e6a9-19a8-41f0-b85a-1eba2ef39a99.png)

```
cp ../xschem/inverter_tb.spice .
vim inverter_tb.spice
```
  
* Modify the test bench netlist file.
  
![image](https://user-images.githubusercontent.com/118953917/220838344-940395c3-c800-4330-a236-78ee3ecc8be6.png)

```
/usr/share/pdk/bin/cleanup_unref.py -remove .
cp ../xschem/.spiceinit .
ngspice inverter_tb.spice
```
</details>

